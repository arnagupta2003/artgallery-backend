import{a as Vo}from"./chunk-SG6WIVG6.js";import{$ as U,$a as Se,$b as An,$d as ta,$e as ua,$f as Sa,A as un,Ab as ci,Ac as Lt,Ae as z,Af as Ca,B as A,Bc as Oo,Be as Gt,Bf as gt,C as s,Cb as mt,Ce as jt,Cf as Qe,D as p,Db as It,De as Wt,Df as ba,E as h,Ea as xn,Eb as at,Ee as Tt,Ef as ya,F as N,Fa as ri,Fb as ut,Fc as qe,Ff as xa,Fg as Ze,G as L,Ga as S,Gb as Rt,Gc as $t,Ge as ie,Gg as Ci,H as et,Ha as Z,He as he,Hf as Qi,Hg as Na,I as D,Ia as ye,Ib as Pt,Ic as Ln,If as De,J as C,Jb as Ie,Je as la,Jf as Ye,K as u,Ka as pt,Kb as Bt,Kc as Ut,Ke as mi,Kf as Be,Kg as La,L as _n,La as it,Lb as si,Le as rt,Lf as Ae,Lg as St,M as gn,Ma as Ei,Mb as Pe,Me as Dt,Mf as Me,Mg as Et,N as fn,Na as X,Nb as ki,Nc as E,Ng as $a,O as tt,Oa as Ge,Ob as wi,Oc as $n,Of as fi,Og as Ua,P as $e,Pb as Ri,Pc as Un,Pe as ca,Pf as hi,Pg as Ga,Q as Ue,Qa as In,Qb as kn,Qc as Gn,Qd as Zn,Qf as Ia,Qg as ei,R as W,Ra as se,Rb as pi,Rc as Gi,Re as sa,Rf as Pa,S as f,Sa as Pn,Sb as Bi,Sc as jn,Se as pa,Sf as Zt,Sg as ti,T,Ta as ue,Tb as wn,Tc as Wn,Tf as Jt,Tg as Ki,U as v,Ua as li,Ub as Rn,Uc as qn,Ue as da,Ug as ja,V as kt,Va as Oi,Vb as We,Vc as Hn,Ve as ma,Vf as Ke,Vg as zi,W as hn,Wb as Ai,Wc as Qn,We as qi,Wf as Xt,Wg as Zi,X as ve,Xa as _e,Xc as Yn,Xd as ji,Xf as lt,Xg as ii,Y as Ce,Yb as Bn,Yc as Kn,Yd as Jn,Yf as Ta,Yg as ne,Z as be,Za as bt,Zb as Mi,Zc as zn,Zd as Xn,Ze as qt,Zf as Da,Zg as ct,_ as Di,_a as Tn,_b as At,_d as ea,_e as Hi,_f as Fa,_g as Je,a as ln,aa as G,ab as k,ac as Mt,ag as Ea,b as ai,ba as st,bb as Dn,bc as le,bg as ze,c as cn,ca as Fi,cb as yt,d as vt,da as vn,db as Ee,dc as ke,de as Wi,e as sn,ea as c,ec as ot,ef as _a,f as Ct,fa as d,fc as Te,fg as Ne,g as y,ga as O,gb as ee,gc as Mn,gf as Ht,gh as Ji,h as x,ha as Cn,hb as Fo,hc as Ni,hf as Re,ia as H,ib as Vi,ic as Nt,j as Xe,ja as me,jb as nt,jf as Qt,jg as ge,k as Pi,ka as wt,kb as Fn,kf as Yt,kg as Oa,la as bn,lb as So,lf as ga,lg as Va,m as oi,ma as Q,mf as fa,mg as ka,n as a,na as q,nb as xt,ne as ia,nf as ui,o as pn,ob as Sn,oe as R,of as _i,og as wa,pb as dt,pe as na,pg as Yi,q as P,qb as Oe,qf as gi,qg as vi,rb as En,rc as Li,rg as Le,s as B,sa as Si,sb as $,sc as $i,sf as ha,t as dn,ta as Y,tb as On,tc as Ui,te as aa,tf as va,ub as je,uc as Nn,ue as oa,ug as Ra,v as mn,vb as ce,ve as ra,vg as Ba,w as de,wb as Ve,wf as _t,wg as Aa,x as _,xb as re,xc as di,xe as J,xf as Ft,y as Ti,yb as xe,yc as Eo,ye as He,yf as Kt,yg as Ma,z as o,za as yn,zb as Vn,ze as we,zf as zt}from"./chunk-KEHI5R4L.js";import{a as te,b as fe,e as Do,g as ht,i as rn}from"./chunk-BAF7YKD7.js";var ro=Do(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.StockMovementType=w.SortOrder=w.Permission=w.OrderType=w.MetricType=w.MetricInterval=w.LogicalOperator=w.LanguageCode=w.JobState=w.HistoryEntryType=w.GlobalFlag=w.ErrorCode=w.DeletionResult=w.CurrencyCode=w.AssetType=w.AdjustmentType=void 0;var Wa=function(e){return e.DISTRIBUTED_ORDER_PROMOTION="DISTRIBUTED_ORDER_PROMOTION",e.OTHER="OTHER",e.PROMOTION="PROMOTION",e}(Wa||(w.AdjustmentType=Wa={})),qa=function(e){return e.BINARY="BINARY",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e}(qa||(w.AssetType=qa={})),Ha=function(e){return e.AED="AED",e.AFN="AFN",e.ALL="ALL",e.AMD="AMD",e.ANG="ANG",e.AOA="AOA",e.ARS="ARS",e.AUD="AUD",e.AWG="AWG",e.AZN="AZN",e.BAM="BAM",e.BBD="BBD",e.BDT="BDT",e.BGN="BGN",e.BHD="BHD",e.BIF="BIF",e.BMD="BMD",e.BND="BND",e.BOB="BOB",e.BRL="BRL",e.BSD="BSD",e.BTN="BTN",e.BWP="BWP",e.BYN="BYN",e.BZD="BZD",e.CAD="CAD",e.CDF="CDF",e.CHF="CHF",e.CLP="CLP",e.CNY="CNY",e.COP="COP",e.CRC="CRC",e.CUC="CUC",e.CUP="CUP",e.CVE="CVE",e.CZK="CZK",e.DJF="DJF",e.DKK="DKK",e.DOP="DOP",e.DZD="DZD",e.EGP="EGP",e.ERN="ERN",e.ETB="ETB",e.EUR="EUR",e.FJD="FJD",e.FKP="FKP",e.GBP="GBP",e.GEL="GEL",e.GHS="GHS",e.GIP="GIP",e.GMD="GMD",e.GNF="GNF",e.GTQ="GTQ",e.GYD="GYD",e.HKD="HKD",e.HNL="HNL",e.HRK="HRK",e.HTG="HTG",e.HUF="HUF",e.IDR="IDR",e.ILS="ILS",e.INR="INR",e.IQD="IQD",e.IRR="IRR",e.ISK="ISK",e.JMD="JMD",e.JOD="JOD",e.JPY="JPY",e.KES="KES",e.KGS="KGS",e.KHR="KHR",e.KMF="KMF",e.KPW="KPW",e.KRW="KRW",e.KWD="KWD",e.KYD="KYD",e.KZT="KZT",e.LAK="LAK",e.LBP="LBP",e.LKR="LKR",e.LRD="LRD",e.LSL="LSL",e.LYD="LYD",e.MAD="MAD",e.MDL="MDL",e.MGA="MGA",e.MKD="MKD",e.MMK="MMK",e.MNT="MNT",e.MOP="MOP",e.MRU="MRU",e.MUR="MUR",e.MVR="MVR",e.MWK="MWK",e.MXN="MXN",e.MYR="MYR",e.MZN="MZN",e.NAD="NAD",e.NGN="NGN",e.NIO="NIO",e.NOK="NOK",e.NPR="NPR",e.NZD="NZD",e.OMR="OMR",e.PAB="PAB",e.PEN="PEN",e.PGK="PGK",e.PHP="PHP",e.PKR="PKR",e.PLN="PLN",e.PYG="PYG",e.QAR="QAR",e.RON="RON",e.RSD="RSD",e.RUB="RUB",e.RWF="RWF",e.SAR="SAR",e.SBD="SBD",e.SCR="SCR",e.SDG="SDG",e.SEK="SEK",e.SGD="SGD",e.SHP="SHP",e.SLL="SLL",e.SOS="SOS",e.SRD="SRD",e.SSP="SSP",e.STN="STN",e.SVC="SVC",e.SYP="SYP",e.SZL="SZL",e.THB="THB",e.TJS="TJS",e.TMT="TMT",e.TND="TND",e.TOP="TOP",e.TRY="TRY",e.TTD="TTD",e.TWD="TWD",e.TZS="TZS",e.UAH="UAH",e.UGX="UGX",e.USD="USD",e.UYU="UYU",e.UZS="UZS",e.VES="VES",e.VND="VND",e.VUV="VUV",e.WST="WST",e.XAF="XAF",e.XCD="XCD",e.XOF="XOF",e.XPF="XPF",e.YER="YER",e.ZAR="ZAR",e.ZMW="ZMW",e.ZWL="ZWL",e}(Ha||(w.CurrencyCode=Ha={})),Qa=function(e){return e.DELETED="DELETED",e.NOT_DELETED="NOT_DELETED",e}(Qa||(w.DeletionResult=Qa={})),Ya=function(e){return e.ALREADY_REFUNDED_ERROR="ALREADY_REFUNDED_ERROR",e.CANCEL_ACTIVE_ORDER_ERROR="CANCEL_ACTIVE_ORDER_ERROR",e.CANCEL_PAYMENT_ERROR="CANCEL_PAYMENT_ERROR",e.CHANNEL_DEFAULT_LANGUAGE_ERROR="CHANNEL_DEFAULT_LANGUAGE_ERROR",e.COUPON_CODE_EXPIRED_ERROR="COUPON_CODE_EXPIRED_ERROR",e.COUPON_CODE_INVALID_ERROR="COUPON_CODE_INVALID_ERROR",e.COUPON_CODE_LIMIT_ERROR="COUPON_CODE_LIMIT_ERROR",e.CREATE_FULFILLMENT_ERROR="CREATE_FULFILLMENT_ERROR",e.DUPLICATE_ENTITY_ERROR="DUPLICATE_ENTITY_ERROR",e.EMAIL_ADDRESS_CONFLICT_ERROR="EMAIL_ADDRESS_CONFLICT_ERROR",e.EMPTY_ORDER_LINE_SELECTION_ERROR="EMPTY_ORDER_LINE_SELECTION_ERROR",e.FACET_IN_USE_ERROR="FACET_IN_USE_ERROR",e.FULFILLMENT_STATE_TRANSITION_ERROR="FULFILLMENT_STATE_TRANSITION_ERROR",e.GUEST_CHECKOUT_ERROR="GUEST_CHECKOUT_ERROR",e.INELIGIBLE_SHIPPING_METHOD_ERROR="INELIGIBLE_SHIPPING_METHOD_ERROR",e.INSUFFICIENT_STOCK_ERROR="INSUFFICIENT_STOCK_ERROR",e.INSUFFICIENT_STOCK_ON_HAND_ERROR="INSUFFICIENT_STOCK_ON_HAND_ERROR",e.INVALID_CREDENTIALS_ERROR="INVALID_CREDENTIALS_ERROR",e.INVALID_FULFILLMENT_HANDLER_ERROR="INVALID_FULFILLMENT_HANDLER_ERROR",e.ITEMS_ALREADY_FULFILLED_ERROR="ITEMS_ALREADY_FULFILLED_ERROR",e.LANGUAGE_NOT_AVAILABLE_ERROR="LANGUAGE_NOT_AVAILABLE_ERROR",e.MANUAL_PAYMENT_STATE_ERROR="MANUAL_PAYMENT_STATE_ERROR",e.MIME_TYPE_ERROR="MIME_TYPE_ERROR",e.MISSING_CONDITIONS_ERROR="MISSING_CONDITIONS_ERROR",e.MULTIPLE_ORDER_ERROR="MULTIPLE_ORDER_ERROR",e.NATIVE_AUTH_STRATEGY_ERROR="NATIVE_AUTH_STRATEGY_ERROR",e.NEGATIVE_QUANTITY_ERROR="NEGATIVE_QUANTITY_ERROR",e.NOTHING_TO_REFUND_ERROR="NOTHING_TO_REFUND_ERROR",e.NO_ACTIVE_ORDER_ERROR="NO_ACTIVE_ORDER_ERROR",e.NO_CHANGES_SPECIFIED_ERROR="NO_CHANGES_SPECIFIED_ERROR",e.ORDER_INTERCEPTOR_ERROR="ORDER_INTERCEPTOR_ERROR",e.ORDER_LIMIT_ERROR="ORDER_LIMIT_ERROR",e.ORDER_MODIFICATION_ERROR="ORDER_MODIFICATION_ERROR",e.ORDER_MODIFICATION_STATE_ERROR="ORDER_MODIFICATION_STATE_ERROR",e.ORDER_STATE_TRANSITION_ERROR="ORDER_STATE_TRANSITION_ERROR",e.PAYMENT_METHOD_MISSING_ERROR="PAYMENT_METHOD_MISSING_ERROR",e.PAYMENT_ORDER_MISMATCH_ERROR="PAYMENT_ORDER_MISMATCH_ERROR",e.PAYMENT_STATE_TRANSITION_ERROR="PAYMENT_STATE_TRANSITION_ERROR",e.PRODUCT_OPTION_IN_USE_ERROR="PRODUCT_OPTION_IN_USE_ERROR",e.QUANTITY_TOO_GREAT_ERROR="QUANTITY_TOO_GREAT_ERROR",e.REFUND_AMOUNT_ERROR="REFUND_AMOUNT_ERROR",e.REFUND_ORDER_STATE_ERROR="REFUND_ORDER_STATE_ERROR",e.REFUND_PAYMENT_ID_MISSING_ERROR="REFUND_PAYMENT_ID_MISSING_ERROR",e.REFUND_STATE_TRANSITION_ERROR="REFUND_STATE_TRANSITION_ERROR",e.SETTLE_PAYMENT_ERROR="SETTLE_PAYMENT_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e}(Ya||(w.ErrorCode=Ya={})),Ka=function(e){return e.FALSE="FALSE",e.INHERIT="INHERIT",e.TRUE="TRUE",e}(Ka||(w.GlobalFlag=Ka={})),za=function(e){return e.CUSTOMER_ADDED_TO_GROUP="CUSTOMER_ADDED_TO_GROUP",e.CUSTOMER_ADDRESS_CREATED="CUSTOMER_ADDRESS_CREATED",e.CUSTOMER_ADDRESS_DELETED="CUSTOMER_ADDRESS_DELETED",e.CUSTOMER_ADDRESS_UPDATED="CUSTOMER_ADDRESS_UPDATED",e.CUSTOMER_DETAIL_UPDATED="CUSTOMER_DETAIL_UPDATED",e.CUSTOMER_EMAIL_UPDATE_REQUESTED="CUSTOMER_EMAIL_UPDATE_REQUESTED",e.CUSTOMER_EMAIL_UPDATE_VERIFIED="CUSTOMER_EMAIL_UPDATE_VERIFIED",e.CUSTOMER_NOTE="CUSTOMER_NOTE",e.CUSTOMER_PASSWORD_RESET_REQUESTED="CUSTOMER_PASSWORD_RESET_REQUESTED",e.CUSTOMER_PASSWORD_RESET_VERIFIED="CUSTOMER_PASSWORD_RESET_VERIFIED",e.CUSTOMER_PASSWORD_UPDATED="CUSTOMER_PASSWORD_UPDATED",e.CUSTOMER_REGISTERED="CUSTOMER_REGISTERED",e.CUSTOMER_REMOVED_FROM_GROUP="CUSTOMER_REMOVED_FROM_GROUP",e.CUSTOMER_VERIFIED="CUSTOMER_VERIFIED",e.ORDER_CANCELLATION="ORDER_CANCELLATION",e.ORDER_COUPON_APPLIED="ORDER_COUPON_APPLIED",e.ORDER_COUPON_REMOVED="ORDER_COUPON_REMOVED",e.ORDER_CUSTOMER_UPDATED="ORDER_CUSTOMER_UPDATED",e.ORDER_FULFILLMENT="ORDER_FULFILLMENT",e.ORDER_FULFILLMENT_TRANSITION="ORDER_FULFILLMENT_TRANSITION",e.ORDER_MODIFIED="ORDER_MODIFIED",e.ORDER_NOTE="ORDER_NOTE",e.ORDER_PAYMENT_TRANSITION="ORDER_PAYMENT_TRANSITION",e.ORDER_REFUND_TRANSITION="ORDER_REFUND_TRANSITION",e.ORDER_STATE_TRANSITION="ORDER_STATE_TRANSITION",e}(za||(w.HistoryEntryType=za={})),Za=function(e){return e.CANCELLED="CANCELLED",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.PENDING="PENDING",e.RETRYING="RETRYING",e.RUNNING="RUNNING",e}(Za||(w.JobState=Za={})),Ja=function(e){return e.af="af",e.ak="ak",e.am="am",e.ar="ar",e.as="as",e.az="az",e.be="be",e.bg="bg",e.bm="bm",e.bn="bn",e.bo="bo",e.br="br",e.bs="bs",e.ca="ca",e.ce="ce",e.co="co",e.cs="cs",e.cu="cu",e.cy="cy",e.da="da",e.de="de",e.de_AT="de_AT",e.de_CH="de_CH",e.dz="dz",e.ee="ee",e.el="el",e.en="en",e.en_AU="en_AU",e.en_CA="en_CA",e.en_GB="en_GB",e.en_US="en_US",e.eo="eo",e.es="es",e.es_ES="es_ES",e.es_MX="es_MX",e.et="et",e.eu="eu",e.fa="fa",e.fa_AF="fa_AF",e.ff="ff",e.fi="fi",e.fo="fo",e.fr="fr",e.fr_CA="fr_CA",e.fr_CH="fr_CH",e.fy="fy",e.ga="ga",e.gd="gd",e.gl="gl",e.gu="gu",e.gv="gv",e.ha="ha",e.he="he",e.hi="hi",e.hr="hr",e.ht="ht",e.hu="hu",e.hy="hy",e.ia="ia",e.id="id",e.ig="ig",e.ii="ii",e.is="is",e.it="it",e.ja="ja",e.jv="jv",e.ka="ka",e.ki="ki",e.kk="kk",e.kl="kl",e.km="km",e.kn="kn",e.ko="ko",e.ks="ks",e.ku="ku",e.kw="kw",e.ky="ky",e.la="la",e.lb="lb",e.lg="lg",e.ln="ln",e.lo="lo",e.lt="lt",e.lu="lu",e.lv="lv",e.mg="mg",e.mi="mi",e.mk="mk",e.ml="ml",e.mn="mn",e.mr="mr",e.ms="ms",e.mt="mt",e.my="my",e.nb="nb",e.nd="nd",e.ne="ne",e.nl="nl",e.nl_BE="nl_BE",e.nn="nn",e.ny="ny",e.om="om",e.or="or",e.os="os",e.pa="pa",e.pl="pl",e.ps="ps",e.pt="pt",e.pt_BR="pt_BR",e.pt_PT="pt_PT",e.qu="qu",e.rm="rm",e.rn="rn",e.ro="ro",e.ro_MD="ro_MD",e.ru="ru",e.rw="rw",e.sa="sa",e.sd="sd",e.se="se",e.sg="sg",e.si="si",e.sk="sk",e.sl="sl",e.sm="sm",e.sn="sn",e.so="so",e.sq="sq",e.sr="sr",e.st="st",e.su="su",e.sv="sv",e.sw="sw",e.sw_CD="sw_CD",e.ta="ta",e.te="te",e.tg="tg",e.th="th",e.ti="ti",e.tk="tk",e.to="to",e.tr="tr",e.tt="tt",e.ug="ug",e.uk="uk",e.ur="ur",e.uz="uz",e.vi="vi",e.vo="vo",e.wo="wo",e.xh="xh",e.yi="yi",e.yo="yo",e.zh="zh",e.zh_Hans="zh_Hans",e.zh_Hant="zh_Hant",e.zu="zu",e}(Ja||(w.LanguageCode=Ja={})),Xa=function(e){return e.AND="AND",e.OR="OR",e}(Xa||(w.LogicalOperator=Xa={})),eo=function(e){return e.Daily="Daily",e}(eo||(w.MetricInterval=eo={})),to=function(e){return e.AverageOrderValue="AverageOrderValue",e.OrderCount="OrderCount",e.OrderTotal="OrderTotal",e}(to||(w.MetricType=to={})),io=function(e){return e.Aggregate="Aggregate",e.Regular="Regular",e.Seller="Seller",e}(io||(w.OrderType=io={})),no=function(e){return e.Authenticated="Authenticated",e.CreateAdministrator="CreateAdministrator",e.CreateAsset="CreateAsset",e.CreateCatalog="CreateCatalog",e.CreateChannel="CreateChannel",e.CreateCollection="CreateCollection",e.CreateCountry="CreateCountry",e.CreateCustomer="CreateCustomer",e.CreateCustomerGroup="CreateCustomerGroup",e.CreateFacet="CreateFacet",e.CreateOrder="CreateOrder",e.CreatePaymentMethod="CreatePaymentMethod",e.CreateProduct="CreateProduct",e.CreatePromotion="CreatePromotion",e.CreateSeller="CreateSeller",e.CreateSettings="CreateSettings",e.CreateShippingMethod="CreateShippingMethod",e.CreateStockLocation="CreateStockLocation",e.CreateSystem="CreateSystem",e.CreateTag="CreateTag",e.CreateTaxCategory="CreateTaxCategory",e.CreateTaxRate="CreateTaxRate",e.CreateZone="CreateZone",e.DeleteAdministrator="DeleteAdministrator",e.DeleteAsset="DeleteAsset",e.DeleteCatalog="DeleteCatalog",e.DeleteChannel="DeleteChannel",e.DeleteCollection="DeleteCollection",e.DeleteCountry="DeleteCountry",e.DeleteCustomer="DeleteCustomer",e.DeleteCustomerGroup="DeleteCustomerGroup",e.DeleteFacet="DeleteFacet",e.DeleteOrder="DeleteOrder",e.DeletePaymentMethod="DeletePaymentMethod",e.DeleteProduct="DeleteProduct",e.DeletePromotion="DeletePromotion",e.DeleteSeller="DeleteSeller",e.DeleteSettings="DeleteSettings",e.DeleteShippingMethod="DeleteShippingMethod",e.DeleteStockLocation="DeleteStockLocation",e.DeleteSystem="DeleteSystem",e.DeleteTag="DeleteTag",e.DeleteTaxCategory="DeleteTaxCategory",e.DeleteTaxRate="DeleteTaxRate",e.DeleteZone="DeleteZone",e.Owner="Owner",e.Public="Public",e.ReadAdministrator="ReadAdministrator",e.ReadAsset="ReadAsset",e.ReadCatalog="ReadCatalog",e.ReadChannel="ReadChannel",e.ReadCollection="ReadCollection",e.ReadCountry="ReadCountry",e.ReadCustomer="ReadCustomer",e.ReadCustomerGroup="ReadCustomerGroup",e.ReadFacet="ReadFacet",e.ReadOrder="ReadOrder",e.ReadPaymentMethod="ReadPaymentMethod",e.ReadProduct="ReadProduct",e.ReadPromotion="ReadPromotion",e.ReadSeller="ReadSeller",e.ReadSettings="ReadSettings",e.ReadShippingMethod="ReadShippingMethod",e.ReadStockLocation="ReadStockLocation",e.ReadSystem="ReadSystem",e.ReadTag="ReadTag",e.ReadTaxCategory="ReadTaxCategory",e.ReadTaxRate="ReadTaxRate",e.ReadZone="ReadZone",e.SuperAdmin="SuperAdmin",e.UpdateAdministrator="UpdateAdministrator",e.UpdateAsset="UpdateAsset",e.UpdateCatalog="UpdateCatalog",e.UpdateChannel="UpdateChannel",e.UpdateCollection="UpdateCollection",e.UpdateCountry="UpdateCountry",e.UpdateCustomer="UpdateCustomer",e.UpdateCustomerGroup="UpdateCustomerGroup",e.UpdateFacet="UpdateFacet",e.UpdateGlobalSettings="UpdateGlobalSettings",e.UpdateOrder="UpdateOrder",e.UpdatePaymentMethod="UpdatePaymentMethod",e.UpdateProduct="UpdateProduct",e.UpdatePromotion="UpdatePromotion",e.UpdateSeller="UpdateSeller",e.UpdateSettings="UpdateSettings",e.UpdateShippingMethod="UpdateShippingMethod",e.UpdateStockLocation="UpdateStockLocation",e.UpdateSystem="UpdateSystem",e.UpdateTag="UpdateTag",e.UpdateTaxCategory="UpdateTaxCategory",e.UpdateTaxRate="UpdateTaxRate",e.UpdateZone="UpdateZone",e}(no||(w.Permission=no={})),ao=function(e){return e.ASC="ASC",e.DESC="DESC",e}(ao||(w.SortOrder=ao={})),oo=function(e){return e.ADJUSTMENT="ADJUSTMENT",e.ALLOCATION="ALLOCATION",e.CANCELLATION="CANCELLATION",e.RELEASE="RELEASE",e.RETURN="RETURN",e.SALE="SALE",e}(oo||(w.StockMovementType=oo={}))});var nn=ht(ro(),1);var Fe=ht(Vo(),1),Ot=ht(So(),1);var pe=ht(Oo(),1);var so=ht(Eo(),1),po=ht(Fo(),1);function ko(e,l){if(e&1){let t=D();s(0,"button",6),C("click",function(){y(t);let i=u();return x(i.save())}),f(1),c(2,"translate"),p()}if(e&2){let t=u();o("disabled",t.detailForm.pristine||t.detailForm.invalid),a(),v(" ",d(2,2,"common.update")," ")}}function wo(e,l){if(e&1&&(N(0,19),h(1,"vdr-tabbed-custom-fields",20),c(2,"hasPermission"),L()),e&2){let t=u().$implicit,n=u(2);a(),o("customFields",n.optionGroupCustomFields)("customFieldsFormGroup",t.get("customFields"))("readonly",!d(2,3,n.updatePermission))}}function Ro(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.value.id," ")}}function Bo(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.value.createdAt,"short")," ")}}function Ao(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.value.updatedAt,"short")," ")}}function Mo(e,l){if(e&1&&(h(0,"input",28),c(1,"hasPermission")),e&2){let t=l.item,n=u(4);o("formControl",t.get("name"))("readonly",!d(1,2,n.updatePermission))}}function No(e,l){if(e&1&&h(0,"input",29),e&2){let t=l.item;o("formControl",t.get("code"))}}function Lo(e,l){if(e&1&&(h(0,"vdr-tabbed-custom-fields",30),c(1,"hasPermission")),e&2){let t=l.item,n=u(4);o("customFields",n.optionCustomFields)("compact",!0)("customFieldsFormGroup",t.get("customFields"))("readonly",!d(1,4,n.updatePermission))}}function $o(e,l){if(e&1){let t=D();s(0,"vdr-data-table-2",21),C("pageChange",function(i){y(t);let r=u().$implicit,m=u(2);return x(m.paginationSettings[r.value.id].currentPage=i)})("itemsPerPageChange",function(i){y(t);let r=u().$implicit,m=u(2);return x(m.paginationSettings[r.value.id].itemsPerPage=i)}),s(1,"vdr-dt2-column",22),c(2,"translate"),_(3,Ro,1,1,"ng-template"),p(),s(4,"vdr-dt2-column",23),c(5,"translate"),_(6,Bo,2,4,"ng-template"),p(),s(7,"vdr-dt2-column",24),c(8,"translate"),_(9,Ao,2,4,"ng-template"),p(),s(10,"vdr-dt2-column",25),c(11,"translate"),_(12,Mo,2,4,"ng-template"),p(),s(13,"vdr-dt2-column",26),c(14,"translate"),_(15,No,1,1,"ng-template"),p(),s(16,"vdr-dt2-column",27),c(17,"translate"),_(18,Lo,2,6,"ng-template"),p()()}if(e&2){let t=l.ngIf,n=u().$implicit,i=u(2);o("items",t)("trackByPath","value.id")("itemsPerPage",i.paginationSettings[n.value.id]==null?null:i.paginationSettings[n.value.id].itemsPerPage)("currentPage",i.paginationSettings[n.value.id]==null?null:i.paginationSettings[n.value.id].currentPage)("totalItems",t.length),a(),o("heading",d(2,17,"common.id"))("hiddenByDefault",!0),a(3),o("heading",d(5,19,"common.created-at"))("hiddenByDefault",!0),a(3),o("heading",d(8,21,"common.updated-at"))("hiddenByDefault",!0),a(3),o("heading",d(11,23,"common.name"))("optional",!1),a(3),o("heading",d(14,25,"common.code"))("optional",!1),a(3),o("heading",d(17,27,"common.custom-fields"))("hiddenByDefault",i.optionCustomFields.length===0)}}function Uo(e,l){if(e&1&&(s(0,"vdr-card",10),h(1,"vdr-page-entity-info",11),s(2,"div",12)(3,"vdr-form-field",13),c(4,"translate"),h(5,"input",14),c(6,"hasPermission"),p(),s(7,"vdr-form-field",15),c(8,"translate"),h(9,"input",16),c(10,"hasPermission"),p()(),_(11,wo,3,5,"ng-container",17)(12,$o,19,29,"vdr-data-table-2",18),p()),e&2){let t=l.$implicit,n=l.index,i=u(2);o("formArrayName",n)("title",t.value.code),a(),o("entity",t.value),a(2),o("label",d(4,11,"common.name")),a(2),o("id","name-"+n)("readonly",!d(6,13,i.updatePermission)),a(2),o("label",d(8,15,"common.code")),a(2),o("id","code-"+n)("readonly",!d(10,17,i.updatePermission)),a(2),o("ngIf",i.optionGroupCustomFields.length),a(),o("ngIf",i.getOptions(t))}}function Go(e,l){if(e&1&&(s(0,"form",7)(1,"div",8),_(2,Uo,13,19,"vdr-card",9),p()()),e&2){let t=u();o("formGroup",t.detailForm),a(2),o("ngForOf",t.getOptionGroups())}}function jo(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.create-product-option-group"),`
`)}function Wo(e,l){if(e&1){let t=D();s(0,"button",7),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",8),C("click",function(){y(t);let i=u();return x(i.confirm())}),f(4),c(5,"translate"),p()}if(e&2){let t=u();a(),T(d(2,3,"common.cancel")),a(2),o("disabled",t.form.invalid),a(),v(" ",d(5,5,"common.confirm")," ")}}function qo(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.create-product-variant"),`
`)}function Ho(e,l){if(e&1&&(s(0,"vdr-form-field",7),h(1,"ng-select",12),p()),e&2){let t=l.$implicit;o("label",t.name),a(),o("items",t.options)("formControlName",t.code)}}function Qo(e,l){e&1&&(s(0,"clr-alert",13)(1,"clr-alert-item")(2,"span",14),f(3),c(4,"translate"),p()()()),e&2&&(o("clrAlertClosable",!1),a(3),v(" ",d(4,2,"catalog.cannot-create-variants-without-options")," "))}function Yo(e,l){if(e&1&&(s(0,"div",15)(1,"clr-alert",16)(2,"clr-alert-item")(3,"span",14),f(4),c(5,"translate"),p()()()()),e&2){let t=u();a(),o("clrAlertClosable",!1),a(3),hn(" ",d(5,4,"catalog.product-variant-exists"),": ",t.existingVariant.name," (",t.existingVariant.sku,") ")}}function Ko(e,l){if(e&1){let t=D();s(0,"button",17),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",18),C("click",function(){y(t);let i=u();return x(i.confirm())}),f(4),c(5,"translate"),p()}if(e&2){let t=u();a(),T(d(2,3,"common.cancel")),a(2),o("disabled",t.form.invalid||t.existingVariant||t.product.optionGroups.length===0),a(),v(" ",d(5,5,"common.confirm")," ")}}var zo=["textArea"],Zo=["editNameInput"];function Jo(e,l){if(e&1){let t=D();s(0,"vdr-chip",7),C("iconClick",function(){let i=y(t).$implicit,r=u(2);return x(r.removeOption(i))}),s(1,"span",8)(2,"input",9,1),C("blur",function(i){let r=y(t).index,m=u(2);return x(m.updateOption(r,i))})("click",function(i){return y(t),x(i.cancelBubble=!0)}),p()(),s(4,"span",10),C("click",function(i){let r=y(t).index,m=u(2);return x(m.editName(r,i))}),f(5),p()()}if(e&2){let t=l.$implicit,n=l.last,i=l.index,r=u(2);A("selected",n&&r.lastSelected)("locked",t.locked),o("icon",t.locked?"lock":"times")("colorFrom",r.groupName),a(),o("hidden",r.editingIndex!==i),a(),o("ngModel",t.name),a(2),A("editable",!t.locked&&!t.id),o("hidden",r.editingIndex===i),a(),T(t.name)}}function Xo(e,l){if(e&1&&(s(0,"div",5),_(1,Jo,6,12,"vdr-chip",6),p()),e&2){let t=u();a(),o("ngForOf",t.optionValues)}}function er(e,l){if(e&1){let t=D();s(0,"div",19)(1,"vdr-form-field",20),c(2,"translate"),s(3,"input",21),be("ngModelChange",function(i){let r=y(t).$implicit;return Ce(r.name,i)||(r.name=i),x(i)}),p()(),s(4,"vdr-form-field",22),c(5,"translate"),s(6,"vdr-option-value-input",23,0),C("add",function(i){let r=y(t).index,m=u();return x(m.addOption(r,i.name))})("remove",function(i){let r=y(t).index,m=u();return x(m.removeOption(r,i))}),p()(),s(8,"div")(9,"button",24),C("click",function(){let i=y(t).$implicit,r=u();return x(r.removeOptionGroup(i))}),h(10,"clr-icon",25),p()()()}if(e&2){let t=l.$implicit;a(),o("label",d(2,7,"catalog.option")),a(2),ve("ngModel",t.name),o("readonly",!t.isNew),a(),o("label",d(5,9,"catalog.option-values")),a(2),o("options",t.values)("groupName",t.name)("disabled",t.name==="")}}function tr(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function ir(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.createdAt,"short")," ")}}function nr(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.updatedAt,"short")," ")}}function ar(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.name," ")}}function or(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.sku," ")}}function rr(e,l){if(e&1&&(s(0,"vdr-chip",28),f(1),p()),e&2){let t=l.ngIf,n=u(2).$implicit;o("colorFrom",n.code),a(),T(t.name)}}function lr(e,l){if(e&1){let t=D();s(0,"div",29)(1,"ng-select",30),C("change",function(i){y(t);let r=u().item,m=u().$implicit,g=u();return x(g.setOptionToAddToVariant(r.id,m.id,i==null?null:i.id))}),p(),s(2,"button",31),C("click",function(){y(t);let i=u().item,r=u(2);return x(r.addOptionToVariant(i))}),h(3,"clr-icon",32),p()()}if(e&2){let t=u().item,n=u().$implicit,i=u();a(),o("items",n.options),a(),A("primary",!!(i.optionsToAddToVariant[t.id]!=null&&i.optionsToAddToVariant[t.id][n.id])),o("disabled",!(i.optionsToAddToVariant[t.id]!=null&&i.optionsToAddToVariant[t.id][n.id]))}}function cr(e,l){if(e&1&&_(0,rr,2,2,"vdr-chip",27)(1,lr,4,4,"ng-template",null,1,H),e&2){let t=l.item,n=W(2),i=u().$implicit,r=u();o("ngIf",r.getOption(t,i.id))("ngIfElse",n)}}function sr(e,l){if(e&1&&(s(0,"vdr-dt2-column",26),_(1,cr,3,2,"ng-template"),p()),e&2){let t=l.$implicit;o("heading",t.name)("id",t.code)}}function pr(e,l){if(e&1&&(f(0),c(1,"localeCurrency")),e&2){let t=l.item;v(" ",O(1,1,t.price,t.currencyCode)," ")}}function dr(e,l){if(e&1&&(f(0),c(1,"localeCurrency")),e&2){let t=l.item;v(" ",O(1,1,t.priceWithTax,t.currencyCode)," ")}}function mr(e,l){if(e&1){let t=D();s(0,"button",33),C("click",function(){let i=y(t).item,r=u();return x(r.deleteVariant(i))}),h(1,"clr-icon",34),p()}}function ur(e,l){e&1&&(f(0),c(1,"translate")),e&2&&T(d(1,1,"catalog.add-facets"))}function _r(e,l){if(e&1){let t=D();s(0,"button",3),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",4),C("click",function(){y(t);let i=u();return x(i.selectValues())}),f(4),c(5,"translate"),p()}if(e&2){let t=u();a(),T(d(2,3,"common.cancel")),a(2),o("disabled",t.selectedValues.length===0),a(),v(" ",d(5,5,"catalog.add-facets")," ")}}var gr=()=>["UpdateCatalog","UpdateAsset"];function fr(e,l){if(e&1){let t=D();s(0,"button",3),C("click",function(){y(t);let i=u();return x(i.save())}),f(1),c(2,"translate"),p()}if(e&2){let t=u();o("disabled",t.detailForm.invalid||t.detailForm.pristine),a(),v(" ",d(2,2,"common.update")," ")}}var hr=()=>({}),vr=()=>["DeleteCatalog","DeleteAsset"],mo=e=>({channel:e}),Cr=e=>({channelCode:e});function br(e,l){e&1&&(N(0),f(1),c(2,"translate"),L()),e&2&&(a(),T(d(2,1,"catalog.assign-variants-to-channel")))}function yr(e,l){e&1&&(f(0),c(1,"translate")),e&2&&T(d(1,1,"catalog.assign-products-to-channel"))}function xr(e,l){if(e&1&&_(0,br,3,3,"ng-container",14)(1,yr,2,3,"ng-template",null,1,H),e&2){let t=W(2),n=u();o("ngIf",n.isProductVariantMode)("ngIfElse",t)}}function Ir(e,l){if(e&1&&(f(0),c(1,"translate")),e&2){let t=u();v(" ",O(1,1,"catalog.price-in-channel",G(4,mo,t.selectedChannel==null?null:t.selectedChannel.code))," ")}}function Pr(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.no-channel-selected")," ")}function Tr(e,l){if(e&1&&(f(0),c(1,"localeCurrency")),e&2){let t=u().$implicit,n=u();v(" ",O(1,1,t.pricePreview,n.selectedChannel==null?null:n.selectedChannel.defaultCurrencyCode)," ")}}function Dr(e,l){e&1&&f(0," - ")}function Fr(e,l){if(e&1&&(s(0,"tr")(1,"td"),f(2),p(),s(3,"td"),f(4),c(5,"localeCurrency"),p(),s(6,"td"),_(7,Tr,2,4,"ng-template",11)(8,Dr,1,0,"ng-template",null,2,H),p()()),e&2){let t=l.$implicit,n=W(9),i=u();a(2),T(t.name),a(2),T(O(5,4,t.price,i.currentChannel==null?null:i.currentChannel.defaultCurrencyCode)),a(3),o("ngIf",i.selectedChannel)("ngIfElse",n)}}function Sr(e,l){if(e&1&&(f(0),c(1,"translate")),e&2){let t=u(2);v(" ",O(1,1,"catalog.assign-to-named-channel",G(4,Cr,t.selectedChannel==null?null:t.selectedChannel.code))," ")}}function Er(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.no-channel-selected")," ")}function Or(e,l){if(e&1){let t=D();s(0,"button",15),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",16),C("click",function(){y(t);let i=u();return x(i.assign())}),_(4,Sr,2,6,"ng-template",11)(5,Er,2,3,"ng-template",null,0,H),p()}if(e&2){let t=W(6),n=u();a(),T(d(2,4,"common.cancel")),a(2),o("disabled",!n.selectedChannel),a(),o("ngIf",n.selectedChannel)("ngIfElse",t)}}function Vr(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.edit-facet-values"),`
`)}function kr(e,l){if(e&1&&(s(0,"div",14),f(1),p()),e&2){let t=u().$implicit;a(),T(t.sku)}}function wr(e,l){if(e&1){let t=D();s(0,"vdr-facet-value-chip",15),C("remove",function(){let i=y(t).$implicit,r=u().$implicit,m=u(2);return x(m.removeFacetValue(r,i.id))}),p()}if(e&2){let t=l.$implicit;o("facetValue",t)}}function Rr(e,l){if(e&1&&(s(0,"tr")(1,"td",10)(2,"div"),f(3),p(),_(4,kr,2,1,"div",11),p(),s(5,"td",12),_(6,wr,1,1,"vdr-facet-value-chip",13),p()()),e&2){let t=l.$implicit;a(3),T(t.name),a(),o("ngIf",t.sku),a(2),o("ngForOf",t.facetValues)}}function Br(e,l){if(e&1&&(s(0,"table",8)(1,"tbody"),_(2,Rr,7,3,"tr",9),p()()),e&2){let t=u();a(2),o("ngForOf",t.items)}}function Ar(e,l){e&1&&(s(0,"div",16),h(1,"clr-spinner"),p())}function Mr(e,l){if(e&1){let t=D();s(0,"button",17),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",18),C("click",function(){y(t);let i=u();return x(i.addFacetValues())}),f(4),c(5,"translate"),p()}if(e&2){let t=u();a(),T(d(2,3,"common.cancel")),a(2),o("disabled",t.selectedValues.length===0&&t.facetValuesRemoved===!1),a(),v(" ",d(5,5,"common.update")," ")}}var Nr=e=>({$implicit:e}),Lr=e=>["/catalog/products",e];function $r(e,l){e&1&&et(0)}function Ur(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function Gr(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.createdAt,"short")," ")}}function jr(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.updatedAt,"short")," ")}}function Wr(e,l){if(e&1&&(s(0,"a",11)(1,"span"),f(2),p(),h(3,"clr-icon",12),p()),e&2){let t=l.item;o("routerLink",G(2,Lr,t.productId)),a(2),T(t.name)}}function qr(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.sku," ")}}var Hr=["collectionRow"],Qr=[[["vdr-bulk-action-menu"]]],Yr=["vdr-bulk-action-menu"],Kr=(e,l,t,n)=>({itemsPerPage:e,currentPage:l,totalItems:t,id:n}),zr=(e,l)=>({item:e,i:l,depth:0}),Zr=(e,l,t)=>({currentStart:e,currentEnd:l,totalItems:t}),Jr=(e,l)=>({depth:e,collection:l}),Xr=e=>({rowItem:e}),uo=(e,l)=>({item:e,depth:l});function el(e,l){if(e&1&&h(0,"vdr-data-table-filter-presets",19),e&2){let t=u();o("filters",t.filters)("dataTableId",t.id)}}function tl(e,l){if(e&1){let t=D();s(0,"th",20)(1,"div",21),h(2,"div",22),s(3,"input",23),C("change",function(){y(t);let i=u();return x(i.onToggleAllClick())}),p()()()}if(e&2){let t=u();a(3),o("checked",t.selectionManager==null?null:t.selectionManager.areAllCurrentItemsSelected())}}function il(e,l){e&1&&h(0,"clr-icon",33)}function nl(e,l){e&1&&h(0,"clr-icon",34)}function al(e,l){e&1&&h(0,"clr-icon",35)}function ol(e,l){if(e&1&&(s(0,"div",36),f(1),p()),e&2){let t=u().ngIf;a(),T(t.sortOrder)}}function rl(e,l){if(e&1){let t=D();s(0,"div",27)(1,"button",28),C("click",function(){let i=y(t).ngIf;return x(i.toggleSortOrder())}),_(2,il,1,0,"clr-icon",29)(3,nl,1,0,"clr-icon",30)(4,al,1,0,"clr-icon",31),p(),_(5,ol,2,1,"div",32),p()}if(e&2){let t=l.ngIf;a(),A("active",t.sortOrder),a(),o("ngIf",!t.sortOrder),a(),o("ngIf",t.sortOrder==="ASC"),a(),o("ngIf",t.sortOrder==="DESC"),a(),o("ngIf",t.sortOrder)}}function ll(e,l){if(e&1&&(s(0,"th")(1,"div",24)(2,"vdr-ui-extension-point",25)(3,"span"),f(4),p()(),_(5,rl,6,6,"div",26),p()()),e&2){let t=l.$implicit,n=u();A("expand",t.expand),a(),o("ngClass",t.align),a(),o("locationId",n.id)("metadata",t.id)("topPx",-6)("leftPx",-24),a(2),T(t.heading),a(),o("ngIf",t.sort)}}function cl(e,l){e&1&&et(0)}function sl(e,l){e&1&&et(0)}function pl(e,l){if(e&1&&h(0,"vdr-data-table-filters",45),e&2){let t=l.$implicit,n=u(3);o("filterWithValue",t)("filters",n.filters)}}function dl(e,l){if(e&1&&h(0,"vdr-data-table-filters",46),e&2){let t=u(3);o("filters",t.filters)}}function ml(e,l){if(e&1&&(N(0),s(1,"div",42),_(2,pl,1,2,"vdr-data-table-filters",43)(3,dl,1,1,"vdr-data-table-filters",44),h(4,"vdr-add-filter-preset-button",19),p(),L()),e&2){let t=u(2);a(2),o("ngForOf",t.filters.activeFilters),a(),o("ngIf",t.filters.length),a(),o("filters",t.filters)("dataTableId",t.id)}}function ul(e,l){if(e&1){let t=D();s(0,"tr")(1,"th",37)(2,"button",38),c(3,"translate"),C("click",function(){y(t);let i=u();return x(i.toggleSearchFilterRow())}),h(4,"clr-icon",39),p(),s(5,"div",40),_(6,cl,1,0,"ng-container",41)(7,sl,1,0,"ng-container",41)(8,ml,5,4,"ng-container",12),p()()()}if(e&2){let t=u();a(),A("active",t.showSearchFilterRow),Ti("colspan",t.visibleSortedColumns.length+(t.selectionManager?2:1)),a(),A("active",t.showSearchFilterRow),o("title",d(3,11,"common.search-and-filter-list")),a(3),A("hidden",!t.showSearchFilterRow),a(),o("ngTemplateOutlet",t.searchComponent==null?null:t.searchComponent.template),a(),o("ngTemplateOutlet",t.customSearchTemplate),a(),o("ngIf",t.filters)}}function _l(e,l){if(e&1&&(N(0),et(1,47),L()),e&2){let t=l.$implicit,n=l.index;u();let i=W(24);a(),o("ngTemplateOutlet",i)("ngTemplateOutletContext",st(2,zr,t,n))}}function gl(e,l){if(e&1&&(s(0,"tr")(1,"td"),h(2,"vdr-empty-placeholder",48),p()()),e&2){let t=u();a(),Ti("colspan",t.visibleSortedColumns.length+(t.selectionManager?2:1)),a(),o("emptyStateLabel",t.emptyStateLabel)}}function fl(e,l){if(e&1){let t=D();s(0,"vdr-items-per-page-controls",49),C("itemsPerPageChange",function(i){y(t);let r=u();return x(r.itemsPerPageChange.emit(i))}),p()}if(e&2){let t=u();o("itemsPerPage",t.itemsPerPage)}}function hl(e,l){if(e&1&&(s(0,"div",50),f(1),c(2,"translate"),p()),e&2){let t=u();a(),v(" ",O(2,1,"common.total-items",Fi(4,Zr,t.currentStart,t.currentEnd,t.totalItems))," ")}}function vl(e,l){if(e&1){let t=D();s(0,"vdr-pagination-controls",51),C("pageChange",function(i){y(t);let r=u();return x(r.pageChange.emit(i))}),p()}if(e&2){let t=u();o("id",t.id)("currentPage",t.currentPage)("itemsPerPage",t.itemsPerPage)("totalItems",t.totalItems)}}function Cl(e,l){if(e&1){let t=D();s(0,"td",20)(1,"div",21)(2,"div",56),c(3,"translate"),h(4,"clr-icon",57),p(),s(5,"input",58),C("click",function(i){y(t);let r=u().item,m=u();return x(m.onRowClick(r,i))}),p()()()}if(e&2){let t=u().item,n=u();A("active",n.activeIndex===n.absoluteIndex[t.id]),a(2),o("title",d(3,4,"catalog.reorder-collection")),a(3),o("checked",n.selectionManager==null?null:n.selectionManager.isSelected(t))}}function bl(e,l){e&1&&et(0)}function yl(e,l){if(e&1&&(N(0),_(1,bl,1,0,"ng-container",60),L()),e&2){let t=l.ngIf,n=u(2).item;a(),o("ngComponentOutlet",t.config.component)("ngComponentOutletInputs",G(3,Xr,n))("ngComponentOutletInjector",t.injector)}}function xl(e,l){e&1&&et(0)}function Il(e,l){if(e&1&&_(0,xl,1,0,"ng-container",61),e&2){let t=u().$implicit,n=u(),i=n.item,r=n.depth;o("ngTemplateOutlet",t.template)("ngTemplateOutletContext",st(2,uo,i,r))}}function Pl(e,l){if(e&1&&(s(0,"td")(1,"div",24),_(2,yl,2,5,"ng-container",59)(3,Il,1,5,"ng-template",null,2,H),p()()),e&2){let t=l.$implicit,n=W(4),i=u().item,r=u();A("active",r.activeIndex===r.absoluteIndex[i.id]),a(),o("ngClass",t.align),a(),o("ngIf",r.customComponents.get(t.id))("ngIfElse",n)}}function Tl(e,l){e&1&&et(0)}function Dl(e,l){if(e&1&&(N(0),_(1,Tl,1,0,"ng-container",61),L()),e&2){let t=l.$implicit,n=u().depth;u();let i=W(24);a(),o("ngTemplateOutlet",i)("ngTemplateOutletContext",st(2,uo,t,n+1))}}function Fl(e,l){if(e&1&&(s(0,"tr",52,1),_(2,Cl,6,6,"td",53)(3,Pl,5,5,"td",54),h(4,"td"),p(),_(5,Dl,2,5,"ng-container",55)),e&2){let t=l.item,n=l.depth,i=u();o("cdkDragData",st(6,Jr,n,t)),a(2),o("ngIf",i.selectionManager),a(),o("ngForOf",i.visibleSortedColumns),a(),A("active",i.activeIndex===i.absoluteIndex[t.id]),a(),o("ngForOf",i.getSubcollections(t))}}var Sl=["collectionContents"],en=e=>({pattern:e}),El=()=>["/catalog/collections"],Ol=e=>["/catalog/collections",e],_o=e=>({count:e}),Vl=()=>({standalone:!0});function kl(e,l){if(e&1){let t=D();s(0,"button",31),C("click",function(){y(t);let i=u();return x(i.create())}),f(1),c(2,"translate"),p()}if(e&2){let t=u();o("disabled",t.detailForm.invalid||t.detailForm.pristine),a(),v(" ",d(2,2,"common.create")," ")}}function wl(e,l){if(e&1){let t=D();s(0,"button",31),C("click",function(){y(t);let i=u(2);return x(i.save())}),f(1),c(2,"translate"),p()}if(e&2){let t=u(2);o("disabled",(t.detailForm.invalid||t.detailForm.pristine)&&!t.assetsChanged()),a(),v(" ",d(2,2,"common.update")," ")}}function Rl(e,l){if(e&1&&_(0,wl,3,4,"button",32),e&2){let t=u();o("vdrIfPermissions",t.updatePermission)}}function Bl(e,l){e&1&&(N(0),f(1),c(2,"translate"),L()),e&2&&(a(),T(d(2,1,"catalog.public")))}function Al(e,l){e&1&&(f(0),c(1,"translate")),e&2&&T(d(1,1,"catalog.private"))}function Ml(e,l){if(e&1&&(s(0,"vdr-card"),h(1,"vdr-page-entity-info",33),p()),e&2){let t=l.ngIf;a(),o("entity",t)}}function Nl(e,l){e&1&&(s(0,"a",38),f(1),c(2,"translate"),p()),e&2&&(o("routerLink",U(4,El)),a(),T(d(2,2,"catalog.root-collection")))}function Ll(e,l){if(e&1&&(s(0,"a",38),f(1),c(2,"translate"),p()),e&2){let t=u().$implicit;o("routerLink",G(4,Ol,t.id)),a(),T(d(2,2,t.name))}}function $l(e,l){if(e&1&&(N(0),f(1),c(2,"translate"),L()),e&2){let t=u().$implicit;a(),T(d(2,1,t.name))}}function Ul(e,l){if(e&1&&(s(0,"li"),_(1,Nl,3,5,"a",37)(2,Ll,3,6,"a",37)(3,$l,3,3,"ng-container",12),p()),e&2){let t=l.first,n=l.last;a(),o("ngIf",t),a(),o("ngIf",!t&&!n),a(),o("ngIf",n)}}function Gl(e,l){if(e&1&&(s(0,"vdr-page-block")(1,"nav",34)(2,"ul",35),_(3,Ul,4,3,"li",36),p()()()),e&2){let t=l.ngIf;a(3),o("ngForOf",t.breadcrumbs)}}function jl(e,l){if(e&1&&(s(0,"vdr-card",39),c(1,"translate"),h(2,"vdr-tabbed-custom-fields",40),c(3,"hasPermission"),p()),e&2){let t=u();o("title",d(1,4,"common.custom-fields")),a(2),o("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))("readonly",!d(3,6,t.updatePermission))}}function Wl(e,l){e&1&&(N(0),f(1),c(2,"translate"),L()),e&2&&(a(),T(d(2,1,"catalog.inherit-filters-from-parent")))}function ql(e,l){e&1&&(f(0),c(1,"translate")),e&2&&T(d(1,1,"catalog.do-not-inherit-filters"))}function Hl(e,l){if(e&1){let t=D();N(0),s(1,"vdr-configurable-input",41),c(2,"hasPermission"),C("remove",function(){let i=y(t).index,r=u();return x(r.removeFilter(i))}),p(),L()}if(e&2){let t=l.$implicit,n=l.index,i=u();a(),o("position",n)("operation",t)("operationDefinition",i.getFilterDefinition(t))("formControlName",n)("readonly",!d(2,5,i.updatePermission))}}function Ql(e,l){if(e&1){let t=D();s(0,"button",47),C("click",function(){let i=y(t).$implicit,r=u(2);return x(r.addFilter(i))}),f(1),p()}if(e&2){let t=l.$implicit;a(),v(" ",t.description," ")}}function Yl(e,l){if(e&1&&(s(0,"div")(1,"vdr-dropdown")(2,"button",42),h(3,"clr-icon",43),s(4,"span"),f(5),c(6,"translate"),p(),h(7,"clr-icon",44),p(),s(8,"vdr-dropdown-menu",45),_(9,Ql,2,1,"button",46),p()()()),e&2){let t=u();a(5),T(d(6,2,"marketing.add-condition")),a(4),o("ngForOf",t.allFilters)}}function Kl(e,l){if(e&1){let t=D();s(0,"div",48)(1,"div",49),f(2),c(3,"translate"),c(4,"translate"),p(),s(5,"clr-checkbox-wrapper")(6,"input",50),C("ngModelChange",function(){y(t);let i=u();return x(i.toggleLivePreview())}),p(),s(7,"label"),f(8),c(9,"translate"),p()()()}if(e&2){let t,n,i=l.$implicit,r=u();a(2),kt(" ",d(3,8,"catalog.collection-contents")," (",O(4,10,"common.results-count",G(15,_o,i)),") "),a(3),A("disabled",(t=r.detailForm.get("filters"))==null?null:t.pristine),a(),o("ngModelOptions",U(17,Vl))("disabled",(n=r.detailForm.get("filters"))==null?null:n.pristine)("ngModel",r.livePreview),a(2),T(d(9,13,"catalog.live-preview-contents"))}}var zl=e=>({name:e});function Zl(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.move-collections"),`
`)}function Jl(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function Xl(e,l){if(e&1&&h(0,"clr-icon",12),e&2){let t=u().depth;A("transparent",t===0)}}function ec(e,l){e&1&&h(0,"clr-icon",16)}function tc(e,l){e&1&&h(0,"clr-icon",17)}function ic(e,l){if(e&1){let t=D();s(0,"button",13),C("click",function(){y(t);let i=u().item,r=u();return x(r.toggleExpanded(i))}),_(1,ec,1,0,"clr-icon",14)(2,tc,1,0,"clr-icon",15),p()}if(e&2){let t=u().item,n=u();a(),o("ngIf",!n.expandedIds.includes(t.id)),a(),o("ngIf",n.expandedIds.includes(t.id))}}function nc(e,l){e&1&&(s(0,"button",18),h(1,"clr-icon",19),p())}function ac(e,l){if(e&1){let t=D();h(0,"div",7),_(1,Xl,1,2,"clr-icon",8)(2,ic,3,2,"button",9)(3,nc,2,0,"button",10),s(4,"button",11),C("click",function(){let i=y(t).item,r=u();return x(r.resolveWith(i))}),s(5,"span"),f(6),c(7,"translate"),p()()}if(e&2){let t=l.item,n=l.depth;o("ngClass","indent-"+n),a(),o("ngIf",!(t.children!=null&&t.children.length)&&t.parentId!=="__"),a(),o("ngIf",t.children==null?null:t.children.length),a(),o("ngIf",t.parentId==="__"),a(3),T(O(7,5,"catalog.move-collection-to",G(8,zl,t.name)))}}function oc(e,l){if(e&1&&(s(0,"div")(1,"span",24),f(2,"/"),p(),f(3),p()),e&2){let t=l.$implicit;a(3),v("",t.name," ")}}function rc(e,l){if(e&1&&(N(0),_(1,oc,4,1,"div",23),L()),e&2){let t=u().ngIf;a(),o("ngForOf",t)}}function lc(e,l){e&1&&(s(0,"span",24),f(1,"/"),p())}function cc(e,l){if(e&1&&(N(0),_(1,rc,2,1,"ng-container",21)(2,lc,2,0,"span",22),L()),e&2){let t=l.ngIf;a(),o("ngIf",t.length),a(),o("ngIf",!t.length)}}function sc(e,l){if(e&1&&(s(0,"div",20),_(1,cc,3,2,"ng-container",21),c(2,"collectionBreadcrumb"),p()),e&2){let t=l.item;a(),o("ngIf",d(2,1,t))}}function pc(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.slug," ")}}var go=()=>["CreateCatalog","CreateCollection"],an=()=>["./create"],ni=e=>["./",e],fo=e=>({contents:e}),dc=()=>({contentsPage:1});function mc(e,l){e&1&&(s(0,"a",6),h(1,"clr-icon",7),f(2),c(3,"translate"),p()),e&2&&(o("routerLink",U(4,an)),a(2),v(" ",d(3,2,"catalog.create-new-collection")," "))}function uc(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function _c(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.createdAt,"short")," ")}}function gc(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.updatedAt,"short")," ")}}function fc(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.position," ")}}function hc(e,l){if(e&1&&h(0,"clr-icon",26),e&2){let t=u().depth;A("transparent",t===0)}}function vc(e,l){e&1&&h(0,"clr-icon",30)}function Cc(e,l){e&1&&h(0,"clr-icon",31)}function bc(e,l){if(e&1){let t=D();s(0,"button",27),C("click",function(){y(t);let i=u().item,r=u(2);return x(r.toggleExpanded(i))}),_(1,vc,1,0,"clr-icon",28)(2,Cc,1,0,"clr-icon",29),p()}if(e&2){let t=u().item,n=u(2);a(),o("ngIf",!n.expandedIds.includes(t.id)),a(),o("ngIf",n.expandedIds.includes(t.id))}}function yc(e,l){if(e&1&&(h(0,"div",21),_(1,hc,1,2,"clr-icon",22)(2,bc,3,2,"button",23),s(3,"a",24)(4,"span"),f(5),p(),h(6,"clr-icon",25),p()),e&2){let t=l.item,n=l.depth;o("ngClass","indent-"+n),a(),o("ngIf",!(t.children!=null&&t.children.length)),a(),o("ngIf",t.children==null?null:t.children.length),a(),o("routerLink",G(5,ni,t.id)),a(2),T(t.name)}}function xc(e,l){if(e&1&&(s(0,"div")(1,"span",36),f(2,"/"),p(),f(3),p()),e&2){let t=l.$implicit;a(3),v("",t.name," ")}}function Ic(e,l){if(e&1&&(N(0),_(1,xc,4,1,"div",35),L()),e&2){let t=u().ngIf;a(),o("ngForOf",t)}}function Pc(e,l){e&1&&(s(0,"span",36),f(1,"/"),p())}function Tc(e,l){if(e&1&&(N(0),_(1,Ic,2,1,"ng-container",33)(2,Pc,2,0,"span",34),L()),e&2){let t=l.ngIf;a(),o("ngIf",t.length),a(),o("ngIf",!t.length)}}function Dc(e,l){if(e&1&&(s(0,"div",32),_(1,Tc,3,2,"ng-container",33),c(2,"collectionBreadcrumb"),p()),e&2){let t=l.item;a(),o("ngIf",d(2,1,t))}}function Fc(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.slug," ")}}function Sc(e,l){e&1&&(s(0,"vdr-chip",39),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.private")))}function Ec(e,l){e&1&&(s(0,"vdr-chip",40),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.public")))}function Oc(e,l){if(e&1&&_(0,Sc,3,3,"vdr-chip",37)(1,Ec,3,3,"vdr-chip",38),e&2){let t=l.item;o("ngIf",t.isPrivate),a(),o("ngIf",!t.isPrivate)}}function Vc(e,l){if(e&1&&(s(0,"a",41)(1,"span"),f(2),c(3,"translate"),p(),h(4,"clr-icon",42),p()),e&2){let t=l.item;o("routerLink",G(7,ni,G(5,fo,t.id)))("queryParams",U(9,dc)),a(2),T(d(3,3,"common.view-contents"))}}function kc(e,l){if(e&1&&h(0,"vdr-dt2-custom-field-column",43),e&2){let t=l.$implicit,n=u(2);o("customField",t)("sorts",n.sorts)}}function wc(e,l){if(e&1){let t=D();s(0,"vdr-collection-data-table",8),c(1,"async"),c(2,"async"),c(3,"async"),c(4,"async"),c(5,"async"),c(6,"async"),C("pageChange",function(i){y(t);let r=u();return x(r.setPageNumber(i))})("itemsPerPageChange",function(i){y(t);let r=u();return x(r.setItemsPerPage(i))})("changeOrder",function(i){y(t);let r=u();return x(r.onRearrange(i))})("visibleColumnsChange",function(i){y(t);let r=u();return x(r.setVisibleColumns(i))}),h(7,"vdr-bulk-action-menu",9)(8,"vdr-dt2-search",10),c(9,"translate"),s(10,"vdr-dt2-column",11),c(11,"translate"),_(12,uc,1,1,"ng-template"),p(),s(13,"vdr-dt2-column",12),c(14,"translate"),_(15,_c,2,4,"ng-template"),p(),s(16,"vdr-dt2-column",13),c(17,"translate"),_(18,gc,2,4,"ng-template"),p(),s(19,"vdr-dt2-column",14),c(20,"translate"),_(21,fc,1,1,"ng-template"),p(),s(22,"vdr-dt2-column",15),c(23,"translate"),_(24,yc,7,7,"ng-template"),p(),s(25,"vdr-dt2-column",16),c(26,"translate"),_(27,Dc,3,3,"ng-template"),p(),s(28,"vdr-dt2-column",17),c(29,"translate"),_(30,Fc,1,1,"ng-template"),p(),s(31,"vdr-dt2-column",18),c(32,"translate"),_(33,Oc,2,2,"ng-template"),p(),s(34,"vdr-dt2-column",19),c(35,"translate"),_(36,Vc,5,10,"ng-template"),p(),_(37,kc,1,2,"vdr-dt2-custom-field-column",20),p()}if(e&2){let t=u();o("id",t.dataTableListId)("items",d(1,33,t.items$))("subCollections",d(2,35,t.subCollections$))("itemsPerPage",d(3,37,t.itemsPerPage$))("totalItems",d(4,39,t.totalItems$))("currentPage",d(5,41,t.currentPage$))("filters",t.filters)("activeIndex",d(6,43,t.activeCollectionIndex$)),a(7),o("hostComponent",t)("selectionManager",t.selectionManager),a(),o("searchTermControl",t.searchTermControl)("searchTermPlaceholder",d(9,45,"common.search-by-name")),a(2),o("heading",d(11,47,"common.id"))("hiddenByDefault",!0),a(3),o("heading",d(14,49,"common.created-at"))("hiddenByDefault",!0)("sort",t.sorts.get("createdAt")),a(3),o("heading",d(17,51,"common.updated-at"))("hiddenByDefault",!0)("sort",t.sorts.get("updatedAt")),a(3),o("heading",d(20,53,"common.position"))("hiddenByDefault",!0)("sort",t.sorts.get("position")),a(3),o("heading",d(23,55,"common.name"))("optional",!1)("sort",t.sorts.get("name")),a(3),o("heading",d(26,57,"common.breadcrumb")),a(3),o("heading",d(29,59,"common.slug"))("sort",t.sorts.get("slug")),a(3),o("heading",d(32,61,"common.visibility")),a(3),o("heading",d(35,63,"common.view-contents"))("optional",!1),a(3),o("ngForOf",t.customFields)}}function Rc(e,l){if(e&1&&(N(0),h(1,"vdr-collection-contents",44),c(2,"async"),L()),e&2){let t=u(2);a(),o("collectionId",d(2,1,t.activeCollectionId$))}}function Bc(e,l){if(e&1&&(_(0,Rc,3,3,"ng-container",33),c(1,"async")),e&2){let t=u();o("ngIf",d(1,1,t.activeCollectionId$))}}var Ac="[_nghost-%COMP%]{--indent-spacing: 18px}.indent-1[_ngcontent-%COMP%]{padding-inline-start:var(--indent-spacing)}.indent-2[_ngcontent-%COMP%]{padding-inline-start:calc(var(--indent-spacing) * 2)}.indent-3[_ngcontent-%COMP%]{padding-inline-start:calc(var(--indent-spacing) * 3)}.indent-4[_ngcontent-%COMP%], .indent-5[_ngcontent-%COMP%], .indent-6[_ngcontent-%COMP%], .indent-7[_ngcontent-%COMP%], .indent-8[_ngcontent-%COMP%], .indent-9[_ngcontent-%COMP%]{padding-inline-start:calc(var(--indent-spacing) * 4)}.child-arrow[_ngcontent-%COMP%]{margin:1px 6px}.child-arrow.transparent[_ngcontent-%COMP%]{opacity:0}.breadcrumb[_ngcontent-%COMP%]{display:flex}.separator[_ngcontent-%COMP%]{color:var(--color-weight-500);margin:0 3px}",Mc=e=>["/catalog/collections/",e],Nc=()=>["UpdateCatalog","UpdateCollection"],Lc=e=>({parentId:e}),$c=e=>["./","create",e];function Uc(e,l){e&1&&h(0,"clr-icon",32)}function Gc(e,l){e&1&&h(0,"clr-icon",33)}function jc(e,l){if(e&1){let t=D();s(0,"button",29),C("click",function(){y(t);let i=u().$implicit,r=u();return x(r.toggleExpanded(i))}),_(1,Uc,1,0,"clr-icon",30)(2,Gc,1,0,"clr-icon",31),p()}if(e&2){let t=u().$implicit,n=u();o("disabled",n.expandAll),a(),o("ngIf",!t.expanded&&!n.expandAll),a(),o("ngIf",t.expanded||n.expandAll)}}function Wc(e,l){e&1&&h(0,"div",34)}function qc(e,l){e&1&&(s(0,"vdr-chip"),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"catalog.private")))}function Hc(e,l){e&1&&(s(0,"div",35),h(1,"clr-icon",36),p())}function Qc(e,l){if(e&1&&(s(0,"a",37),h(1,"clr-icon",38),f(2),c(3,"translate"),p()),e&2){let t=u().$implicit;o("routerLink",G(6,$c,G(4,Lc,t.id))),a(2),v(" ",d(3,2,"catalog.create-new-collection")," ")}}function Yc(e,l){if(e&1){let t=D();s(0,"button",21),c(1,"async"),C("click",function(){let i=y(t).$implicit,r=u().$implicit,m=u();return x(m.move(r,i.id))}),s(2,"div",39)(3,"div",40),h(4,"clr-icon",41),p(),s(5,"div",42),f(6),p()()()}if(e&2){let t=l.$implicit,n=u(2);o("disabled",!d(1,2,n.hasUpdatePermission$)),a(6),v(" ",t.path," ")}}function Kc(e,l){if(e&1&&h(0,"vdr-collection-tree-node",43),e&2){let t=u().$implicit,n=u();o("expandAll",n.expandAll)("collectionTree",t)("activeCollectionId",n.activeCollectionId)("selectionManager",n.selectionManager)}}function zc(e,l){if(e&1){let t=D();s(0,"div",4)(1,"div",5)(2,"div")(3,"input",6),C("click",function(i){let r=y(t).$implicit,m=u();return x(m.selectionManager.toggleSelection(r,i))}),p()(),s(4,"div",7),_(5,jc,3,3,"button",8)(6,Wc,1,0,"ng-template",null,1,H),f(8),p(),h(9,"div",9),_(10,qc,3,3,"vdr-chip",10),s(11,"a",11),h(12,"clr-icon",12),f(13),c(14,"translate"),p(),s(15,"a",13),h(16,"clr-icon",14),f(17),c(18,"translate"),p(),_(19,Hc,2,0,"div",15),s(20,"vdr-dropdown")(21,"button",16),C("click",function(){let i=y(t).$implicit,r=u();return x(r.getMoveListItems(i))}),h(22,"clr-icon",17),p(),s(23,"vdr-dropdown-menu",18),_(24,Qc,4,8,"a",19),h(25,"div",20),s(26,"button",21),c(27,"async"),C("click",function(){let i=y(t),r=i.$implicit,m=i.index,g=u();return x(g.moveUp(r,m))}),h(28,"clr-icon",22),f(29),c(30,"translate"),p(),s(31,"button",21),c(32,"async"),C("click",function(){let i=y(t),r=i.$implicit,m=i.index,g=u();return x(g.moveDown(r,m))}),h(33,"clr-icon",23),f(34),c(35,"translate"),p(),s(36,"h4",24),f(37),c(38,"translate"),p(),_(39,Yc,7,4,"button",25),h(40,"div",20),s(41,"button",26),c(42,"async"),C("click",function(){let i=y(t).$implicit,r=u();return x(r.delete(i.id))}),h(43,"clr-icon",27),f(44),c(45,"translate"),p()()()(),_(46,Kc,1,4,"vdr-collection-tree-node",28),p()}if(e&2){let t=l.$implicit,n=l.index,i=W(7),r=u();A("private",t.isPrivate),o("cdkDragData",t),a(),A("active",t.id===r.activeCollectionId),o("ngClass","depth-"+r.depth),a(2),o("checked",r.selectionManager.isSelected(t)),a(2),o("ngIf",t.children==null?null:t.children.length)("ngIfElse",i),a(3),v(" ",t.name," "),a(2),o("ngIf",t.isPrivate),a(),o("routerLink",G(46,ni,G(44,fo,t.id))),a(2),v(" ",d(14,26,"catalog.view-contents")," "),a(2),o("routerLink",G(48,Mc,t.id)),a(2),v(" ",d(18,28,"common.edit")," "),a(2),o("vdrIfPermissions",U(50,Nc)),a(5),o("vdrIfPermissions",U(51,go)),a(2),o("disabled",n===0||!d(27,30,r.hasUpdatePermission$)),a(3),v(" ",d(30,32,"catalog.move-up")," "),a(2),o("disabled",n===r.collectionTree.children.length-1||!d(32,34,r.hasUpdatePermission$)),a(3),v(" ",d(35,36,"catalog.move-down")," "),a(3),T(d(38,38,"catalog.move-to")),a(2),o("ngForOf",r.moveListItems),a(2),o("disabled",!d(42,40,r.hasDeletePermission$)),a(3),v(" ",d(45,42,"common.delete")," "),a(2),o("ngIf",t.expanded||r.expandAll)}}function Zc(e,l){if(e&1&&h(0,"vdr-collection-tree-node",1),e&2){let t=u();o("expandAll",t.expandAll)("collectionTree",t.collectionTree)("selectionManager",t.selectionManager)("activeCollectionId",t.activeCollectionId)}}function Jc(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.confirm-deletion-of-unused-variants-title"),`
`)}function Xc(e,l){if(e&1&&(s(0,"li"),f(1),p()),e&2){let t=l.$implicit;a(),kt("",t.name," (",t.sku,")")}}function es(e,l){if(e&1){let t=D();s(0,"button",3),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",4),C("click",function(){y(t);let i=u();return x(i.confirm())}),f(4),c(5,"translate"),p()}e&2&&(a(),T(d(2,2,"common.cancel")),a(3),v(" ",d(5,4,"common.confirm")," "))}function ts(e,l){e&1&&(f(0),c(1,"translate")),e&2&&v(" ",d(1,1,"catalog.create-facet-value"),`
`)}function is(e,l){if(e&1){let t=D();s(0,"button",7),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",8),C("click",function(){y(t);let i=u();return x(i.confirm())}),f(4),c(5,"translate"),p()}if(e&2){let t=u();a(),T(d(2,3,"common.cancel")),a(2),o("disabled",t.form.invalid),a(),v(" ",d(5,5,"common.confirm")," ")}}var ho=()=>["CreateCatalog","CreateFacet"],ns=(e,l,t)=>({currentPage:e,itemsPerPage:l,totalItems:t}),as=e=>["values",e],os=e=>["values",e,"customFields"];function rs(e,l){if(e&1){let t=D();s(0,"button",20),C("click",function(){y(t);let i=u();return x(i.create())}),f(1),c(2,"translate"),p()}if(e&2){let t=u();o("disabled",t.detailForm.invalid||t.detailForm.pristine),a(),v(" ",d(2,2,"common.create")," ")}}function ls(e,l){if(e&1){let t=D();s(0,"button",20),C("click",function(){y(t);let i=u(2);return x(i.save())}),f(1),c(2,"translate"),p()}if(e&2){let t=u(2);o("disabled",t.detailForm.invalid||t.detailForm.pristine),a(),v(" ",d(2,2,"common.update")," ")}}function cs(e,l){if(e&1&&_(0,ls,3,4,"button",21),e&2){let t=u();o("vdrIfPermissions",t.updatePermission)}}function ss(e,l){e&1&&(N(0),f(1),c(2,"translate"),L()),e&2&&(a(),T(d(2,1,"catalog.public")))}function ps(e,l){e&1&&(f(0),c(1,"translate")),e&2&&T(d(1,1,"catalog.private"))}function ds(e,l){if(e&1&&h(0,"vdr-page-entity-info",22),e&2){let t=l.ngIf;o("entity",t)}}function ms(e,l){if(e&1&&(s(0,"vdr-card",23),c(1,"translate"),h(2,"vdr-tabbed-custom-fields",24),c(3,"hasPermission"),p()),e&2){let t=u();o("title",d(1,4,"common.custom-fields")),a(2),o("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("facet.customFields"))("readonly",!d(3,6,t.updatePermission))}}function us(e,l){if(e&1&&(h(0,"input",29),c(1,"translate")),e&2){let t=u(2);o("formControl",t.filterControl)("placeholder",d(1,2,"catalog.filter-by-name"))}}function _s(e,l){e&1&&(N(0),s(1,"th"),f(2),c(3,"translate"),p(),L()),e&2&&(a(2),T(d(3,1,"common.custom-fields")))}function gs(e,l){if(e&1&&(s(0,"td",45),h(1,"vdr-tabbed-custom-fields",46),c(2,"hasPermission"),p()),e&2){let t=u().$implicit,n=u(3);a(),o("customFields",n.customValueFields)("compact",!0)("customFieldsFormGroup",n.detailForm.get(G(6,os,t.id)))("readonly",!d(2,4,n.updatePermission))}}function fs(e,l){if(e&1){let t=D();s(0,"tr",35)(1,"td",36),h(2,"vdr-entity-info",22),p(),s(3,"td",36)(4,"input",37),c(5,"hasPermission"),C("input",function(i){let r=y(t).$implicit,m=u(3);return x(m.updateValueCode(r.code,i.target.value,r.id))}),p()(),s(6,"td",36),h(7,"input",38),p(),_(8,gs,3,8,"td",39),s(9,"td",36)(10,"vdr-dropdown")(11,"button",40),h(12,"clr-icon",41),p(),s(13,"vdr-dropdown-menu",42)(14,"button",43),c(15,"hasPermission"),C("click",function(){let i=y(t).$implicit,r=u(3);return x(r.deleteFacetValue(i.id))}),h(16,"clr-icon",44),f(17),c(18,"translate"),p()()()()()}if(e&2){let t=l.$implicit,n=u(3);o("formGroup",n.detailForm.get(G(12,as,t.id))),a(2),o("entity",t),a(2),o("readonly",!d(5,6,n.updatePermission)),a(4),o("ngIf",n.customValueFields.length),a(6),o("disabled",!d(15,8,n.updatePermission)),a(3),v(" ",d(18,10,"common.delete")," ")}}function hs(e,l){if(e&1){let t=D();N(0),s(1,"table",30)(2,"thead")(3,"tr"),h(4,"th"),s(5,"th"),f(6),c(7,"translate"),p(),s(8,"th"),f(9),c(10,"translate"),p(),_(11,_s,4,3,"ng-container",27),h(12,"th"),p()(),s(13,"tbody"),_(14,fs,19,14,"tr",31),c(15,"paginate"),p()(),s(16,"div",32)(17,"vdr-items-per-page-controls",33),C("itemsPerPageChange",function(i){y(t);let r=u(2);return x(r.setItemsPerPage(i))}),p(),s(18,"vdr-pagination-controls",34),C("pageChange",function(i){y(t);let r=u(2);return x(r.setCurrentPage(i))}),p()(),L()}if(e&2){let t=l.ngIf,n=u(2);a(6),T(d(7,8,"common.name")),a(3),T(d(10,10,"common.code")),a(2),o("ngIf",n.customValueFields.length),a(3),o("ngForOf",O(15,12,t,Fi(15,ns,n.currentPage,n.itemsPerPage,n.totalItems))),a(3),o("itemsPerPage",n.itemsPerPage),a(),o("currentPage",n.currentPage)("itemsPerPage",n.itemsPerPage)("totalItems",n.totalItems)}}function vs(e,l){if(e&1){let t=D();s(0,"button",47),C("click",function(){y(t);let i=u(2);return x(i.addFacetValue())}),h(1,"clr-icon",48),f(2),c(3,"translate"),p()}e&2&&(a(2),v(" ",d(3,1,"catalog.add-facet-value")," "))}function Cs(e,l){if(e&1&&(s(0,"vdr-card",25),c(1,"translate"),_(2,us,2,4,"ng-template",26)(3,hs,19,19,"ng-container",27),c(4,"async"),s(5,"div"),_(6,vs,4,3,"button",28),p()()),e&2){let t=u();o("title",d(1,4,"catalog.facet-values"))("paddingX",!1),a(3),o("ngIf",d(4,6,t.values$)),a(3),o("vdrIfPermissions",U(8,ho))}}function bs(e,l){e&1&&(s(0,"a",15),h(1,"clr-icon",16),f(2),c(3,"translate"),p()),e&2&&(o("routerLink",U(4,an)),a(2),v(" ",d(3,2,"catalog.create-new-facet")," "))}function ys(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function xs(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.createdAt,"short")," ")}}function Is(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.updatedAt,"short")," ")}}function Ps(e,l){if(e&1&&(s(0,"a",17)(1,"span"),f(2),p(),h(3,"clr-icon",18),p()),e&2){let t=l.item;o("routerLink",G(2,ni,t.id)),a(2),T(t.name)}}function Ts(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.code," ")}}function Ds(e,l){e&1&&(s(0,"vdr-chip",21),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.private")))}function Fs(e,l){e&1&&(s(0,"vdr-chip",22),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.public")))}function Ss(e,l){if(e&1&&_(0,Ds,3,3,"vdr-chip",19)(1,Fs,3,3,"vdr-chip",20),e&2){let t=l.item;o("ngIf",t.isPrivate),a(),o("ngIf",!t.isPrivate)}}function Es(e,l){if(e&1&&h(0,"vdr-facet-value-chip",27),e&2){let t=l.$implicit;o("facetValue",t)("removable",!1)("displayFacetName",!1)}}function Os(e,l){if(e&1&&(s(0,"vdr-chip"),f(1),p()),e&2){let t=u().item;a(),v(" ... + ",t.valueList.totalItems-t.valueList.items.length," ")}}function Vs(e,l){if(e&1&&(N(0),h(1,"clr-icon",16),f(2),L()),e&2){let t=u(2).item,n=u();a(2),v(" ",t.valueList.totalItems-n.initialLimit," ")}}function ks(e,l){e&1&&h(0,"clr-icon",30)}function ws(e,l){if(e&1){let t=D();s(0,"button",28),C("click",function(){y(t);let i=u().item,r=u();return x(r.toggleDisplayLimit(i))}),_(1,Vs,3,1,"ng-container",29)(2,ks,1,0,"ng-template",null,0,H),p()}if(e&2){let t=W(3),n=u().item,i=u();a(),o("ngIf",(i.displayLimit[n.id]||0)<n.valueList.items.length)("ngIfElse",t)}}function Rs(e,l){if(e&1&&(s(0,"div",23),_(1,Es,1,3,"vdr-facet-value-chip",24),c(2,"slice"),_(3,Os,2,1,"vdr-chip",25)(4,ws,4,2,"button",26),p()),e&2){let t=l.item,n=u();a(),o("ngForOf",Cn(2,3,t.valueList.items,0,n.displayLimit[t.id]||3)),a(2),o("ngIf",n.displayLimit[t.id]<t.valueList.totalItems&&(n.displayLimit[t.id]||0)===t.valueList.items.length),a(),o("ngIf",t.valueList.items.length>n.initialLimit)}}function Bs(e,l){if(e&1&&h(0,"vdr-dt2-custom-field-column",31),e&2){let t=l.$implicit,n=u();o("customField",t)("sorts",n.sorts)}}var As=["optionGroupName"];function Ms(e,l){if(e&1){let t=D();s(0,"div",6)(1,"div",7)(2,"label"),f(3),c(4,"translate"),p(),s(5,"input",8,0),be("ngModelChange",function(i){let r=y(t).$implicit;return Ce(r.name,i)||(r.name=i),x(i)}),C("keydown.enter",function(i){y(t);let r=W(12),m=u();return x(m.handleEnter(i,r))}),p()(),s(7,"div",9)(8,"label"),f(9),c(10,"translate"),p(),s(11,"vdr-option-value-input",10,1),be("ngModelChange",function(i){let r=y(t).$implicit;return Ce(r.values,i)||(r.values=i),x(i)}),C("ngModelChange",function(){y(t);let i=u();return x(i.generateVariants())})("edit",function(){y(t);let i=u();return x(i.generateVariants())}),p()(),s(13,"div",11)(14,"button",12),c(15,"translate"),C("click",function(){let i=y(t).$implicit,r=u();return x(r.removeOption(i.name))}),h(16,"clr-icon",13),p()()()}if(e&2){let t=l.$implicit;a(3),T(d(4,7,"catalog.option")),a(2),ve("ngModel",t.name),a(4),T(d(10,9,"catalog.option-values")),a(2),ve("ngModel",t.values),o("groupName",t.name)("disabled",t.name===""),a(3),o("title",d(15,11,"catalog.remove-option"))}}function Ns(e,l){e&1&&(s(0,"clr-alert",18)(1,"clr-alert-item")(2,"span",19),f(3),c(4,"translate"),p()()()),e&2&&(o("clrAlertClosable",!1),a(3),v(" ",d(4,2,"catalog.no-stock-locations-available-on-current-channel")," "))}function Ls(e,l){if(e&1&&(s(0,"option",23),f(1),p()),e&2){let t=l.$implicit;o("value",t.id),a(),v(" ",t.name," ")}}function $s(e,l){if(e&1){let t=D();s(0,"vdr-form-field",20),c(1,"translate"),s(2,"select",21),be("ngModelChange",function(i){y(t);let r=u(2);return Ce(r.selectedStockLocationId,i)||(r.selectedStockLocationId=i),x(i)}),_(3,Ls,2,2,"option",22),p()()}if(e&2){let t=u().ngIf,n=u();o("label",d(1,3,"catalog.add-stock-to-location")),a(2),ve("ngModel",n.selectedStockLocationId),a(),o("ngForOf",t)}}function Us(e,l){e&1&&(s(0,"th"),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.create")))}function Gs(e,l){e&1&&(s(0,"th"),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"catalog.variant")))}function js(e,l){e&1&&(s(0,"td"),h(1,"input",31),p())}function Ws(e,l){if(e&1&&(s(0,"td"),f(1),p()),e&2){let t=u().$implicit;a(),v(" ",t.values.join(" ")," ")}}function qs(e,l){if(e&1&&(s(0,"tr",27),_(1,js,2,0,"td",5)(2,Ws,2,1,"td",5),s(3,"td")(4,"vdr-form-field"),h(5,"input",28),c(6,"translate"),p()(),s(7,"td")(8,"vdr-form-field"),h(9,"vdr-currency-input",29),p()(),s(10,"td")(11,"vdr-form-field"),h(12,"input",30),p()()()),e&2){let t=l.$implicit,n=u(3);A("disabled",!!n.variantFormValues[t.id].value.enabled),o("formGroup",n.variantFormValues[t.id]),a(),o("ngIf",1<n.variants.length),a(),o("ngIf",1<n.variants.length),a(3),o("placeholder",d(6,7,"catalog.sku")),a(4),o("currencyCode",n.currencyCode)}}function Hs(e,l){if(e&1&&(s(0,"div",24)(1,"table",25)(2,"thead")(3,"tr"),_(4,Us,3,3,"th",5)(5,Gs,3,3,"th",5),s(6,"th"),f(7),c(8,"translate"),p(),s(9,"th"),f(10),c(11,"translate"),p(),s(12,"th"),f(13),c(14,"translate"),p()()(),_(15,qs,13,9,"tr",26),p()()),e&2){let t=u(2);a(4),o("ngIf",1<t.variants.length),a(),o("ngIf",1<t.variants.length),a(2),T(d(8,7,"catalog.sku")),a(3),T(d(11,9,"catalog.price")),a(3),T(d(14,11,"catalog.stock-on-hand")),a(2),o("ngForOf",t.variants)("ngForTrackBy",t.trackByFn)}}function Qs(e,l){if(e&1&&(N(0),_(1,Ns,5,4,"clr-alert",14),s(2,"div",15),_(3,$s,4,5,"vdr-form-field",16),p(),_(4,Hs,16,13,"div",17),L()),e&2){let t=l.ngIf;a(),o("ngIf",t.length===0),a(2),o("ngIf",t.length),a(),o("ngIf",0<t.length)}}var Ys=(e,l)=>["/catalog/products",e,"variants",l];function Ks(e,l){if(e&1){let t=D();s(0,"vdr-page-block")(1,"vdr-language-selector",16),c(2,"async"),c(3,"async"),C("languageCodeChange",function(i){y(t);let r=u();return x(r.setLanguage(i))}),p()()}if(e&2){let t=u();a(),o("availableLanguageCodes",d(2,2,t.availableLanguages$))("currentLanguageCode",d(3,4,t.contentLanguage$))}}function zs(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function Zs(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.createdAt,"short")," ")}}function Js(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.updatedAt,"short")," ")}}function Xs(e,l){if(e&1&&(h(0,"img",19),c(1,"assetPreview")),e&2){let t=l.ngIf;o("src",O(1,1,t,"tiny"),oi)}}function ep(e,l){e&1&&(s(0,"div",20),h(1,"clr-icon",21),p())}function tp(e,l){if(e&1&&(s(0,"div",17),_(1,Xs,2,4,"img",18)(2,ep,2,0,"ng-template",null,0,H),p()),e&2){let t=l.item,n=W(3);a(),o("ngIf",t.featuredAsset)("ngIfElse",n)}}function ip(e,l){if(e&1&&(s(0,"a",22)(1,"span"),f(2),p(),h(3,"clr-icon",23),p()),e&2){let t=l.item;o("routerLink",st(2,Ys,t.productId,t.id)),a(2),T(t.name)}}function np(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.sku," ")}}function ap(e,l){e&1&&(s(0,"vdr-chip",26),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.enabled")))}function op(e,l){e&1&&(s(0,"vdr-chip",27),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.disabled")))}function rp(e,l){if(e&1&&_(0,ap,3,3,"vdr-chip",24)(1,op,3,3,"vdr-chip",25),e&2){let t=l.item;o("ngIf",t.enabled),a(),o("ngIf",!t.enabled)}}function lp(e,l){if(e&1&&(f(0),c(1,"localeCurrency")),e&2){let t=l.item;v(" ",O(1,1,t.price,t.currencyCode)," ")}}function cp(e,l){if(e&1&&(f(0),c(1,"localeCurrency")),e&2){let t=l.item;v(" ",O(1,1,t.priceWithTax,t.currencyCode)," ")}}function sp(e,l){if(e&1&&(s(0,"span",32),f(1),p()),e&2){let t=u().$implicit;a(),v("(",t.stockAllocated," allocated)")}}function pp(e,l){if(e&1&&(s(0,"vdr-chip",29)(1,"div",30)(2,"div"),f(3),_(4,sp,2,1,"span",31),p()()()),e&2){let t=l.$implicit;o("title",t.stockLocation==null?null:t.stockLocation.name),a(3),v(" ",t.stockOnHand,""),a(),o("ngIf",t.stockAllocated)}}function dp(e,l){if(e&1&&_(0,pp,5,3,"vdr-chip",28),e&2){let t=l.item;o("ngForOf",t.stockLevels)}}function mp(e,l){if(e&1&&h(0,"vdr-dt2-custom-field-column",33),e&2){let t=l.$implicit,n=u();o("customField",t)("sorts",n.sorts)}}var up=()=>["name"],vo=()=>["enabled"],_p=()=>["options"],gp=()=>["manage-variants"];function fp(e,l){if(e&1){let t=D();s(0,"button",28),C("click",function(){y(t);let i=u();return x(i.create())}),f(1),c(2,"translate"),p()}if(e&2){let t=u();o("disabled",t.detailForm.invalid||t.detailForm.pristine||t.createVariantsConfig.variants.length===0),a(),v(" ",d(2,2,"common.create")," ")}}function hp(e,l){if(e&1){let t=D();s(0,"button",28),C("click",function(){y(t);let i=u(2);return x(i.save())}),f(1),c(2,"translate"),p()}if(e&2){let t=u(2);o("disabled",(t.detailForm.invalid||t.detailForm.pristine)&&!t.assetsChanged()),a(),v(" ",d(2,2,"common.update")," ")}}function vp(e,l){if(e&1&&_(0,hp,3,4,"button",29),e&2){let t=u();o("vdrIfPermissions",t.updatePermissions)}}function Cp(e,l){if(e&1&&(s(0,"clr-toggle-wrapper"),h(1,"input",30),s(2,"label"),f(3),c(4,"translate"),p()()),e&2){let t=u();a(),o("formControl",t.detailForm.get(U(4,vo))),a(2),T(d(4,2,"common.enabled"))}}function bp(e,l){if(e&1){let t=D();s(0,"vdr-chip",39),C("iconClick",function(){y(t);let i=u().$implicit,r=u(4);return x(r.removeFromChannel(i.id))}),h(1,"vdr-channel-badge",40),f(2),c(3,"channelCodeToLabel"),p()}if(e&2){let t=u().$implicit;a(),o("channelCode",t.code),a(),v(" ",d(3,2,t.code)," ")}}function yp(e,l){if(e&1&&(N(0),_(1,bp,4,4,"vdr-chip",38),L()),e&2){let t=l.$implicit,n=u(4);a(),o("ngIf",!n.isDefaultChannel(t.code))}}function xp(e,l){if(e&1){let t=D();s(0,"vdr-form-item")(1,"div",33)(2,"div",34),_(3,yp,2,1,"ng-container",35),c(4,"async"),p(),s(5,"button",36),C("click",function(){y(t);let i=u(3);return x(i.assignToChannel())}),h(6,"clr-icon",37),f(7),c(8,"translate"),p()()()}if(e&2){let t=u(3);a(3),o("ngForOf",d(4,2,t.productChannels$)),a(4),v(" ",d(8,4,"common.assign-to-channel")," ")}}function Ip(e,l){e&1&&(s(0,"vdr-card",11),c(1,"translate"),_(2,xp,9,6,"vdr-form-item",32),p()),e&2&&o("title",d(1,1,"common.channels"))}function Pp(e,l){e&1&&(N(0),_(1,Ip,3,3,"vdr-card",31),L())}function Tp(e,l){if(e&1&&(s(0,"vdr-chip",44),f(1),p()),e&2){let t=l.$implicit;o("colorFrom",t.code)("invert",!0),a(),v(" ",t.name," ")}}function Dp(e,l){e&1&&(s(0,"a",45),h(1,"clr-icon",46),f(2),c(3,"translate"),p()),e&2&&(o("routerLink",U(4,_p)),a(2),v(" ",d(3,2,"catalog.edit-options")," "))}function Fp(e,l){if(e&1&&(s(0,"vdr-card",11),c(1,"translate"),s(2,"div",41),_(3,Tp,2,3,"vdr-chip",42),c(4,"sort"),p(),s(5,"div"),_(6,Dp,4,5,"a",43),p()()),e&2){let t=u();o("title",d(1,3,"catalog.product-options")),a(3),o("ngForOf",O(4,5,t.entity==null?null:t.entity.optionGroups,"id")),a(3),o("vdrIfPermissions",t.updatePermissions)}}function Sp(e,l){if(e&1){let t=D();s(0,"vdr-facet-value-chip",47),c(1,"hasPermission"),C("remove",function(){let i=y(t).$implicit,r=u();return x(r.removeProductFacetValue(i.id))}),p()}if(e&2){let t=l.$implicit,n=u();o("facetValue",t)("removable",d(1,2,n.updatePermissions))}}function Ep(e,l){if(e&1){let t=D();s(0,"button",48),C("click",function(){y(t);let i=u();return x(i.selectProductFacetValue())}),h(1,"clr-icon",49),f(2),c(3,"translate"),p()}e&2&&(a(2),v(" ",d(3,1,"catalog.add-facets")," "))}function Op(e,l){if(e&1&&(s(0,"vdr-card"),h(1,"vdr-page-entity-info",50),p()),e&2){let t=l.ngIf;a(),o("entity",t)}}function Vp(e,l){e&1&&(s(0,"div")(1,"clr-checkbox-wrapper"),h(2,"input",51),s(3,"label"),f(4),c(5,"translate"),p()()()),e&2&&(a(4),T(d(5,1,"catalog.auto-update-product-variant-name")))}function kp(e,l){if(e&1&&(s(0,"vdr-card",11),c(1,"translate"),h(2,"vdr-tabbed-custom-fields",52),c(3,"hasPermission"),p()),e&2){let t=u();o("title",d(1,4,"common.custom-fields")),a(2),o("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))("readonly",!d(3,6,t.updatePermissions))}}function wp(e,l){if(e&1){let t=D();s(0,"div")(1,"vdr-generate-product-variants",53),C("variantsChange",function(i){y(t);let r=u();return x(r.createVariantsConfig=i)}),p()()}}function Rp(e,l){if(e&1&&h(0,"vdr-product-variant-list",54),e&2){let t=u();o("productId",t.id)("hideLanguageSelect",!0)}}function Bp(e,l){e&1&&(s(0,"div",55)(1,"a",56),h(2,"clr-icon",57),f(3),c(4,"translate"),p()()),e&2&&(a(),o("routerLink",U(4,gp)),a(2),v(" ",d(4,2,"catalog.manage-variants"),""))}var Ap=()=>["CreateCatalog","CreateProduct"];function Mp(e,l){e&1&&(s(0,"a",19),h(1,"clr-icon",20),f(2),c(3,"translate"),p()),e&2&&(o("routerLink",U(4,an)),a(2),v(" ",d(3,2,"catalog.create-new-product")," "))}function Np(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.id," ")}}function Lp(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.createdAt,"short")," ")}}function $p(e,l){if(e&1&&(f(0),c(1,"localeDate")),e&2){let t=l.item;v(" ",O(1,1,t.updatedAt,"short")," ")}}function Up(e,l){if(e&1&&(h(0,"img",23),c(1,"assetPreview")),e&2){let t=l.ngIf;o("src",O(1,1,t,"tiny"),oi)}}function Gp(e,l){e&1&&(s(0,"div",24),h(1,"clr-icon",25),p())}function jp(e,l){if(e&1&&(s(0,"div",21),_(1,Up,2,4,"img",22)(2,Gp,2,0,"ng-template",null,0,H),p()),e&2){let t=l.item,n=W(3);a(),o("ngIf",t.featuredAsset)("ngIfElse",n)}}function Wp(e,l){if(e&1&&(s(0,"a",26)(1,"span"),f(2),p(),h(3,"clr-icon",27),p()),e&2){let t=l.item;o("routerLink",G(2,ni,t.id)),a(2),T(t.name)}}function qp(e,l){if(e&1&&f(0),e&2){let t=l.item;v(" ",t.slug," ")}}function Hp(e,l){e&1&&(s(0,"vdr-chip",30),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.enabled")))}function Qp(e,l){e&1&&(s(0,"vdr-chip",31),f(1),c(2,"translate"),p()),e&2&&(a(),T(d(2,1,"common.disabled")))}function Yp(e,l){if(e&1&&_(0,Hp,3,3,"vdr-chip",28)(1,Qp,3,3,"vdr-chip",29),e&2){let t=l.item;o("ngIf",t.enabled),a(),o("ngIf",!t.enabled)}}function Kp(e,l){if(e&1&&(f(0),c(1,"translate")),e&2){let t=l.item;v(" ",O(1,1,"catalog.variant-count",G(4,_o,t.variantList==null?null:t.variantList.totalItems))," ")}}function zp(e,l){if(e&1&&h(0,"vdr-dt2-custom-field-column",32),e&2){let t=l.$implicit,n=u();o("customField",t)("sorts",n.sorts)}}var Zp=".image-col[_ngcontent-%COMP%]{width:70px}.image-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;margin-top:calc(var(--space-unit) * -1);margin-bottom:calc(var(--space-unit) * -1);background-color:var(--color-component-bg-200)}.image-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img)}.image-placeholder[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--color-grey-300)}.search-form[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}vdr-product-search-input[_ngcontent-%COMP%]{min-width:300px}@media screen and (max-width: 768px){vdr-product-search-input[_ngcontent-%COMP%]{min-width:100px}}.search-settings-menu[_ngcontent-%COMP%]{margin:0 12px}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.search-index-button[_ngcontent-%COMP%]{position:relative}.search-index-button[_ngcontent-%COMP%]   vdr-status-badge[_ngcontent-%COMP%]{right:0;top:0}.run-updates-button[_ngcontent-%COMP%]{position:relative}.run-updates-button[_ngcontent-%COMP%]   vdr-status-badge[_ngcontent-%COMP%]{left:10px;top:10px}.edit-button[_ngcontent-%COMP%]{margin-inline-end:24px}.sku[_ngcontent-%COMP%]{color:var(--color-text-300)}",Jp=e=>({rate:e}),Xp=(e,l)=>({price:e,rate:l});function ed(e,l){if(e&1&&(s(0,"div",2),f(1),c(2,"async"),c(3,"translate"),p()),e&2){let t=u();a(),v(" ",O(3,3,"catalog.price-includes-tax-at",G(6,Jp,d(2,1,t.taxRate$))),`
`)}}function td(e,l){if(e&1&&(s(0,"div",2),f(1),c(2,"async"),c(3,"localeCurrency"),c(4,"async"),c(5,"translate"),p()),e&2){let t=u();a(),v(" ",O(5,8,"catalog.price-with-tax-in-default-zone",st(11,Xp,O(3,3,d(2,1,t.grossPrice$),t.currencyCode),d(4,6,t.taxRate$))),`
`)}}function id(e,l){if(e&1&&(s(0,"div",1),h(1,"vdr-form-item",2),c(2,"translate"),c(3,"translate"),s(4,"div",3)(5,"vdr-form-item",4),c(6,"translate"),f(7),c(8,"localeCurrency"),p(),s(9,"vdr-form-item",4),c(10,"translate"),f(11),c(12,"localeCurrency"),p()()()),e&2){let t=u();a(),o("label",d(2,6,"catalog.calculated-price"))("tooltip",d(3,8,"catalog.calculated-price-tooltip")),a(4),o("label",d(6,10,"common.price")),a(2),v(" ",O(8,12,t.variant.price,t.variant.currencyCode)," "),a(2),o("label",d(10,15,"common.price-with-tax")),a(2),v(" ",O(12,17,t.variant.priceWithTax,t.variant.currencyCode)," ")}}function nd(e,l){if(e&1&&f(0),e&2){let t=l.item;kt(" ",t.name," (",t.sku,") ")}}function ad(e,l){if(e&1){let t=D();s(0,"ng-select",1),c(1,"async"),c(2,"translate"),be("ngModelChange",function(i){y(t);let r=u();return Ce(r.selectedVariantId,i)||(r.selectedVariantId=i),x(i)}),C("change",function(i){y(t);let r=u();return x(r.onSelect(i))}),_(3,nd,1,2,"ng-template",2),p()}if(e&2){let t=u();o("items",d(1,5,t.variants$)),ve("ngModel",t.selectedVariantId),o("searchFn",t.searchFn)("clearable",!1)("placeholder",d(2,7,"catalog.quick-jump-placeholder"))}}var bi=()=>["UpdateCatalog","UpdateProduct"],od=()=>["../../","options"],rd=()=>["customFields"];function ld(e,l){if(e&1){let t=D();s(0,"vdr-language-selector",8),c(1,"async"),c(2,"async"),C("languageCodeChange",function(i){y(t);let r=u(2);return x(r.setLanguage(i))}),p()}if(e&2){let t=u().ngIf,n=u();o("disabled",d(1,3,n.isNew$))("availableLanguageCodes",t)("currentLanguageCode",d(2,5,n.languageCode$))}}function cd(e,l){if(e&1&&(N(0),_(1,ld,3,7,"vdr-language-selector",7),L()),e&2){let t=l.ngIf;a(),o("ngIf",t.length>1)}}function sd(e,l){if(e&1){let t=D();s(0,"button",9),C("click",function(){y(t);let i=u();return x(i.save())}),f(1),c(2,"translate"),p()}if(e&2){let t=u();o("disabled",(t.detailForm.invalid||t.stockLevelsForm.invalid||t.pricesForm.invalid||t.detailForm.pristine&&t.stockLevelsForm.pristine&&t.pricesForm.pristine)&&!t.assetsChanged()),a(),v(" ",d(2,2,"common.update")," ")}}function pd(e,l){if(e&1&&(s(0,"clr-toggle-wrapper"),h(1,"input",39),s(2,"label"),f(3),c(4,"translate"),p()()),e&2){let t=u(2);a(),o("formControl",t.detailForm.get(U(4,vo))),a(2),T(d(4,2,"common.enabled"))}}function dd(e,l){if(e&1&&(s(0,"vdr-chip",43)(1,"span"),f(2),p(),f(3),p()),e&2){let t=l.$implicit,n=u(3);o("colorFrom",n.optionGroupCode(t.groupId))("invert",!0),a(2),v("",n.optionGroupCode(t.groupId),":"),a(),v(" ",n.optionName(t)," ")}}function md(e,l){e&1&&(s(0,"a",44),h(1,"clr-icon",45),f(2),c(3,"translate"),p()),e&2&&(o("routerLink",U(4,od)),a(2),v(" ",d(3,2,"catalog.edit-options")," "))}function ud(e,l){if(e&1&&(s(0,"vdr-card",14),c(1,"translate"),s(2,"div",40),_(3,dd,4,4,"vdr-chip",41),c(4,"sort"),p(),s(5,"div"),_(6,md,4,5,"a",42),p()()),e&2){let t=u().ngIf,n=u();o("title",d(1,3,"catalog.product-options")),a(3),o("ngForOf",O(4,5,t.options,"groupId")),a(3),o("vdrIfPermissions",n.updatePermissions)}}function _d(e,l){if(e&1){let t=D();s(0,"vdr-facet-value-chip",46),c(1,"hasPermission"),C("remove",function(){let i=y(t).$implicit,r=u(2);return x(r.removeFacetValue(i.id))}),p()}if(e&2){let t=l.$implicit,n=u(2);o("facetValue",t)("removable",d(1,2,n.updatePermissions))}}function gd(e,l){if(e&1){let t=D();s(0,"button",47),C("click",function(){y(t);let i=u(2);return x(i.selectFacetValue())}),h(1,"clr-icon",48),f(2),c(3,"translate"),p()}e&2&&(a(2),v(" ",d(3,1,"catalog.add-facets")," "))}function fd(e,l){if(e&1&&h(0,"vdr-page-entity-info",49),e&2){let t=l.ngIf;o("entity",t)}}function hd(e,l){if(e&1&&(s(0,"vdr-card",14),c(1,"translate"),h(2,"vdr-tabbed-custom-fields",50),c(3,"hasPermission"),p()),e&2){let t=u(2);o("title",d(1,4,"common.custom-fields")),a(2),o("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))("readonly",!d(3,6,t.updatePermissions))}}function vd(e,l){if(e&1&&(s(0,"option",34),f(1),p()),e&2){let t=l.$implicit;o("value",t.id),a(),v(" ",t.name," ")}}function Cd(e,l){if(e&1){let t=D();s(0,"div")(1,"button",57),C("click",function(){y(t);let i=u().$implicit,r=u(2);return x(r.toggleDeletePrice(i.get("delete")))}),h(2,"clr-icon",58),p()()}if(e&2){let t=u().$implicit,n=u(2);a(),o("disabled",t.value.currencyCode===n.channelDefaultCurrencyCode)}}function bd(e,l){if(e&1&&(s(0,"div",59)(1,"div",60)(2,"span",61),f(3),c(4,"translate"),p()(),h(5,"vdr-tabbed-custom-fields",62),c(6,"hasPermission"),p()),e&2){let t=u().$implicit,n=u(2);a(3),T(d(4,4,"common.custom-fields")),a(2),o("customFields",n.customPriceFields)("customFieldsFormGroup",t.get(U(8,rd)))("readonly",!d(6,6,n.updatePermissions))}}function yd(e,l){if(e&1&&(s(0,"div",51)(1,"vdr-form-field",52),c(2,"translate"),c(3,"translate"),s(4,"div",53),h(5,"vdr-currency-input",54),c(6,"hasPermission"),_(7,Cd,3,1,"div",2),p()(),h(8,"vdr-variant-price-detail",55),c(9,"async"),_(10,bd,7,9,"div",56),p()),e&2){let t=l.$implicit,n=u(2);o("formGroup",t),a(),o("label",d(2,13,"catalog.price")+(1<n.pricesForm.length?" ("+t.value.currencyCode+")":""))("tooltip",1<n.pricesForm.length&&t.value.currencyCode===n.channelDefaultCurrencyCode?d(3,15,"catalog.default-currency"):void 0),a(3),A("pending-deletion",t.value.delete===!0),a(),o("currencyCode",t.value.currencyCode)("readonly",!d(6,17,n.updatePermissions)||t.value.delete===!0),a(2),o("ngIf",1<n.pricesForm.controls.length),a(),o("price",t.value.price)("currencyCode",t.value.currencyCode)("priceIncludesTax",d(9,19,n.channelPriceIncludesTax$))("taxCategoryId",n.detailForm.get("taxCategoryId").value),a(2),o("ngIf",n.customPriceFields.length)}}function xd(e,l){if(e&1){let t=D();s(0,"button",66),C("click",function(){let i=y(t).$implicit,r=u(4);return x(r.addPriceInCurrency(i))}),f(1),c(2,"localeCurrencyName"),p()}if(e&2){let t=l.$implicit;a(),v(" ",d(2,1,t)," ")}}function Id(e,l){if(e&1&&(s(0,"div")(1,"vdr-dropdown")(2,"button",63),h(3,"clr-icon",48),f(4),c(5,"translate"),h(6,"clr-icon",64),p(),s(7,"vdr-dropdown-menu"),_(8,xd,3,3,"button",65),p()()()),e&2){let t=u().ngIf;a(4),v(" ",d(5,2,"catalog.add-price-in-another-currency")," "),a(4),o("ngForOf",t)}}function Pd(e,l){if(e&1&&(N(0),_(1,Id,9,4,"div",2),L()),e&2){let t=l.ngIf;a(),o("ngIf",t.length)}}function Td(e,l){if(e&1&&(s(0,"div",67)(1,"vdr-form-field",68),c(2,"translate"),h(3,"input",69),c(4,"hasPermission"),p(),s(5,"vdr-form-item",70),c(6,"translate"),f(7),p()()),e&2){let t,n,i,r,m,g=l.$implicit,b=u(2);o("formGroup",g),a(),o("label",((t=g.get("stockLocationName"))==null?null:t.value)+": "+d(2,7,"catalog.stock-on-hand"))("for","stockOnHand_"+((n=g.get("stockLocationId"))==null?null:n.value)),a(2),o("id","stockOnHand_"+((i=g.get("stockLocationId"))==null?null:i.value))("readonly",!d(4,9,b.updatePermissions)),a(2),o("label",((r=g.get("stockLocationName"))==null?null:r.value)+": "+d(6,11,"catalog.stock-allocated")),a(2),v(" ",(m=g.get("stockAllocated"))==null?null:m.value," ")}}function Dd(e,l){if(e&1){let t=D();s(0,"button",66),C("click",function(){let i=y(t).$implicit,r=u(4);return x(r.addStockLocation(i))}),h(1,"clr-icon",71),f(2),p()}if(e&2){let t=l.$implicit;a(2),v(" ",t.name," ")}}function Fd(e,l){if(e&1&&(s(0,"div")(1,"vdr-dropdown")(2,"button",63),h(3,"clr-icon",48),f(4),c(5,"translate"),h(6,"clr-icon",64),p(),s(7,"vdr-dropdown-menu"),_(8,Dd,3,1,"button",65),p()()()),e&2){let t=u().ngIf;a(4),v(" ",d(5,2,"catalog.add-stock-location")," "),a(4),o("ngForOf",t)}}function Sd(e,l){if(e&1&&(N(0),_(1,Fd,9,4,"div",2),L()),e&2){let t=l.ngIf;a(),o("ngIf",t.length)}}function Ed(e,l){if(e&1){let t=D();s(0,"form",10)(1,"vdr-page-detail-layout")(2,"vdr-page-detail-sidebar")(3,"vdr-card")(4,"vdr-form-field",11),c(5,"translate"),_(6,pd,5,5,"clr-toggle-wrapper",12),p()(),_(7,ud,7,8,"vdr-card",13),s(8,"vdr-card",14),c(9,"translate"),s(10,"div",15),_(11,_d,2,4,"vdr-facet-value-chip",16),c(12,"async"),p(),s(13,"div"),_(14,gd,4,3,"button",17),p()(),s(15,"vdr-card"),_(16,fd,1,1,"vdr-page-entity-info",18),c(17,"async"),p()(),s(18,"vdr-page-block"),h(19,"button",19),s(20,"vdr-card")(21,"div",20)(22,"vdr-form-field",21),c(23,"translate"),h(24,"input",22),c(25,"hasPermission"),p(),s(26,"vdr-form-field",23),c(27,"translate"),h(28,"input",24),c(29,"hasPermission"),p()()(),_(30,hd,4,8,"vdr-card",13),h(31,"vdr-custom-detail-component-host",25),s(32,"vdr-card",14),c(33,"translate"),s(34,"vdr-assets",26),C("change",function(i){y(t);let r=u();return x(r.assetChanges=i)}),p()(),s(35,"vdr-card",14),c(36,"translate"),s(37,"div",20)(38,"vdr-form-field",27),c(39,"translate"),s(40,"select",28),_(41,vd,2,2,"option",29),c(42,"async"),p()()(),_(43,yd,11,21,"div",30),h(44,"vdr-variant-price-strategy-detail",31),c(45,"async"),_(46,Pd,2,1,"ng-container",2),c(47,"async"),p(),s(48,"vdr-card",14),c(49,"translate"),s(50,"div",20)(51,"vdr-form-field",32),c(52,"translate"),c(53,"translate"),s(54,"select",33),c(55,"hasPermission"),s(56,"option",34),f(57),c(58,"translate"),p(),s(59,"option",34),f(60),c(61,"translate"),p(),s(62,"option",34),f(63),c(64,"translate"),p()()(),s(65,"vdr-form-item",35),c(66,"translate"),c(67,"translate"),h(68,"input",36),c(69,"hasPermission"),s(70,"clr-toggle-wrapper"),h(71,"input",37),c(72,"hasPermission"),s(73,"label"),f(74),c(75,"translate"),p()()()(),_(76,Td,8,13,"div",38)(77,Sd,2,1,"ng-container",2),c(78,"async"),p()()()()}if(e&2){let t,n=l.ngIf,i=u();o("formGroup",i.detailForm),a(4),o("label",d(5,46,"catalog.visibility")),a(2),o("vdrIfPermissions",U(100,bi)),a(),o("ngIf",n.options.length),a(),o("title",d(9,48,"catalog.facets")),a(3),o("ngForOf",d(12,50,i.facetValues$)),a(3),o("vdrIfPermissions",i.updatePermissions),a(2),o("ngIf",d(17,52,i.entity$)),a(6),o("label",d(23,54,"common.name")),a(2),o("readonly",!d(25,56,U(101,bi))),a(2),o("label",d(27,58,"catalog.sku")),a(2),o("readonly",!d(29,60,i.updatePermissions)),a(2),o("ngIf",i.customFields.length),a(),o("entity$",i.entity$)("detailForm",i.detailForm),a(),o("title",d(33,62,"catalog.assets")),a(2),o("assets",i.assetChanges.assets||n.assets)("featuredAsset",i.assetChanges.featuredAsset||n.featuredAsset)("updatePermissions",i.updatePermissions),a(),o("title",d(36,64,"catalog.price-and-tax")),a(3),o("label",d(39,66,"catalog.tax-category")),a(3),o("ngForOf",d(42,68,i.taxCategories$)),a(2),o("ngForOf",i.pricesForm.controls),a(),o("channelPriceIncludesTax",d(45,70,i.channelPriceIncludesTax$))("channelDefaultCurrencyCode",i.channelDefaultCurrencyCode)("variant",n),a(2),o("ngIf",d(47,72,i.unusedCurrencyCodes$)),a(2),o("title",d(49,74,"catalog.stock-levels")),a(3),o("label",d(52,76,"catalog.track-inventory"))("tooltip",d(53,78,"catalog.track-inventory-tooltip")),a(3),o("disabled",!d(55,80,i.updatePermissions)),a(2),o("value",i.GlobalFlag.TRUE),a(),v(" ",d(58,82,"catalog.track-inventory-true")," "),a(2),o("value",i.GlobalFlag.FALSE),a(),v(" ",d(61,84,"catalog.track-inventory-false")," "),a(2),o("value",i.GlobalFlag.INHERIT),a(),v(" ",d(64,86,"catalog.track-inventory-inherit")," "),a(2),o("label",d(66,88,"catalog.out-of-stock-threshold"))("tooltip",d(67,90,"catalog.out-of-stock-threshold-tooltip")),a(3),o("readonly",!d(69,92,i.updatePermissions))("vdrDisabled",((t=i.detailForm.get("useGlobalOutOfStockThreshold"))==null?null:t.value)!==!1||i.inventoryIsNotTracked(i.detailForm)),a(3),o("vdrDisabled",!d(72,94,i.updatePermissions)||i.inventoryIsNotTracked(i.detailForm)),a(3),kt("",d(75,96,"catalog.use-global-value")," (",i.globalOutOfStockThreshold,")"),a(2),o("ngForOf",i.stockLevelsForm.controls),a(),o("ngIf",d(78,98,i.unusedStockLocation$))}}function Od(e,l){if(e&1&&(N(0),s(1,"th"),f(2),p(),L()),e&2){let t=l.$implicit;a(2),T(t.name)}}function Vd(e,l){if(e&1&&(h(0,"img",18),c(1,"assetPreview")),e&2){let t=l.ngIf;o("src",O(1,1,t,"tiny"),oi)}}function kd(e,l){e&1&&(s(0,"div",19),h(1,"clr-icon",20),p())}function wd(e,l){if(e&1&&(N(0),s(1,"td",6),c(2,"stringToColor"),f(3),p(),L()),e&2){let t=l.$implicit,n=u().ngIf,i=u(2);a(),un("color",d(2,5,i.optionGroupName(t.groupId))),A("disabled",!n.get("enabled").value),a(2),v(" ",t.name," ")}}function Rd(e,l){if(e&1&&(h(0,"vdr-currency-input",21),c(1,"hasPermission")),e&2){let t=u(2).$implicit,n=u();o("currencyCode",t.currencyCode)("readonly",!d(1,2,n.updatePermission))}}function Bd(e,l){if(e&1&&(h(0,"vdr-currency-input",22),c(1,"hasPermission")),e&2){let t=u(2).$implicit,n=u();o("currencyCode",t.currencyCode)("readonly",!d(1,2,n.updatePermission))}}function Ad(e,l){if(e&1&&(N(0,5),s(1,"td",6)(2,"div",7)(3,"div",8),_(4,Vd,2,4,"img",9)(5,kd,2,0,"ng-template",null,0,H),p()()(),s(7,"td",6)(8,"clr-input-container"),h(9,"input",10),c(10,"hasPermission"),c(11,"translate"),p()(),s(12,"td",6)(13,"clr-input-container"),h(14,"input",11),c(15,"hasPermission"),c(16,"translate"),p()(),_(17,wd,4,7,"ng-container",2),c(18,"sort"),s(19,"td",12)(20,"clr-input-container"),_(21,Rd,2,4,"vdr-currency-input",13)(22,Bd,2,4,"vdr-currency-input",14),p()(),s(23,"td",15)(24,"clr-input-container"),h(25,"input",16),c(26,"hasPermission"),p()(),s(27,"td",15)(28,"clr-toggle-wrapper"),h(29,"input",17),c(30,"hasPermission"),p()(),L()),e&2){let t=l.ngIf,n=W(6),i=u().$implicit,r=u();o("formGroup",t),a(),A("disabled",!t.get("enabled").value),a(3),o("ngIf",r.getFeaturedAsset(i))("ngIfElse",n),a(3),A("disabled",!t.get("enabled").value),a(2),o("readonly",!d(10,24,r.updatePermission))("placeholder",d(11,26,"common.name")),a(3),A("disabled",!t.get("enabled").value),a(2),o("readonly",!d(15,28,r.updatePermission))("placeholder",d(16,30,"catalog.sku")),a(3),o("ngForOf",O(18,32,i.options,"groupId")),a(2),A("disabled",!t.get("enabled").value),a(2),o("ngIf",!r.channelPriceIncludesTax),a(),o("ngIf",r.channelPriceIncludesTax),a(),A("disabled",!t.get("enabled").value),a(2),o("readonly",!d(26,35,r.updatePermission)),a(2),A("disabled",!t.get("enabled").value),a(2),o("vdrDisabled",!d(30,37,r.updatePermission))}}function Md(e,l){if(e&1&&(s(0,"tr"),_(1,Ad,31,39,"ng-container",4),p()),e&2){let t=l.$implicit,n=u();a(),o("ngIf",n.formGroupMap.get(t.id))}}function Nd(e,l){e&1&&(f(0),c(1,"translate")),e&2&&T(d(1,1,"catalog.update-product-option"))}function Ld(e,l){if(e&1&&(s(0,"section")(1,"label"),f(2),c(3,"translate"),p(),h(4,"vdr-tabbed-custom-fields",10),c(5,"hasPermission"),p()),e&2){let t=u();a(2),T(d(3,4,"common.custom-fields")),a(2),o("customFields",t.customFields)("customFieldsFormGroup",t.customFieldsForm)("readonly",!d(5,6,U(8,bi)))}}function $d(e,l){if(e&1){let t=D();s(0,"button",11),C("click",function(){y(t);let i=u();return x(i.cancel())}),f(1),c(2,"translate"),p(),s(3,"button",12),C("click",function(){y(t);let i=u();return x(i.update())}),f(4),c(5,"translate"),p()}if(e&2){let t=u(),n=W(4),i=W(8);a(),T(d(2,3,"common.cancel")),a(2),o("disabled",n.invalid||i.invalid||n.pristine&&i.pristine&&t.customFieldsForm.pristine),a(),v(" ",d(5,5,"catalog.update-product-option")," ")}}function lo(e,l,t){if(!e)return"";let n=e.lastIndexOf(l);if(n===-1)return e;let i=e.substr(0,n),r=e.substr(n).replace(l,t);return i+r}var xi=(()=>{class e{constructor(t){this.dataService=t}getTaxCategories(){return this.dataService.settings.getTaxCategories().mapSingle(t=>t.taxCategories.items).pipe(bt(1))}createProductWithVariants(t,n,i){let r=this.dataService.product.createProduct(t),m=n.groups.filter(b=>0<b.values.length),g=this.createProductOptionGroups(m,i);return nt(r,g).pipe(ye(([{createProduct:b},I])=>(I.length?nt(I.map(V=>this.dataService.product.addOptionGroupToProduct({productId:b.id,optionGroupId:V.id}))):se([])).pipe(S(()=>({createProduct:b,optionGroups:I})))),ye(({createProduct:b,optionGroups:I})=>{let F=n.variants.map(M=>{let j=I.length?M.optionValues.map((K,ae)=>{let oe=I[ae].options.find(ft=>ft.name===K);if(!oe)throw new Error(`Could not find a matching ProductOption "${K}" when creating variant`);return oe.id}):[];return fe(te({},M),{optionIds:j})}),V=I.map(M=>M.options).reduce((M,j)=>[...M,...j],[]);return this.createProductVariants(b,F,V,i,n.stockLocationId)}))}createProductOptionGroups(t,n){return t.length?nt(t.map(i=>this.dataService.product.createProductOptionGroups({code:(0,Fe.normalizeString)(i.name,"-"),translations:[{languageCode:n,name:i.name}],options:i.values.map(r=>({code:(0,Fe.normalizeString)(r,"-"),translations:[{languageCode:n,name:r}]}))}).pipe(S(r=>r.createProductOptionGroup)))):se([])}createProductVariants(t,n,i,r,m){let g=n.map(b=>{let I=i.length?`${t.name} ${b.optionIds.map(F=>i.find(V=>V.id===F)).filter(Ot.notNullOrUndefined).map(F=>F.name).join(" ")}`:t.name;return{productId:t.id,price:b.price,sku:b.sku,translations:[{languageCode:r,name:I}],stockLevels:[{stockLocationId:m,stockOnHand:b.stock}],optionIds:b.optionIds}});return this.dataService.product.createProductVariants(g).pipe(S(({createProductVariants:b})=>({createProductVariants:b,productId:t.id})))}updateProduct(t){let{product:n,languageCode:i,autoUpdate:r,productInput:m,variantsInput:g}=t,b=[],I=g||[];return(r?this.dataService.product.getProductVariantsForProduct({},n.id).mapSingle(({productVariants:V})=>V.items):se([])).pipe(ye(V=>{if(m){b.push(this.dataService.product.updateProduct(m));let M=ne(n,i)?.name??"",j=ne(m,i)?.name;if(j&&M!==j&&r)for(let K of V){let ae=ne(K,i)?.name||"",oe,ft=I.find(Ii=>Ii.id===K.id);ft?oe=ft:(oe={id:K.id,translations:[{languageCode:i,name:ae}]},I.push(oe));let Vt=ne(oe,i);Vt&&(Vt.name?Vt.name=lo(Vt.name,M,j):Vt.name=[j,...K.options.map(Ii=>Ii.name)].join(" "))}}return I.length&&b.push(this.dataService.product.updateProductVariants(I)),nt(b)}))}updateProductOptions(t,n,i,r){return(n?this.dataService.product.getProductVariantsForProduct({},i.id).mapSingle(({productVariants:g})=>g.items):se([])).pipe(ye(g=>{let b=se([]);if(n){let I=new Map;for(let V of t){let M=ne(V,r)?.name,j;for(let K of g)j||K.options.map(ae=>ae.id).includes(V.id)&&(j||(j=ne(K.options.find(ae=>ae.id===V.id),r)?.name));j&&M&&I.set(j,M)}let F=[];if(I.size){let V=Array.from(I.keys());for(let M of g){let j=ne(M,r)?.name;if(!j||!V.some(ae=>j.includes(ae)))continue;let K=V.reduce((ae,oe)=>lo(ae,oe,I.get(oe)),j);F.push({id:M.id,translations:[{languageCode:r,name:K}]})}}F.length?b=this.dataService.product.updateProductVariants(F):b=se([])}return nt(t.map(I=>this.dataService.product.updateProductOption(I))).pipe(ye(()=>b))}))}deleteProductVariant(t,n){return this.dataService.product.deleteProductVariant(t).pipe(k(i=>i.deleteProductVariant.result===qe.DELETED?this.dataService.product.getProduct(n).single$:Pn(i.deleteProductVariant.message)))}static{this.\u0275fac=function(n){return new(n||e)(vt(R))}}static{this.\u0275prov=ai({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Ud=(()=>{class e extends La{constructor(t,n,i,r,m,g,b,I,F){super(t,n,i,r,m),this.route=t,this.router=n,this.serverConfigService=i,this.dataService=r,this.permissionsService=m,this.productDetailService=g,this.formBuilder=b,this.changeDetector=I,this.notificationService=F,this.autoUpdateVariantNames=!0,this.paginationSettings={},this.updatePermission=[E.UpdateCatalog,E.UpdateProduct],this.optionGroupCustomFields=this.getCustomFieldConfig("ProductOptionGroup"),this.optionCustomFields=this.getCustomFieldConfig("ProductOption")}ngOnInit(){this.optionGroups$=this.route.snapshot.data.entity.pipe(S(t=>t.optionGroups),Ee(t=>{for(let n of t)this.paginationSettings[n.id]={currentPage:1,itemsPerPage:10}})),this.detailForm=new ci({optionGroups:new Rn([])}),super.init()}getOptionGroups(){return this.detailForm.get("optionGroups").controls}getOptions(t){return t.get("options").controls}save(){if(this.detailForm.invalid||this.detailForm.pristine)return;let t=this.dataService.product.getProduct(this.id).mapSingle(n=>n.product);Z(this.entity$,this.languageCode$,t).pipe(Ge(1),ye(([{optionGroups:n},i,r])=>{let m=[],g=[];for(let b of this.getOptionGroups()){if(b.dirty){let I=n.find(F=>F.id===b.value.id);if(I){let F=this.getUpdatedOptionGroup(I,b,i);m.push(this.dataService.product.updateProductOptionGroup(F))}}for(let I of this.getOptions(b))if(I.dirty){let F=n.find(V=>V.id===b.value.id)?.options.find(V=>V.id===I.value.id);if(F){let V=this.getUpdatedOption(F,I,i);g.push(V)}}}return g.length&&m.push(this.productDetailService.updateProductOptions(g,this.autoUpdateVariantNames,r,i)),nt(m)})).subscribe(()=>{this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"ProductOptionGroup"})},n=>{this.notificationService.error("common.notify-update-error",{entity:"ProductOptionGroup"})})}getUpdatedOptionGroup(t,n,i){return Je({translatable:t,updatedFields:n.value,customFieldConfig:this.optionGroupCustomFields,languageCode:i,defaultTranslation:{languageCode:i,name:t.name||""}})}getUpdatedOption(t,n,i){return Je({translatable:t,updatedFields:n.value,customFieldConfig:this.optionCustomFields,languageCode:i,defaultTranslation:{languageCode:i,name:t.name||""}})}setFormValues(t,n){let i=this.detailForm.get("optionGroups");for(let r of t.optionGroups){let m=ne(r,n),g=this.setOptionGroupForm(r,i,m);this.setCustomFieldsForm(this.optionGroupCustomFields,g,r,m);let b=g.get("options");b||(b=this.formBuilder.array([]),g.addControl("options",b));for(let I of r.options){let F=ne(I,n),V=this.setOptionForm(I,b,F);this.setCustomFieldsForm(this.optionCustomFields,V,I,F)}}}setCustomFieldsForm(t,n,i,r){if(t.length){let m=n.get(["customFields"]);m||(m=this.formBuilder.group(t.reduce((g,b)=>fe(te({},g),{[b.name]:""}),{})),n.addControl("customFields",m)),this.setCustomFieldFormValues(t,m,i,r)}}setOptionGroupForm(t,n,i){let r={id:t.id,createdAt:t.createdAt,updatedAt:t.updatedAt,code:t.code,name:i?.name??""},m=n.controls.find(g=>g.value.id===t.id);return m?(m.get("id")?.setValue(r.id),m.get("code")?.setValue(r.code),m.get("name")?.setValue(r.name),m.get("createdAt")?.setValue(r.createdAt),m.get("updatedAt")?.setValue(r.updatedAt)):(m=this.formBuilder.group(r),n.push(m)),m}setOptionForm(t,n,i){let r={id:t.id,createdAt:t.createdAt,updatedAt:t.updatedAt,code:t.code,name:i?.name??""},m=n.controls.find(g=>g.value.id===t.id);return m?(m.get("id")?.setValue(r.id),m.get("code")?.setValue(r.code),m.get("name")?.setValue(r.name),m.get("createdAt")?.setValue(r.createdAt),m.get("updatedAt")?.setValue(r.updatedAt)):(m=this.formBuilder.group(r),n.push(m)),m}static{this.\u0275fac=function(n){return new(n||e)(P(xt),P(dt),P(ia),P(R),P(oa),P(xi),P(Ai),P(me),P(J))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-options-editor"]],standalone:!1,features:[de],decls:24,vars:17,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],[1,"flex","center"],[1,"mr-2"],["clrCheckbox","","type","checkbox","id","auto-update",3,"ngModelChange","ngModel"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["class","form",3,"formGroup",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"form",3,"formGroup"],["formGroupName","optionGroups"],[3,"formArrayName","title",4,"ngFor","ngForOf"],[3,"formArrayName","title"],[3,"entity"],[1,"form-grid"],["for","name",3,"label"],["type","text","formControlName","name",3,"id","readonly"],["for","code",3,"label"],["type","text","formControlName","code",3,"id","readonly"],["formGroupName","customFields",4,"ngIf"],["id","edit-options-list",3,"items","trackByPath","itemsPerPage","currentPage","totalItems","pageChange","itemsPerPageChange",4,"ngIf"],["formGroupName","customFields"],["entityName","ProductOptionGroup",3,"customFields","customFieldsFormGroup","readonly"],["id","edit-options-list",3,"pageChange","itemsPerPageChange","items","trackByPath","itemsPerPage","currentPage","totalItems"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault"],["id","updated-at",3,"heading","hiddenByDefault"],["id","name",3,"heading","optional"],["id","code",3,"heading","optional"],["id","custom-fields",3,"heading","hiddenByDefault"],["type","text",3,"formControl","readonly"],["type","text",3,"formControl"],["entityName","ProductOption",3,"customFields","compact","customFieldsFormGroup","readonly"]],template:function(n,i){n&1&&(s(0,"vdr-page-header"),h(1,"vdr-page-title"),s(2,"vdr-page-header-description"),f(3),c(4,"translate"),p()(),s(5,"vdr-page-body")(6,"vdr-page-block")(7,"vdr-action-bar")(8,"vdr-ab-left")(9,"vdr-language-selector",0),c(10,"async"),c(11,"async"),C("languageCodeChange",function(m){return i.setLanguage(m)}),p()(),s(12,"vdr-ab-right")(13,"div",1)(14,"div",2)(15,"clr-checkbox-wrapper")(16,"input",3),be("ngModelChange",function(m){return Ce(i.autoUpdateVariantNames,m)||(i.autoUpdateVariantNames=m),m}),p(),s(17,"label"),f(18),c(19,"translate"),p()()(),_(20,ko,3,4,"button",4),p()()()(),s(21,"vdr-page-block"),_(22,Go,3,2,"form",5),c(23,"async"),p()()),n&2&&(a(3),T(d(4,7,"catalog.page-description-options-editor")),a(6),o("availableLanguageCodes",d(10,9,i.availableLanguages$))("currentLanguageCode",d(11,11,i.languageCode$)),a(7),ve("ngModel",i.autoUpdateVariantNames),a(2),T(d(19,13,"catalog.auto-update-product-variant-name")),a(2),o("vdrIfPermissions",i.updatePermission),a(2),o("ngIf",d(23,15,i.optionGroups$)))},dependencies:[ke,Te,ot,Q,q,ut,ce,je,re,xe,at,Pt,Ie,Pe,Bt,si,Me,Be,Ae,he,ie,Ne,De,_t,ze,Ke,ka,wa,Va,Oa,ge,Ft,gt,Y,$,Qe,rt],styles:[".option-group-header[_ngcontent-%COMP%]{display:flex;align-items:baseline}"],changeDetection:0})}}return e})(),Gd=(()=>{class e{constructor(t){this.formBuilder=t,this.form=this.formBuilder.group({name:["",Ve.required],code:["",Ve.required]})}updateCode(){let t=this.form.get("name"),n=this.form.get("code");t&&n&&n.pristine&&n.setValue((0,Fe.normalizeString)(`${t.value}`,"-"))}confirm(){let{name:t,code:n}=this.form.value;!t||!n||this.resolveWith({code:n,options:[],translations:[{languageCode:this.languageCode,name:t}]})}cancel(){this.resolveWith()}static{this.\u0275fac=function(n){return new(n||e)(P(We))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-create-product-option-group-dialog"]],standalone:!1,decls:9,vars:7,consts:[["vdrDialogTitle",""],[1,"form-grid",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input"],["for","code",3,"label"],["id","code","type","text","formControlName","code"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(_(0,jo,2,3,"ng-template",0),s(1,"div",1)(2,"vdr-form-field",2),c(3,"translate"),s(4,"input",3),C("input",function(){return i.updateCode()}),p()(),s(5,"vdr-form-field",4),c(6,"translate"),h(7,"input",5),p()(),_(8,Wo,6,7,"ng-template",6)),n&2&&(a(),o("formGroup",i.form),a(),o("label",d(3,3,"common.name")),a(3),o("label",d(6,5,"common.code")))},dependencies:[ce,re,xe,Ie,Pe,he,ie,He,we,$],encapsulation:2,changeDetection:0})}}return e})(),jd=(()=>{class e{constructor(t){this.formBuilder=t,this.form=this.formBuilder.group({name:["",Ve.required],sku:[""],price:[""],options:this.formBuilder.record({})})}ngOnInit(){this.currencyCode=this.product.variants[0]?.currencyCode;for(let n of this.product.optionGroups)this.form.get("options").addControl(n.code,new mt("",Ve.required));this.form.get("options").valueChanges.subscribe(n=>{let i=this.form.get("name");if(!Object.values(n).every(g=>g==null)&&n&&i&&!i.dirty){let g=Object.entries(n).map(([b,I])=>this.product.optionGroups.find(F=>F.code===b)?.options.find(F=>F.id===I)?.name).join(" ");i.setValue(`${this.product.name} ${g}`)}Object.values(n).every(g=>g!=null)&&(this.existingVariant=this.product.variants.find(g=>Object.entries(n).every(([b,I])=>g.options.find(F=>F.groupId===this.getGroupIdFromCode(b))?.id===I)))})}confirm(){let{name:t,sku:n,options:i,price:r}=this.form.value;if(!t||!i||r==null)return;let m=Object.values(i).filter(Ot.notNullOrUndefined);this.resolveWith({productId:this.product.id,sku:n||"",price:Number(r),optionIds:m,translations:[{languageCode:this.product.languageCode,name:t}]})}cancel(){this.resolveWith()}getGroupCodeFromId(t){return this.product.optionGroups.find(n=>n.id===t)?.code??""}getGroupIdFromCode(t){return this.product.optionGroups.find(n=>n.code===t)?.id??""}static{this.\u0275fac=function(n){return new(n||e)(P(We))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-create-product-variant-dialog"]],standalone:!1,decls:17,vars:14,consts:[["vdrDialogTitle",""],[3,"formGroup"],["formGroupName","options",1,"form-grid"],[3,"label",4,"ngFor","ngForOf"],["clrAlertType","warning","class","form-grid-span",3,"clrAlertClosable",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"form-grid","mt-2"],[3,"label"],["type","text","formControlName","name"],["type","text","formControlName","sku"],["name","price","formControlName","price",3,"currencyCode"],["vdrDialogButtons",""],["bindLabel","name","bindValue","id","appendTo","body",3,"items","formControlName"],["clrAlertType","warning",1,"form-grid-span",3,"clrAlertClosable"],[1,"alert-text"],[1,"mt-2"],["clrAlertType","warning",1,"",3,"clrAlertClosable"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(_(0,qo,2,3,"ng-template",0),s(1,"form",1)(2,"div",2),_(3,Ho,2,3,"vdr-form-field",3)(4,Qo,5,4,"clr-alert",4),p(),_(5,Yo,6,6,"div",5),s(6,"div",6)(7,"vdr-form-field",7),c(8,"translate"),h(9,"input",8),p(),s(10,"vdr-form-field",7),c(11,"translate"),h(12,"input",9),p(),s(13,"vdr-form-field",7),c(14,"translate"),h(15,"vdr-currency-input",10),p()()(),_(16,Ko,6,7,"ng-template",11)),n&2&&(a(),o("formGroup",i.form),a(2),o("ngForOf",i.product.optionGroups),a(),o("ngIf",i.product.optionGroups.length===0),a(),o("ngIf",i.existingVariant),a(2),o("label",d(8,8,"common.name")),a(3),o("label",d(11,10,"catalog.sku")),a(3),o("label",d(14,12,"catalog.price")),a(2),o("currencyCode",i.currencyCode))},dependencies:[Li,$i,Ui,Q,q,ut,ce,re,xe,Ie,Pe,Bt,di,Ht,he,ie,He,we,$],encapsulation:2,changeDetection:0})}}return e})(),Wd={provide:On,useExisting:ln(()=>on),multi:!0},on=(()=>{class e{get optionValues(){return this.formValue??this.options??[]}constructor(t){this.changeDetector=t,this.groupName="",this.add=new Xe,this.remove=new Xe,this.edit=new Xe,this.disabled=!1,this.input="",this.isFocussed=!1,this.lastSelected=!1,this.editingIndex=-1}registerOnChange(t){this.onChangeFn=t}registerOnTouched(t){this.onTouchFn=t}setDisabledState(t){this.disabled=t,this.changeDetector.markForCheck()}writeValue(t){this.formValue=t||[]}focus(){this.textArea.nativeElement.focus()}editName(t,n){let i=this.optionValues[t];if(!i.locked&&!i.id){n.cancelBubble=!0,this.editingIndex=t;let r=this.nameInputs.get(t)?.nativeElement;setTimeout(()=>r?.focus())}}updateOption(t,n){let i=this.optionValues[t],r=n.target.value;i&&(r&&(i.name=r,this.edit.emit({index:t,option:i})),this.editingIndex=-1)}removeOption(t){t.locked||(this.formValue?(this.formValue=this.formValue?.filter(n=>n.name!==t.name),this.onChangeFn(this.formValue)):this.remove.emit(t))}handleKey(t){switch(t.key){case",":case"Enter":this.addOptionValue(),t.preventDefault();break;case"Backspace":this.lastSelected?(this.removeLastOption(),this.lastSelected=!1):this.input===""&&(this.lastSelected=!0);break;default:this.lastSelected=!1}}handleBlur(){this.isFocussed=!1,this.addOptionValue()}addOptionValue(){let t=this.parseInputIntoOptions(this.input).filter(n=>!(this.options??this.formValue)?.find(r=>r?.name===n.name));if(!this.formValue&&this.options)for(let n of t)this.add.emit(n);else this.formValue=(0,pe.unique)([...this.formValue,...t]),this.onChangeFn(this.formValue);this.input=""}parseInputIntoOptions(t){return t.split(/[,\n]/).map(n=>n.trim()).filter(n=>n!=="").map(n=>({name:n,locked:!1}))}removeLastOption(){if(this.optionValues.length){let t=this.optionValues[this.optionValues.length-1];this.removeOption(t)}}static{this.\u0275fac=function(n){return new(n||e)(P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-option-value-input"]],viewQuery:function(n,i){if(n&1&&(tt(zo,7),tt(Zo,5,Pi)),n&2){let r;$e(r=Ue())&&(i.textArea=r.first),$e(r=Ue())&&(i.nameInputs=r)}},inputs:{groupName:"groupName",options:"options",disabled:"disabled"},outputs:{add:"add",remove:"remove",edit:"edit"},standalone:!1,features:[Di([Wd])],decls:4,vars:5,consts:[["textArea",""],["editNameInput",""],[1,"input-wrapper",3,"click"],["class","chips",4,"ngIf"],[3,"keyup","focus","blur","ngModelChange","ngModel","disabled"],[1,"chips"],[3,"icon","selected","locked","colorFrom","iconClick",4,"ngFor","ngForOf"],[3,"iconClick","icon","colorFrom"],[3,"hidden"],["type","text",3,"blur","click","ngModel"],[1,"option-name",3,"click","hidden"]],template:function(n,i){if(n&1){let r=D();s(0,"div",2),C("click",function(){y(r);let g=W(3);return x(g.focus())}),_(1,Xo,2,1,"div",3),s(2,"textarea",4,0),C("keyup",function(g){return y(r),x(i.handleKey(g))})("focus",function(){return y(r),x(i.isFocussed=!0)})("blur",function(){return y(r),x(i.handleBlur())}),be("ngModelChange",function(g){return y(r),Ce(i.input,g)||(i.input=g),x(g)}),p()()}n&2&&(A("focus",i.isFocussed),a(),o("ngIf",0<i.optionValues.length),a(),ve("ngModel",i.input),o("disabled",i.disabled))},dependencies:[Q,q,ce,re,at,Re,ie],styles:[".input-wrapper[_ngcontent-%COMP%]{background-color:var(--color-form-input-bg);border-radius:3px!important;border:1px solid var(--color-grey-300)!important;cursor:text}.input-wrapper.focus[_ngcontent-%COMP%]{border-color:var(--color-primary-500)!important;box-shadow:0 0 1px 1px var(--color-primary-100)}.input-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{padding:5px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:var(--color-component-bg-100)}vdr-chip[_ngcontent-%COMP%]     .wrapper{margin:0 3px}vdr-chip.locked[_ngcontent-%COMP%]{opacity:.8}vdr-chip.selected[_ngcontent-%COMP%]     .wrapper{border-color:var(--color-warning-500)!important;box-shadow:0 0 1px 1px var(--color-warning-400);opacity:.6}vdr-chip[_ngcontent-%COMP%]   .option-name.editable[_ngcontent-%COMP%]:hover{outline:1px solid var(--color-component-bg-300);outline-offset:1px;border-radius:1px}vdr-chip[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0!important;margin-top:-2px;margin-bottom:-2px}"]})}}return e})(),co=class{constructor(l){for(let t of Object.keys(l))this[t]=l[t]}},qd=(()=>{class e{constructor(t,n,i,r,m,g){this.route=t,this.dataService=n,this.productDetailService=i,this.notificationService=r,this.modalService=m,this.changeDetector=g,this.formValueChanged=!1,this.optionsChanged=!1,this.itemsPerPage=100,this.currentPage=1,this.searchTermControl=new mt(""),this.selectionManager=new fa({multiSelect:!0,itemsAreEqual:(b,I)=>b.id===I.id,additiveMode:!0}),this.optionsToAddToVariant={},this.refresh$=new pt}ngOnInit(){this.languageCode=this.route.snapshot.paramMap.get("lang")||aa(),this.dataService.settings.getActiveChannel().single$.subscribe(n=>{this.currencyCode=n.activeChannel.defaultCurrencyCode});let t=this.refresh$.pipe(k(()=>this.dataService.product.getProductVariantsOptions(this.route.parent?.snapshot.paramMap.get("id")).mapSingle(n=>n.product)),Se(this.route.snapshot.data.product));this.variants$=t.pipe(k(n=>this.searchTermControl.valueChanges.pipe(Se(""),S(i=>i?n.variants.filter(r=>r.name.toLowerCase().includes(i.toLowerCase())):n.variants)))),this.optionGroups$=t.pipe(S(n=>n.optionGroups)),this.totalItems$=this.variants$.pipe(S(n=>n.length)),t.subscribe(n=>{this.product=n;let i=n.variants.map(m=>m.options.map(g=>g.id)).flat(),r=n.variants.map(m=>m.options.map(g=>g.groupId)).flat();this.optionGroups=n.optionGroups.map(m=>({id:m.id,isNew:!1,name:m.name,locked:r.includes(m.id),values:m.options.map(g=>({id:g.id,name:g.name,locked:i.includes(g.id)}))}))})}setItemsPerPage(t){this.itemsPerPage=t,this.currentPage=1}setPageNumber(t){this.currentPage=t}onFormChanged(t){this.formValueChanged=!0,t.enabled=!0}canDeactivate(){return!this.formValueChanged}addOptionGroup(){this.modalService.fromComponent(Gd,{locals:{languageCode:this.languageCode}}).pipe(k(t=>t?this.dataService.product.createProductOptionGroups(t).pipe(k(({createProductOptionGroup:n})=>this.dataService.product.addOptionGroupToProduct({optionGroupId:n.id,productId:this.product.id}))):X)).subscribe(t=>{this.notificationService.success("common.notify-create-success",{entity:"ProductOptionGroup"}),this.refresh$.next(),this.changeDetector.markForCheck()})}removeOptionGroup(t){let n=t.id,i=this.product.variants.filter(r=>r.options.map(m=>m.groupId).includes(n)).length;this.modalService.dialog({title:"catalog.confirm-delete-product-option-group",body:i?"catalog.confirm-delete-product-option-group-body":"",translationVars:{name:t.name,count:i},buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(r=>r?this.dataService.product.removeOptionGroupFromProduct({optionGroupId:n,productId:this.product.id,force:!0}):X)).subscribe(({removeOptionGroupFromProduct:r})=>{r.__typename==="Product"?(this.notificationService.success("common.notify-delete-success",{entity:"ProductOptionGroup"}),this.refresh$.next()):r.__typename==="ProductOptionInUseError"&&this.notificationService.error(r.message??"")})}addOption(t,n){let i=this.optionGroups[t];i&&i.id&&this.dataService.product.addOptionToGroup({productOptionGroupId:i.id,code:(0,Fe.normalizeString)(n,"-"),translations:[{name:n,languageCode:this.languageCode}]}).subscribe(({createProductOption:r})=>{this.notificationService.success("common.notify-create-success",{entity:"ProductOption"}),this.refresh$.next()})}removeOption(t,{id:n,name:i}){let r=this.optionGroups[t];r&&this.modalService.dialog({title:"catalog.confirm-delete-product-option",translationVars:{name:i},buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(m=>m?this.dataService.product.deleteProductOption(n):X)).subscribe(({deleteProductOption:m})=>{m.result===qe.DELETED?(this.notificationService.success("common.notify-delete-success",{entity:"ProductOption"}),r.values=r.values.filter(g=>g.id!==n),this.refresh$.next()):this.notificationService.error(m.message??"")})}setOptionToAddToVariant(t,n,i){this.optionsToAddToVariant[t]||(this.optionsToAddToVariant[t]={}),i?this.optionsToAddToVariant[t][n]=i:delete this.optionsToAddToVariant[t][n]}addOptionToVariant(t){let n=[...t.options.map(i=>i.id),...Object.values(this.optionsToAddToVariant[t.id])];this.dataService.product.updateProductVariants([{id:t.id,optionIds:(0,pe.unique)(n)}]).subscribe(({updateProductVariants:i})=>{this.refresh$.next()})}deleteVariant(t){this.modalService.dialog({title:"catalog.confirm-delete-product-variant",translationVars:{name:t.name},buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(n=>n?this.productDetailService.deleteProductVariant(t.id,this.product.id):X)).subscribe(()=>{this.notificationService.success("common.notify-delete-success",{entity:"ProductVariant"}),this.refresh$.next()},n=>{this.notificationService.error("common.notify-delete-error",{entity:"ProductVariant"})})}createNewVariant(){this.modalService.fromComponent(jd,{locals:{product:this.product}}).pipe(k(t=>t?this.dataService.product.createProductVariants([t]):X)).subscribe(t=>{this.notificationService.success("common.notify-create-success",{entity:"ProductVariant"}),this.refresh$.next()})}getOption(t,n){return t.options.find(i=>i.groupId===n)}static{this.\u0275fac=function(n){return new(n||e)(P(xt),P(R),P(xi),P(J),P(z),P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-variants-editor"]],standalone:!1,decls:44,vars:55,consts:[["optionValueInputComponent",""],["selectOption",""],["class","option-groups",4,"ngFor","ngForOf"],[1,"button","mt-1",3,"click"],["shape","plus"],[3,"paddingX"],[1,"mx-3"],[1,"button",3,"click"],["id","manage-product-variant-list",3,"pageChange","itemsPerPageChange","items","itemsPerPage","totalItems","currentPage"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault"],["id","updated-at",3,"heading","hiddenByDefault"],["id","name",3,"heading","optional"],["id","sku",3,"heading","optional"],[3,"heading","id",4,"ngFor","ngForOf"],["id","price",3,"heading","hiddenByDefault"],["id","price-with-tax",3,"heading","hiddenByDefault"],["id","delete",3,"heading","optional"],[1,"option-groups"],[3,"label"],["clrInput","","name","name",3,"ngModelChange","ngModel","readonly"],[1,"flex-spacer",3,"label"],[3,"add","remove","options","groupName","disabled"],[1,"button-small","mt-4",3,"click"],["shape","trash"],[3,"heading","id"],[3,"colorFrom",4,"ngIf","ngIfElse"],[3,"colorFrom"],[1,"flex","center"],["bindLabel","name","bindValue","id","appendTo","body",3,"change","items"],[1,"button-small","ml-1",3,"click","disabled"],["shape","floppy"],[1,"button-small",3,"click"],["shape","trash is-danger"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"vdr-card"),_(2,er,11,11,"div",2),s(3,"button",3),C("click",function(){return i.addOptionGroup()}),h(4,"clr-icon",4),f(5),c(6,"translate"),p()(),s(7,"vdr-card",5)(8,"div",6)(9,"button",7),C("click",function(){return i.createNewVariant()}),h(10,"clr-icon",4),f(11),c(12,"translate"),p()(),s(13,"vdr-data-table-2",8),c(14,"async"),c(15,"async"),C("pageChange",function(m){return i.setPageNumber(m)})("itemsPerPageChange",function(m){return i.setItemsPerPage(m)}),h(16,"vdr-dt2-search",9),c(17,"translate"),s(18,"vdr-dt2-column",10),c(19,"translate"),_(20,tr,1,1,"ng-template"),p(),s(21,"vdr-dt2-column",11),c(22,"translate"),_(23,ir,2,4,"ng-template"),p(),s(24,"vdr-dt2-column",12),c(25,"translate"),_(26,nr,2,4,"ng-template"),p(),s(27,"vdr-dt2-column",13),c(28,"translate"),_(29,ar,1,1,"ng-template"),p(),s(30,"vdr-dt2-column",14),c(31,"translate"),_(32,or,1,1,"ng-template"),p(),_(33,sr,2,2,"vdr-dt2-column",15),c(34,"async"),s(35,"vdr-dt2-column",16),c(36,"translate"),_(37,pr,2,4,"ng-template"),p(),s(38,"vdr-dt2-column",17),c(39,"translate"),_(40,dr,2,4,"ng-template"),p(),s(41,"vdr-dt2-column",18),c(42,"translate"),_(43,mr,2,0,"ng-template"),p()()()()),n&2&&(a(2),o("ngForOf",i.optionGroups),a(3),v(" ",d(6,27,"catalog.create-product-option-group")," "),a(2),o("paddingX",!1),a(4),v(" ",d(12,29,"catalog.create-product-variant")," "),a(2),o("items",d(14,31,i.variants$))("itemsPerPage",i.itemsPerPage)("totalItems",d(15,33,i.totalItems$))("currentPage",i.currentPage),a(3),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",d(17,35,"catalog.filter-by-name")),a(2),o("heading",d(19,37,"common.id"))("hiddenByDefault",!0),a(3),o("heading",d(22,39,"common.created-at"))("hiddenByDefault",!0),a(3),o("heading",d(25,41,"common.updated-at"))("hiddenByDefault",!0),a(3),o("heading",d(28,43,"catalog.name"))("optional",!1),a(3),o("heading",d(31,45,"catalog.sku"))("optional",!1),a(3),o("ngForOf",d(34,47,i.optionGroups$)),a(2),o("heading",d(36,49,"common.price"))("hiddenByDefault",!0),a(3),o("heading",d(39,51,"common.price-with-tax"))("hiddenByDefault",!0),a(3),o("heading",d(42,53,"common.delete"))("optional",!1))},dependencies:[le,Nt,Q,q,ce,re,at,di,Re,he,ie,ze,Ke,lt,ge,gt,on,Y,$,rt,Dt],styles:[".option-groups[_ngcontent-%COMP%]{display:flex;width:100%;gap:var(--space-unit)}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}"]})}}return e})(),Hd=(()=>{class e extends Ua{constructor(t,n){super(t,{__typename:"Product",id:"",createdAt:"",updatedAt:"",name:"",languageCode:"",optionGroups:[],variants:[]},i=>n.product.getProductVariantsOptions(i).mapStream(r=>r.product))}static{this.\u0275fac=function(n){return new(n||e)(vt(dt),vt(R))}}static{this.\u0275prov=ai({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Qd=e=>[{path:"products",component:Le,data:{locationId:"product-list",breadcrumb:"breadcrumb.products"},children:e.getPageTabRoutes("product-list")},{path:"inventory",redirectTo:"products"},{path:"products/:id",component:Le,data:{locationId:"product-detail",breadcrumb:{label:"breadcrumb.products",link:["../","products"]}},children:[{path:"manage-variants",component:qd,canDeactivate:[Yi],data:{breadcrumb:({product:l})=>[{label:`${l.name}`,link:["../"]},{label:"breadcrumb.manage-variants",link:["manage-variants"]}]},resolve:{product:l=>sn(R).product.getProductVariantsOptions(l.parent?.params.id).mapSingle(t=>t.product)}},...e.getPageTabRoutes("product-detail")]},{path:"products/:productId/variants/:id",component:Le,data:{locationId:"product-variant-detail",breadcrumb:{label:"breadcrumb.products",link:["../","products"]}},children:e.getPageTabRoutes("product-variant-detail")},{path:"products/:id/options",component:Ud,resolve:$a(Hd),canDeactivate:[Yi],data:{breadcrumb:Yd}},{path:"facets",component:Le,data:{locationId:"facet-list",breadcrumb:"breadcrumb.facets"},children:e.getPageTabRoutes("facet-list")},{path:"facets/:id",component:Le,data:{locationId:"facet-detail",breadcrumb:{label:"breadcrumb.facets",link:["../","facets"]}},children:e.getPageTabRoutes("facet-detail")},{path:"collections",component:Le,data:{locationId:"collection-list",breadcrumb:"breadcrumb.collections"},children:e.getPageTabRoutes("collection-list")},{path:"collections/:id",component:Le,data:{locationId:"collection-detail",breadcrumb:{label:"breadcrumb.collections",link:["../","collections"]}},children:e.getPageTabRoutes("collection-detail")},{path:"assets",component:Le,data:{locationId:"asset-list",breadcrumb:"breadcrumb.assets"},children:e.getPageTabRoutes("asset-list")},{path:"assets/:id",component:Le,data:{locationId:"asset-detail",breadcrumb:{label:"breadcrumb.assets",link:["../","assets"]}},children:e.getPageTabRoutes("asset-detail")}];function Yd(e,l){return e.entity.pipe(S(t=>[{label:"breadcrumb.products",link:["../","products"]},{label:`${t.name}`,link:["../","products",l.id]},{label:"breadcrumb.product-options",link:["options"]}]))}var Co=(()=>{class e{constructor(t){this.changeDetector=t,this.selectedValues=[]}ngAfterViewInit(){setTimeout(()=>this.selector.focus(),0)}selectValues(){this.resolveWith(this.selectedValues)}cancel(){this.resolveWith()}static{this.\u0275fac=function(n){return new(n||e)(P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-apply-facet-dialog"]],viewQuery:function(n,i){if(n&1&&tt(Yt,5),n&2){let r;$e(r=Ue())&&(i.selector=r.first)}},standalone:!1,decls:3,vars:0,consts:[["vdrDialogTitle",""],[3,"selectedValuesChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(_(0,ur,2,3,"ng-template",0),s(1,"vdr-facet-value-selector",1),C("selectedValuesChange",function(m){return i.selectedValues=m}),p(),_(2,_r,6,7,"ng-template",2))},dependencies:[Yt,He,we,$],encapsulation:2,changeDetection:0})}}return e})(),gu=ee`
    query AssetDetailQuery($id: ID!) {
        asset(id: $id) {
            ...Asset
            tags {
                ...Tag
            }
        }
    }
    ${ji}
    ${Jn}
`,Kd=(()=>{class e extends St{constructor(t,n,i){super(),this.notificationService=t,this.dataService=n,this.formBuilder=i,this.customFields=this.getCustomFieldConfig("Asset"),this.detailForm=new Vn({name:new mt(""),tags:new mt([]),customFields:this.formBuilder.group(ct(this.customFields))})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}onAssetChange(t){this.detailForm.get("name")?.setValue(t.name),this.detailForm.get("tags")?.setValue(t.tags),this.detailForm.markAsDirty()}save(){this.dataService.product.updateAsset({id:this.id,name:this.detailForm.value.name,tags:this.detailForm.value.tags,customFields:this.detailForm.value.customFields}).subscribe(()=>{this.notificationService.success("common.notify-update-success",{entity:"Asset"})},t=>{this.notificationService.error("common.notify-update-error",{entity:"Asset"})})}setFormValues(t,n){this.detailForm.get("name")?.setValue(t.name),this.detailForm.get("tags")?.setValue(t.tags.map(i=>i.id)),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),t)}static{this.\u0275fac=function(n){return new(n||e)(P(J),P(R),P(Ai))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-asset-detail"]],standalone:!1,features:[de],decls:10,vars:8,consts:[["locationId","asset-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"assetChange","asset","editable","customFields","customFieldsForm"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"vdr-action-bar"),h(2,"vdr-ab-left"),s(3,"vdr-ab-right"),h(4,"vdr-action-bar-items",0),_(5,fr,3,4,"button",1),h(6,"vdr-action-bar-dropdown-menu",0),p()()(),s(7,"vdr-page-block")(8,"vdr-asset-preview",2),c(9,"async"),C("assetChange",function(m){return i.onAssetChange(m)}),p()()),n&2&&(a(5),o("vdrIfPermissions",U(7,gr)),a(3),o("asset",d(9,5,i.entity$))("editable",!0)("customFields",i.customFields)("customFieldsForm",i.detailForm.get("customFields")))},dependencies:[Me,Be,Ae,Ze,ba,De,Ye,ge,Y,$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}"],changeDetection:0})}}return e})(),zd=(()=>{class e extends Ga{constructor(t,n,i,r,m){super(r,m),this.notificationService=t,this.modalService=n,this.dataService=i,this.searchTerm$=new _e(void 0),this.filterByTags$=new _e(void 0),this.uploading=!1,super.setQueryFn((...g)=>this.dataService.product.getAssetList(...g).refetchOnChannelChange(),g=>g.assets,(g,b)=>{let I=this.searchTerm$.value,F=this.filterByTags$.value?.map(V=>V.value);return{options:fe(te({skip:g,take:b},I?{filter:{name:{contains:I}}}:{}),{sort:{createdAt:$n.DESC},tags:F,tagsOperator:Ut.AND})}},{take:25,skip:0})}ngOnInit(){super.ngOnInit(),this.paginationConfig$=Z(this.itemsPerPage$,this.currentPage$,this.totalItems$).pipe(S(([t,n,i])=>({itemsPerPage:t,currentPage:n,totalItems:i}))),this.searchTerm$.pipe(it(250),yt(this.destroy$)).subscribe(()=>this.refresh()),this.filterByTags$.pipe(yt(this.destroy$)).subscribe(()=>this.refresh()),this.allTags$=this.dataService.product.getTagList().mapStream(t=>t.tags.items)}filesSelected(t){t.length&&(this.uploading=!0,this.dataService.product.createAssets(t).pipe(Oi(()=>this.uploading=!1)).subscribe(({createAssets:n})=>{let i=0;for(let r of n)switch(r.__typename){case"Asset":i++;break;case"MimeTypeError":this.notificationService.error(r.message);break}0<i&&(super.refresh(),this.notificationService.success("asset.notify-create-assets-success",{count:i}))}))}deleteAssets(t){this.showModalAndDelete(t.map(n=>n.id)).pipe(k(n=>n.result===qe.DELETED?[!0]:this.showModalAndDelete(t.map(i=>i.id),n.message||"").pipe(S(i=>i.result===qe.DELETED)))).subscribe(()=>{this.notificationService.success("common.notify-delete-success",{entity:"Assets"}),this.refresh()},n=>{this.notificationService.error("common.notify-delete-error",{entity:"Assets"})})}showModalAndDelete(t,n){return this.modalService.dialog({title:"catalog.confirm-delete-assets",translationVars:{count:t.length},body:n,buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(i=>i?this.dataService.product.deleteAssets(t,!!n):X),S(i=>i.deleteAssets))}static{this.\u0275fac=function(n){return new(n||e)(P(J),P(z),P(R),P(dt),P(xt))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-asset-list"]],standalone:!1,features:[de],decls:17,vars:30,consts:[[1,"my-2"],[3,"searchTermChange","tagsChange","tags"],["dropZoneTarget",".content-area",3,"selectFiles","uploading"],[3,"deleteAssets","assets","multiSelect","canDelete"],[1,"paging-controls"],[3,"itemsPerPageChange","itemsPerPage"],[3,"pageChange","currentPage","itemsPerPage","totalItems"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"div",0)(2,"vdr-asset-search-input",1),c(3,"async"),C("searchTermChange",function(m){return i.searchTerm$.next(m)})("tagsChange",function(m){return i.filterByTags$.next(m)}),s(4,"vdr-asset-file-input",2),C("selectFiles",function(m){return i.filesSelected(m)}),p()()(),s(5,"vdr-asset-gallery",3),c(6,"async"),c(7,"async"),c(8,"paginate"),c(9,"hasPermission"),C("deleteAssets",function(m){return i.deleteAssets(m)}),p(),s(10,"div",4)(11,"vdr-items-per-page-controls",5),c(12,"async"),C("itemsPerPageChange",function(m){return i.setItemsPerPage(m)}),p(),s(13,"vdr-pagination-controls",6),c(14,"async"),c(15,"async"),c(16,"async"),C("pageChange",function(m){return i.setPageNumber(m)}),p()()()),n&2&&(a(2),o("tags",d(3,9,i.allTags$)),a(2),o("uploading",i.uploading),a(),o("assets",O(8,15,d(6,11,i.items$),d(7,13,i.paginationConfig$)||U(28,hr)))("multiSelect",!0)("canDelete",d(9,18,U(29,vr))),a(6),o("itemsPerPage",d(12,20,i.itemsPerPage$)),a(2),o("currentPage",d(14,22,i.currentPage$))("itemsPerPage",d(15,24,i.itemsPerPage$))("totalItems",d(16,26,i.totalItems$)))},dependencies:[ha,ui,_i,va,xa,ge,Y,Lt,Qe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}vdr-asset-gallery[_ngcontent-%COMP%]{flex:1}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}.search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"]})}}return e})(),yi=(()=>{class e{get isProductVariantMode(){return this.productVariantIds!=null}constructor(t,n){this.dataService=t,this.notificationService=n,this.priceFactorControl=new It(1),this.selectedChannelIdControl=new It}ngOnInit(){let t=this.dataService.client.userStatus().mapSingle(({userStatus:i})=>i.activeChannelId),n=this.dataService.settings.getChannels().mapSingle(i=>i.channels);Z(t,n).subscribe(([i,r])=>{this.currentChannel=r.items.find(m=>m.id===i),this.availableChannels=r.items}),this.selectedChannelIdControl.valueChanges.subscribe(i=>{this.selectChannel(i)}),this.variantsPreview$=Z(ri(this.getTopVariants(10)),this.priceFactorControl.valueChanges.pipe(Se(1))).pipe(S(([i,r])=>i.map(m=>({id:m.id,name:m.name,price:m.price,pricePreview:m.price*+r}))))}selectChannel(t){this.selectedChannel=this.availableChannels.find(n=>n.id===t[0])}assign(){let t=this.selectedChannel;t&&(this.isProductVariantMode?this.productVariantIds&&this.dataService.product.assignVariantsToChannel({channelId:t.id,productVariantIds:this.productVariantIds,priceFactor:+this.priceFactorControl.value}).subscribe(()=>{this.notificationService.success("catalog.assign-variant-to-channel-success",{channel:t.code,count:this.productVariantIds.length}),this.resolveWith(!0)}):this.dataService.product.assignProductsToChannel({channelId:t.id,productIds:this.productIds,priceFactor:+this.priceFactorControl.value}).subscribe(()=>{this.notificationService.success("catalog.assign-product-to-channel-success",{channel:t.code,count:this.productIds.length}),this.resolveWith(!0)}))}cancel(){this.resolveWith()}getTopVariants(t){return rn(this,null,function*(){return(yield Vi(this.dataService.product.getProductVariants({filterOperator:Ut.OR,filter:{productId:{in:this.productIds},id:{in:this.productVariantIds}},take:t}).single$)).productVariants.items})}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(J))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-assign-products-to-channel-dialog"]],standalone:!1,decls:36,vars:32,consts:[["noSelection",""],["productModeTitle",""],["noChannelSelected",""],["vdrDialogTitle",""],[1,"flex"],["clrInput","",3,"multiple","includeDefaultChannel","disableChannelIds","formControl"],[1,"flex-spacer"],["clrInput","","type","number","min","0","max","99999",3,"formControl"],[1,"channel-price-preview"],[1,"clr-control-label"],[1,"table"],[3,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["vdrDialogButtons",""],[4,"ngIf","ngIfElse"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){if(n&1&&(_(0,xr,3,2,"ng-template",3),s(1,"div",4)(2,"clr-input-container")(3,"label"),f(4),c(5,"translate"),p(),h(6,"vdr-channel-assignment-control",5),p(),h(7,"div",6),s(8,"clr-input-container")(9,"label"),f(10),c(11,"translate"),p(),h(12,"input",7),p()(),s(13,"div",8)(14,"label",9),f(15),c(16,"translate"),p(),s(17,"table",10)(18,"thead")(19,"tr")(20,"th"),f(21),c(22,"translate"),p(),s(23,"th"),f(24),c(25,"channelCodeToLabel"),c(26,"translate"),c(27,"translate"),p(),s(28,"th"),_(29,Ir,2,6,"ng-template",11)(30,Pr,2,3,"ng-template",null,0,H),p()()(),s(32,"tbody"),_(33,Fr,10,7,"tr",12),c(34,"async"),p()()(),_(35,Or,7,6,"ng-template",13)),n&2){let r=W(31);a(4),T(d(5,13,"common.channel")),a(2),o("multiple",!1)("includeDefaultChannel",!1)("disableChannelIds",i.currentChannelIds)("formControl",i.selectedChannelIdControl),a(4),T(d(11,15,"catalog.price-conversion-factor")),a(2),o("formControl",i.priceFactorControl),a(3),T(d(16,17,"catalog.channel-price-preview")),a(6),T(d(22,19,"common.name")),a(3),v(" ",O(27,25,"catalog.price-in-channel",G(30,mo,d(26,23,d(25,21,i.currentChannel==null?null:i.currentChannel.code))))," "),a(5),o("ngIf",i.selectedChannel)("ngIfElse",r),a(4),o("ngForOf",d(34,28,i.variantsPreview$))}},dependencies:[ke,Nt,Ni,Q,q,ce,Rt,re,pi,kn,Pt,ie,He,we,Ia,Y,$,qi,Dt],styles:["vdr-channel-assignment-control[_ngcontent-%COMP%]{min-width:200px}.channel-price-preview[_ngcontent-%COMP%]{margin-top:24px}.channel-price-preview[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%]{margin-top:6px}"],changeDetection:0})}}return e})(),Zd=ee`
    query GetProductsWithFacetValuesByIds($ids: [String!]!) {
        products(options: { filter: { id: { in: $ids } } }) {
            items {
                id
                name
                facetValues {
                    id
                    name
                    code
                    facet {
                        id
                        name
                        code
                    }
                }
            }
        }
    }
`,Jd=ee`
    query GetVariantsWithFacetValuesByIds($ids: [String!]!) {
        productVariants(options: { filter: { id: { in: $ids } } }) {
            items {
                id
                name
                sku
                facetValues {
                    id
                    name
                    code
                    facet {
                        id
                        name
                        code
                    }
                }
            }
        }
    }
`,Xd=ee`
    mutation UpdateProductsBulk($input: [UpdateProductInput!]!) {
        updateProducts(input: $input) {
            id
            name
            facetValues {
                id
                name
                code
            }
        }
    }
`,em=ee`
    mutation UpdateVariantsBulk($input: [UpdateProductVariantInput!]!) {
        updateProductVariants(input: $input) {
            id
            name
            facetValues {
                id
                name
                code
            }
        }
    }
`,bo=(()=>{class e{constructor(t,n){this.dataService=t,this.changeDetectorRef=n,this.mode="product",this.state="loading",this.selectedValues=[],this.items=[],this.facetValuesRemoved=!1}ngOnInit(){let t=this.mode==="product"?this.dataService.query(Zd,{ids:this.ids??[]}).mapSingle(({products:n})=>n.items.map(i=>fe(te({},i),{facetValues:[...i.facetValues]}))):this.dataService.query(Jd,{ids:this.ids??[]}).mapSingle(({productVariants:n})=>n.items.map(i=>fe(te({},i),{facetValues:[...i.facetValues]})));this.subscription=t.subscribe({next:n=>{this.items=n,this.state="ready",this.changeDetectorRef.markForCheck()}})}ngOnDestroy(){this.subscription?.unsubscribe()}cancel(){this.resolveWith()}removeFacetValue(t,n){t.facetValues=t.facetValues.filter(i=>i.id!==n),this.facetValuesRemoved=!0}addFacetValues(){let t=this.selectedValues.map(i=>i.id);return this.state="saving",(this.mode==="product"?this.dataService.mutate(Xd,{input:this.items?.map(i=>({id:i.id,facetValueIds:(0,pe.unique)([...i.facetValues.map(r=>r.id),...t])}))}):this.dataService.mutate(em,{input:this.items?.map(i=>({id:i.id,facetValueIds:(0,pe.unique)([...i.facetValues.map(r=>r.id),...t])}))})).subscribe(i=>{this.resolveWith(this.selectedValues)})}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-bulk-add-facet-values-dialog"]],standalone:!1,decls:11,vars:5,consts:[["placeholder",""],["vdrDialogTitle",""],[1,"flex"],[1,"flex","center"],[1,"mr2"],[3,"selectedValuesChange"],["class","table",4,"ngIf","ngIfElse"],["vdrDialogButtons",""],[1,"table"],[4,"ngFor","ngForOf"],[1,"left","align-middle"],["class","sku",4,"ngIf"],[1,"left"],[3,"facetValue","remove",4,"ngFor","ngForOf"],[1,"sku"],[3,"remove","facetValue"],[1,"loading"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){if(n&1){let r=D();_(0,Vr,2,3,"ng-template",1),s(1,"div",2)(2,"div",3)(3,"div",4),f(4),c(5,"translate"),p(),s(6,"vdr-facet-value-selector",5),C("selectedValuesChange",function(g){return y(r),x(i.selectedValues=g)}),p()()(),_(7,Br,3,1,"table",6)(8,Ar,2,0,"ng-template",null,0,H)(10,Mr,6,7,"ng-template",7)}if(n&2){let r=W(9);a(4),v(" ",d(5,3,"catalog.add-facet-value")," "),a(3),o("ngIf",i.state!=="loading")("ngIfElse",r)}},dependencies:[Mn,Q,q,Yt,Qt,He,we,$],styles:[".loading[_ngcontent-%COMP%]{min-height:25vh;display:flex;justify-content:center;align-items:center}.sku[_ngcontent-%COMP%]{color:var(--color-text-300)}"],changeDetection:0})}}return e})(),yo=(()=>{class e{constructor(t,n,i){this.route=t,this.router=n,this.dataService=i,this.previewUpdatedFilters=!1,this.filterTermControl=new It(""),this.isLoading=!1,this.collectionIdChange$=new _e(""),this.parentIdChange$=new _e(""),this.filterChanges$=new _e([]),this.inheritFiltersChanges$=new _e(!0),this.refresh$=new _e(!0),this.destroy$=new pt}ngOnInit(){this.contentsCurrentPage$=this.route.queryParamMap.pipe(S(g=>g.get("contentsPage")),S(g=>g?+g:1),Se(1),ue()),this.contentsItemsPerPage$=this.route.queryParamMap.pipe(S(g=>g.get("contentsPerPage")),S(g=>g?+g:10),Se(10),ue());let t=this.filterTermControl.valueChanges.pipe(it(250),Ee(()=>this.setContentsPageNumber(1)),Se("")),n=this.filterChanges$.asObservable().pipe(li(()=>this.previewUpdatedFilters),Ee(()=>this.setContentsPageNumber(1)),Se([])),i=this.inheritFiltersChanges$.asObservable().pipe(li(()=>this.inheritFilters!=null),ue(),Ee(()=>this.setContentsPageNumber(1)),Se(!0)),m=Z(this.collectionIdChange$,this.parentIdChange$,this.contentsCurrentPage$,this.contentsItemsPerPage$,t,n,i,this.refresh$).pipe(yt(this.destroy$),Ee(()=>this.isLoading=!0),it(50),k(([g,b,I,F,V,M,j])=>{let K=F,ae=(I-1)*F;if(M.length&&this.previewUpdatedFilters){let oe=V?{name:{contains:V}}:void 0;return this.dataService.collection.previewCollectionVariants({parentId:b,filters:M,inheritFilters:j},{take:K,skip:ae,filter:oe}).mapSingle(ft=>ft.previewCollectionVariants).pipe(xn(()=>se({items:[],totalItems:0})))}else return g?this.dataService.collection.getCollectionContents(g,K,ae,V).mapSingle(oe=>oe.collection?.productVariants):se(null)}),Ee(()=>this.isLoading=!1),Oi(()=>this.isLoading=!1));this.contents$=m.pipe(S(g=>g?g.items:[])),this.contentsTotalItems$=m.pipe(S(g=>g?g.totalItems:0))}ngOnChanges(t){"collectionId"in t&&this.collectionIdChange$.next(t.collectionId.currentValue),"parentId"in t&&this.parentIdChange$.next(t.parentId.currentValue),"inheritFilters"in t&&this.inheritFiltersChanges$.next(t.inheritFilters.currentValue),"updatedFilters"in t&&this.updatedFilters&&this.filterChanges$.next(this.updatedFilters)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setContentsPageNumber(t){this.setParam("contentsPage",t)}setContentsItemsPerPage(t){this.setParam("contentsPerPage",t)}refresh(){this.refresh$.next(!0)}setParam(t,n){this.router.navigate(["./"],{relativeTo:this.route,queryParams:{[t]:n},queryParamsHandling:"merge",replaceUrl:!0})}static{this.\u0275fac=function(n){return new(n||e)(P(xt),P(dt),P(R))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-collection-contents"]],contentQueries:function(n,i,r){if(n&1&&fn(r,pn,7),n&2){let m;$e(m=Ue())&&(i.headerTemplate=m.first)}},inputs:{collectionId:"collectionId",parentId:"parentId",inheritFilters:"inheritFilters",updatedFilters:"updatedFilters",previewUpdatedFilters:"previewUpdatedFilters"},standalone:!1,features:[Ct],decls:27,vars:46,consts:[[1,"table-wrapper"],[1,"progress","loop"],[1,"header-title-row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","collection-contents",3,"pageChange","itemsPerPageChange","items","itemsPerPage","totalItems","currentPage"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault"],["id","updated-at",3,"heading","hiddenByDefault"],["id","name",3,"heading","optional"],["id","sku",3,"heading","optional"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"]],template:function(n,i){n&1&&(s(0,"div",0),h(1,"div",1),s(2,"div",2),_(3,$r,1,0,"ng-container",3),c(4,"async"),p(),s(5,"vdr-data-table-2",4),c(6,"async"),c(7,"async"),c(8,"async"),c(9,"async"),C("pageChange",function(m){return i.setContentsPageNumber(m)})("itemsPerPageChange",function(m){return i.setContentsItemsPerPage(m)}),h(10,"vdr-dt2-search",5),c(11,"translate"),s(12,"vdr-dt2-column",6),c(13,"translate"),_(14,Ur,1,1,"ng-template"),p(),s(15,"vdr-dt2-column",7),c(16,"translate"),_(17,Gr,2,4,"ng-template"),p(),s(18,"vdr-dt2-column",8),c(19,"translate"),_(20,jr,2,4,"ng-template"),p(),s(21,"vdr-dt2-column",9),c(22,"translate"),_(23,Wr,4,4,"ng-template"),p(),s(24,"vdr-dt2-column",10),c(25,"translate"),_(26,qr,1,1,"ng-template"),p()()()),n&2&&(a(),A("visible",i.isLoading),a(2),o("ngTemplateOutlet",i.headerTemplate)("ngTemplateOutletContext",G(44,Nr,d(4,22,i.contentsTotalItems$))),a(2),A("loading",i.isLoading),o("items",d(6,24,i.contents$))("itemsPerPage",d(7,26,i.contentsItemsPerPage$))("totalItems",d(8,28,i.contentsTotalItems$))("currentPage",d(9,30,i.contentsCurrentPage$)),a(5),o("searchTermControl",i.filterTermControl)("searchTermPlaceholder",d(11,32,"catalog.filter-by-name")),a(2),o("heading",d(13,34,"common.id"))("hiddenByDefault",!0),a(3),o("heading",d(16,36,"common.created-at"))("hiddenByDefault",!0),a(3),o("heading",d(19,38,"common.updated-at"))("hiddenByDefault",!0),a(3),o("heading",d(22,40,"common.name"))("optional",!1),a(3),o("heading",d(25,42,"catalog.sku"))("optional",!1))},dependencies:[le,Si,Oe,ze,Ke,lt,Y,$,rt],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     table{margin-top:-1px}vdr-data-table[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s}vdr-data-table.loading[_ngcontent-%COMP%]{opacity:.5}.table-wrapper[_ngcontent-%COMP%]{position:relative}.progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden;height:6px;opacity:0;transition:opacity .1s}.progress.visible[_ngcontent-%COMP%]{opacity:1}.sku[_ngcontent-%COMP%]{color:var(--color-text-200)}"],changeDetection:0})}}return e})(),xo=(()=>{class e extends ze{constructor(t,n){super(t,n),this.changeDetectorRef=t,this.dataService=n,this.changeOrder=new Xe,this.dragRefs=[],this.absoluteIndex={},this.sortPredicate=(i,r)=>this.dropList.getSortedItems()[i]?.data.collection.parentId===r.data.collection.parentId}ngOnChanges(t){if(super.ngOnChanges(t),t.subCollections||t.items){let n=[];for(let i of this.items??[]){n.push(i);let r=this.getSubcollections(i);n.push(...r.flat())}n.forEach((i,r)=>this.absoluteIndex[i.id]=r)}}ngAfterViewInit(){this.collectionRowList.changes.subscribe(t=>{this.dropList.getSortedItems().forEach(n=>this.dropList.removeItem(n));for(let n of t.toArray())n.dropContainer=this.dropList,n._dragRef._withDropContainer(this.dropList._dropListRef),this.dropList.addItem(n)})}getSubcollections(t){return this.subCollections?.filter(n=>n.parentId===t.id)??[]}onDrop(t){let n=t.item.data.collection.breadcrumbs.length===2,i=n?(this.currentPage-1)*this.itemsPerPage:0,r=t.item.data.collection.parentId,m=this.items.findIndex(b=>b.id===r),g=i+t.currentIndex-m-1;if(this.changeOrder.emit({collectionId:t.item.data.collection.id,index:g,parentId:t.item.data.collection.parentId}),n)this.items=[...this.items],this.items.splice(t.previousIndex,1),this.items.splice(t.currentIndex,0,t.item.data.collection);else{let b=this.items.find(I=>I.id===r);if(b){let I=this.getSubcollections(b),F=i+t.previousIndex-m-1;I.splice(F,1),I.splice(t.currentIndex,0,t.item.data.collection)}}this.changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||e)(P(me),P(R))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-collection-data-table"]],viewQuery:function(n,i){if(n&1&&(tt(Mt,7),tt(Hr,5,At)),n&2){let r;$e(r=Ue())&&(i.dropList=r.first),$e(r=Ue())&&(i.collectionRowList=r)}},inputs:{subCollections:"subCollections"},outputs:{changeOrder:"changeOrder"},standalone:!1,features:[de,Ct],ngContentSelectors:Yr,decls:25,vars:27,consts:[["collectionRowTmp",""],["collectionRow",""],["defaultComponent",""],[3,"filters","dataTableId",4,"ngIf"],[1,"table-wrapper"],[1,"bulk-actions"],[1,""],[1,"heading-row"],["class","selection-col",4,"ngIf"],[3,"expand",4,"ngFor","ngForOf"],[1,"column-picker"],[3,"reorder","resetColumns","uiLanguage","columns"],[4,"ngIf"],["cdkDropList","","cdkDropListLockAxis","y",3,"cdkDropListDropped","cdkDropListSortPredicate"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-footer"],[3,"itemsPerPage","itemsPerPageChange",4,"ngIf"],["class","p5 total-items-count",4,"ngIf"],[3,"id","currentPage","itemsPerPage","totalItems","pageChange",4,"ngIf"],[3,"filters","dataTableId"],[1,"selection-col"],[1,"flex"],[1,"drag-handle-spacer"],["type","checkbox","clrCheckbox","",3,"change","checked"],[1,"cell-content",3,"ngClass"],["api","dataTable","display","block",3,"locationId","metadata","topPx","leftPx"],["class","sort-toggle",4,"ngIf"],[1,"sort-toggle"],[3,"click"],["shape","two-way-arrows left",4,"ngIf"],["shape","arrow up",4,"ngIf"],["shape","arrow down",4,"ngIf"],["class","sort-label",4,"ngIf"],["shape","two-way-arrows left"],["shape","arrow up"],["shape","arrow down"],[1,"sort-label"],[1,"filter-row"],[1,"button-ghost","toggle-search-filter-row",3,"click","title"],["shape","search"],[1,"filter-row-wrapper"],[4,"ngTemplateOutlet"],[1,"filters"],["class","mt-1",3,"filterWithValue","filters",4,"ngFor","ngForOf"],["class","mt-1",3,"filters",4,"ngIf"],[1,"mt-1",3,"filterWithValue","filters"],[1,"mt-1",3,"filters"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"emptyStateLabel"],[3,"itemsPerPageChange","itemsPerPage"],[1,"p5","total-items-count"],[3,"pageChange","id","currentPage","itemsPerPage","totalItems"],["cdkDrag","","cdkDragBoundary","tbody",3,"cdkDragData"],["class","selection-col",3,"active",4,"ngIf"],[3,"active",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["cdkDragHandle","",1,"drag-handle",3,"title"],["shape","drag-handle"],["type","checkbox","clrCheckbox","",3,"click","checked"],[4,"ngIf","ngIfElse"],[4,"ngComponentOutlet","ngComponentOutletInputs","ngComponentOutletInjector"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){if(n&1){let r=D();_n(Qr),_(0,el,1,2,"vdr-data-table-filter-presets",3),s(1,"div",4)(2,"div",5),gn(3),p(),s(4,"table",6)(5,"thead")(6,"tr",7),_(7,tl,4,1,"th",8)(8,ll,6,9,"th",9),s(9,"th")(10,"div",10)(11,"vdr-data-table-colum-picker",11),c(12,"async"),C("reorder",function(g){return y(r),x(i.onColumnReorder(g))})("resetColumns",function(){return y(r),x(i.onColumnsReset())}),p()()()(),_(13,ul,9,13,"tr",12),p(),s(14,"tbody",13),C("cdkDropListDropped",function(g){return y(r),x(i.onDrop(g))}),_(15,_l,2,5,"ng-container",14),c(16,"paginate"),N(17),_(18,gl,3,2,"tr",12),L(),p()()(),s(19,"div",15),_(20,fl,1,1,"vdr-items-per-page-controls",16)(21,hl,3,8,"div",17)(22,vl,1,4,"vdr-pagination-controls",18),p(),_(23,Fl,6,9,"ng-template",null,0,H)}n&2&&(o("ngIf",i.filters),a(4),A("no-select",i.disableSelect),a(),A("items-selected",i.selectionManager==null?null:i.selectionManager.selection.length),a(2),o("ngIf",i.selectionManager),a(),o("ngForOf",i.visibleSortedColumns),a(3),o("uiLanguage",d(12,17,i.uiLanguage$))("columns",i.sortedColumns),a(2),o("ngIf",i.searchComponent||i.customSearchTemplate||(i.filters==null?null:i.filters.length)),a(),o("cdkDropListSortPredicate",i.sortPredicate),a(),o("ngForOf",O(16,19,i.items,vn(22,Kr,i.itemsPerPage,i.currentPage,i.totalItems,i.id)))("ngForTrackBy",i.trackByFn.bind(i)),a(3),o("ngIf",!(i.items!=null&&i.items.length)),a(2),o("ngIf",i.totalItems),a(),o("ngIf",i.totalItems),a(),o("ngIf",i.totalItems))},dependencies:[le,Te,wt,bn,Q,q,Si,Mt,At,Mi,ui,_i,ie,Ta,pa,Da,Fa,Sa,Ea,Y,Lt,$],styles:["[_nghost-%COMP%]{display:block;max-width:100%;position:relative;margin-bottom:calc(var(--space-unit) * 4);container-type:inline-size}th[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-table-header-border);color:var(--color-weight-700);font-size:var(--font-size-xs);font-weight:600;text-transform:uppercase;position:relative;white-space:nowrap;background-color:transparent}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:calc(var(--space-unit) * 1.5) calc(var(--space-unit) * 1);color:var(--color-text-100)}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-of-type, tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-of-type{text-align:center}@media screen and (min-width: 992px){tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-of-type, tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-of-type{padding-inline-start:var(--surface-margin-left);text-align:start}}th[_ngcontent-%COMP%]:last-of-type, td[_ngcontent-%COMP%]:last-of-type{border-inline-end:1px solid var(--color-table-header-border)}tr[_ngcontent-%COMP%]:first-of-type   th[_ngcontent-%COMP%]:last-of-type{border-image:linear-gradient(0deg,var(--color-table-header-border),transparent) 1}tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%]:last-of-type{border-image:linear-gradient(180deg,var(--color-table-header-border),transparent) 1}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-table-row-separator)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--color-table-row-hover-bg)}.bulk-actions[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * 5);background-color:var(--color-surface-bg);z-index:10;display:flex;position:absolute;top:5px;height:40px}@media screen and (min-width: 992px){.bulk-actions[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * 8.5)}}@media screen and (min-width: 1280px){.bulk-actions[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * 10.5)}}.table-wrapper[_ngcontent-%COMP%]{display:block;overflow-y:hidden;overflow-x:auto;position:relative;width:100%;max-width:var(--surface-width)}table[_ngcontent-%COMP%]{width:100%}table.no-select[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.column-picker[_ngcontent-%COMP%]{width:24px}.sort-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;margin-inline-start:calc(var(--space-unit) * .5)}.sort-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;border-radius:var(--border-radius-lg);color:var(--color-weight-500);padding:0 2px;cursor:pointer;background-color:transparent}.sort-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--color-primary-700)}.sort-toggle[_ngcontent-%COMP%]   .sort-label[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * .5);font-size:10px;color:var(--color-primary-600);font-weight:400}.toggle-search-filter-row[_ngcontent-%COMP%]{position:absolute;top:-12px;left:4px}@media screen and (min-width: 1280px){.toggle-search-filter-row[_ngcontent-%COMP%]{left:8px}}.toggle-search-filter-row.active[_ngcontent-%COMP%]{background-color:var(--color-primary-700);color:var(--color-primary-100);border-color:var(--color-primary-700)}th.filter-row[_ngcontent-%COMP%]{position:relative;font-size:var(--font-size-base);font-weight:400;background-color:var(--color-weight-100);box-shadow:var(--data-table-filter-box-shadow);border-left-width:0;border-right-width:0;text-align:initial;padding:0}th.filter-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}th.filter-row.active[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-table-header-border)}th.filter-row[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{margin-top:calc(var(--space-unit) * 1);display:flex;flex-wrap:wrap;gap:calc(var(--space-unit) * .5)}.filter-row-wrapper[_ngcontent-%COMP%]{padding:calc(var(--space-unit) * 4);padding-inline-start:0;max-height:150px;transition:max-height .2s,padding .2s,opacity .2s}.filter-row-wrapper.hidden[_ngcontent-%COMP%]{max-height:0px;padding-top:0;padding-bottom:0;overflow:hidden;opacity:0}.cell-link[_ngcontent-%COMP%]{display:block;width:100%;height:100%}td.active[_ngcontent-%COMP%]{background-color:var(--color-table-row-active-bg)}.cell-content[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:var(--font-size-sm);color:var(--color-weight-700)}.cell-content.left[_ngcontent-%COMP%]{justify-content:flex-start}.cell-content.center[_ngcontent-%COMP%]{justify-content:center}.cell-content.right[_ngcontent-%COMP%]{justify-content:flex-end}.selection-col[_ngcontent-%COMP%]{width:calc(var(--space-unit) * 8)}vdr-empty-placeholder[_ngcontent-%COMP%]{width:100%}.table-footer[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-top:var(--space-unit);margin-inline-start:var(--surface-margin-left);margin-inline-end:var(--space-unit)}.total-items-count[_ngcontent-%COMP%]{font-size:var(--font-size-xs)}@container (max-width: 500px){.total-items-count[_ngcontent-%COMP%]{display:none}}",".bulk-actions[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * 6);background-color:var(--color-surface-bg)}@media screen and (min-width: 992px){.bulk-actions[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * 9.5)}}@media screen and (min-width: 1280px){.bulk-actions[_ngcontent-%COMP%]{margin-inline-start:calc(var(--space-unit) * 11.5)}}.drag-handle[_ngcontent-%COMP%]{cursor:grab}.drag-handle-spacer[_ngcontent-%COMP%]{width:16px}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{opacity:0}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--color-primary-100)!important}"],changeDetection:0})}}return e})(),fu=ee`
    query CollectionDetailQuery($id: ID!) {
        collection(id: $id) {
            ...Collection
        }
    }
    ${ta}
`,tm=(()=>{class e extends St{constructor(t,n,i,r,m,g){super(),this.changeDetector=t,this.dataService=n,this.formBuilder=i,this.notificationService=r,this.modalService=m,this.localStorageService=g,this.customFields=this.getCustomFieldConfig("Collection"),this.detailForm=this.formBuilder.group({name:["",Ve.required],slug:["",Ji(/^[\p{Letter}0-9._-]+$/u)],description:"",visible:!1,inheritFilters:!0,filters:this.formBuilder.array([]),customFields:this.formBuilder.group(ct(this.customFields))}),this.assetChanges={},this.filters=[],this.allFilters=[],this.livePreview=!1,this.updatePermission=[E.UpdateCatalog,E.UpdateCollection],this.filterRemoved$=new pt,this.livePreview=this.localStorageService.get("livePreviewCollectionContents")??!1}ngOnInit(){this.init(),this.dataService.collection.getCollectionFilters().single$.subscribe(i=>{this.allFilters=i.collectionFilters});let t=this.detailForm.get("filters"),n=this.detailForm.get("inheritFilters");this.inheritFilters$=n.valueChanges.pipe(ue()),this.updatedFilters$=Fn(t.statusChanges,this.filterRemoved$).pipe(it(200),li(()=>t.touched),S(()=>this.mapOperationsToInputs(this.filters,t.value).filter(i=>{for(let r of i.arguments)if(r.value==="")return!1;return!0}))),this.parentId$=this.route.paramMap.pipe(S(i=>i.get("parentId")||void 0),k(i=>i?se(i):this.entity$.pipe(S(r=>r.parent?.id))))}ngOnDestroy(){this.destroy()}getFilterDefinition(t){return this.allFilters.find(n=>n.code===t.code)}assetsChanged(){return!!Object.values(this.assetChanges).length}updateSlug(t){let n=this.detailForm.get(["slug"]),i=this.entity?ne(this.entity,this.languageCode):void 0,r=!i||!i.slug;n&&n.pristine&&r&&n.setValue((0,Fe.normalizeString)(`${t}`,"-"))}addFilter(t){let n=this.detailForm.get("filters"),i=t.args.reduce((r,m)=>fe(te({},r),{[m.name]:Hi(m.value)}),{});n.push(this.formBuilder.control({code:t.code,args:i})),this.filters.push({code:t.code,args:t.args.map(r=>({name:r.name,value:Hi(r.value)}))})}removeFilter(t){let n=this.detailForm.get("filters");t!==-1&&(n.removeAt(t),n.markAsDirty(),n.markAsTouched(),this.filters.splice(t,1),this.filterRemoved$.next())}create(){if(!this.detailForm.dirty)return;let t=this.getUpdatedCollection({id:"",createdAt:"",updatedAt:"",languageCode:this.languageCode,name:"",slug:"",isPrivate:!1,breadcrumbs:[],description:"",featuredAsset:null,assets:[],translations:[],inheritFilters:!0,filters:[],parent:{},children:null},this.detailForm,this.languageCode),n=this.route.snapshot.paramMap.get("parentId");n&&(t.parentId=n),this.dataService.collection.createCollection(t).subscribe(i=>{this.notificationService.success("common.notify-create-success",{entity:"Collection"}),this.assetChanges={},this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",i.createCollection.id],{relativeTo:this.route})},i=>{this.notificationService.error("common.notify-create-error",{entity:"Collection"})})}save(){Z(this.entity$,this.languageCode$).pipe(Ge(1),ye(([t,n])=>{let i=this.getUpdatedCollection(t,this.detailForm,n);return this.dataService.collection.updateCollection(i)})).subscribe(()=>{this.assetChanges={},this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"Collection"}),this.contentsComponent.refresh()},t=>{this.notificationService.error("common.notify-update-error",{entity:"Collection"})})}canDeactivate(){return super.canDeactivate()&&!this.assetChanges.assets&&!this.assetChanges.featuredAsset}toggleLivePreview(){this.livePreview=!this.livePreview,this.localStorageService.set("livePreviewCollectionContents",this.livePreview)}trackByFn(t,n){return JSON.stringify(n)}setFormValues(t,n){let i=ne(t,n);this.detailForm.patchValue({name:i?i.name:"",slug:i?i.slug:"",description:i?i.description:"",visible:!t.isPrivate,inheritFilters:t.inheritFilters});let r=this.detailForm.get("filters");r.length!==t.filters.length&&(r.clear(),this.filters=[],t.filters.forEach(m=>this.addFilter(m))),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),t,i)}getUpdatedCollection(t,n,i){let r=Je({translatable:t,updatedFields:n.value,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:t.name||"",slug:t.slug||"",description:t.description||""}});return fe(te({},r),{assetIds:this.assetChanges.assets?.map(m=>m.id),featuredAssetId:this.assetChanges.featuredAsset?.id,isPrivate:!n.value.visible,filters:this.mapOperationsToInputs(this.filters,this.detailForm.value.filters)})}mapOperationsToInputs(t,n){return t.map((i,r)=>({code:i.code,arguments:Object.entries(n[r].args).map(([m,g],b)=>({name:m,value:ua(g)}))}))}static{this.\u0275fac=function(n){return new(n||e)(P(me),P(R),P(We),P(J),P(z),P(na))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-collection-detail"]],viewQuery:function(n,i){if(n&1&&tt(Sl,5),n&2){let r;$e(r=Ue())&&(i.contentsComponent=r.first)}},standalone:!1,features:[de],decls:74,vars:89,consts:[["updateButton",""],["private",""],["noInherit",""],["collectionContents",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","collection-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","visibility",3,"label"],["type","checkbox","clrToggle","","formControlName","visible","id","visibility",3,"vdrDisabled"],[1,"visible-toggle"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","slug",3,"label","errors"],["id","slug","type","text","formControlName","slug",3,"readonly"],["for","slug",1,"form-grid-span",3,"label"],["formControlName","description",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","collection-detail",3,"entity$","detailForm"],[3,"title"],[3,"change","assets","featuredAsset","updatePermissions"],["for","inheritFilters",3,"label"],["type","checkbox","clrToggle","","formControlName","inheritFilters","id","inheritFilters",3,"vdrDisabled"],["formArrayName","filters"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"vdrIfPermissions"],[3,"title","paddingX"],[3,"collectionId","parentId","updatedFilters","inheritFilters","previewUpdatedFilters"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["role","navigation"],[1,"collection-breadcrumbs"],[4,"ngFor","ngForOf"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["formGroupName","customFields",3,"title"],["entityName","Collection",3,"customFields","customFieldsFormGroup","readonly"],[3,"remove","position","operation","operationDefinition","formControlName","readonly"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["shape","ellipsis-vertical"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],[1,"ml-3"],[1,"contents-title"],["type","checkbox","clrCheckbox","",3,"ngModelChange","ngModelOptions","disabled","ngModel"]],template:function(n,i){if(n&1){let r=D();s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",4),c(4,"async"),c(5,"async"),c(6,"async"),C("languageCodeChange",function(g){return y(r),x(i.setLanguage(g))}),p()(),s(7,"vdr-ab-right"),h(8,"vdr-action-bar-items",5),_(9,kl,3,4,"button",6),c(10,"async"),_(11,Rl,1,1,"ng-template",null,0,H),h(13,"vdr-action-bar-dropdown-menu",5),p()()(),s(14,"form",7)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar")(17,"vdr-card")(18,"vdr-form-field",8),c(19,"translate"),s(20,"clr-toggle-wrapper"),h(21,"input",9),c(22,"hasPermission"),s(23,"label",10),_(24,Bl,3,3,"ng-container",11)(25,Al,2,3,"ng-template",null,1,H),p()()()(),_(27,Ml,2,1,"vdr-card",12),c(28,"async"),p(),_(29,Gl,4,1,"vdr-page-block",12),c(30,"async"),s(31,"vdr-page-block")(32,"vdr-card")(33,"div",13)(34,"vdr-form-field",14),c(35,"translate"),s(36,"input",15),c(37,"hasPermission"),C("input",function(g){return y(r),x(i.updateSlug(g.target.value))}),p()(),s(38,"vdr-form-field",16),c(39,"translate"),c(40,"translate"),h(41,"input",17),c(42,"hasPermission"),p(),s(43,"vdr-form-field",18),c(44,"translate"),h(45,"vdr-rich-text-editor",19),c(46,"hasPermission"),p()()(),_(47,jl,4,8,"vdr-card",20),h(48,"vdr-custom-detail-component-host",21),s(49,"vdr-card",22),c(50,"translate"),s(51,"vdr-assets",23),C("change",function(g){return y(r),x(i.assetChanges=g)}),p()(),s(52,"vdr-card",22),c(53,"translate"),s(54,"vdr-form-field",24),c(55,"translate"),s(56,"clr-toggle-wrapper"),h(57,"input",25),c(58,"hasPermission"),s(59,"label",10),_(60,Wl,3,3,"ng-container",11)(61,ql,2,3,"ng-template",null,2,H),p()()(),s(63,"div",26),_(64,Hl,3,7,"ng-container",27),p(),_(65,Yl,10,4,"div",28),p(),s(66,"vdr-card",29),c(67,"translate"),s(68,"vdr-collection-contents",30,3),c(70,"async"),c(71,"async"),c(72,"async"),_(73,Kl,10,18,"ng-template"),p()()()()()}if(n&2){let r=W(12),m=W(26),g=W(62);a(3),o("disabled",d(4,41,i.isNew$))("availableLanguageCodes",d(5,43,i.availableLanguages$))("currentLanguageCode",d(6,45,i.languageCode$)),a(6),o("ngIf",d(10,47,i.isNew$))("ngIfElse",r),a(5),o("formGroup",i.detailForm),a(4),o("label",d(19,49,"catalog.visibility")),a(3),o("vdrDisabled",!d(22,51,i.updatePermission)),a(3),o("ngIf",i.detailForm.value.visible)("ngIfElse",m),a(3),o("ngIf",d(28,53,i.entity$)),a(2),o("ngIf",d(30,55,i.entity$)),a(5),o("label",d(35,57,"common.name")),a(2),o("readonly",!d(37,59,i.updatePermission)),a(2),o("label",d(39,61,"catalog.slug"))("errors",G(87,en,d(40,63,"catalog.slug-pattern-error"))),a(3),o("readonly",!d(42,65,i.updatePermission)),a(2),o("label",d(44,67,"common.description")),a(2),o("readonly",!d(46,69,i.updatePermission)),a(2),o("ngIf",i.customFields.length),a(),o("entity$",i.entity$)("detailForm",i.detailForm),a(),o("title",d(50,71,"catalog.assets")),a(2),o("assets",i.entity==null?null:i.entity.assets)("featuredAsset",i.entity==null?null:i.entity.featuredAsset)("updatePermissions",i.updatePermission),a(),o("title",d(53,73,"catalog.filters")),a(2),o("label",d(55,75,"catalog.filter-inheritance")),a(3),o("vdrDisabled",!d(58,77,i.updatePermission)),a(3),o("ngIf",i.detailForm.value.inheritFilters)("ngIfElse",g),a(4),o("ngForOf",i.filters)("ngForTrackBy",i.trackByFn),a(),o("vdrIfPermissions",i.updatePermission),a(),o("title",d(67,79,"common.contents"))("paddingX",!1),a(2),o("collectionId",i.id)("parentId",d(70,81,i.parentId$))("updatedFilters",d(71,83,i.updatedFilters$))("inheritFilters",d(72,85,i.inheritFilters$))("previewUpdatedFilters",i.livePreview)}},dependencies:[le,ke,Te,ot,Q,q,ut,ce,je,re,xe,at,Ie,Pe,Bt,si,Oe,Me,Be,Ae,Ze,fi,_a,he,ie,Ne,Qi,Gt,jt,Wt,Tt,De,Ye,qt,_t,Jt,ge,Ft,Kt,zt,gt,yo,Y,$,Qe],styles:['@charset "UTF-8";.visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}clr-checkbox-wrapper[_ngcontent-%COMP%]{transition:opacity .3s}clr-checkbox-wrapper.disabled[_ngcontent-%COMP%]{opacity:.5}.collection-breadcrumbs[_ngcontent-%COMP%]{list-style-type:none;background-color:var(--color-component-bg-200);padding:2px 6px;margin-bottom:6px;border-radius:var(--clr-global-borderradius)}.collection-breadcrumbs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.65rem;display:inline-block;margin-inline-end:10px}.collection-breadcrumbs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-weight:600}.collection-breadcrumbs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:"\\203a";top:0;color:var(--color-grey-400);margin-inline-start:10px}'],changeDetection:0})}}return e})(),Io=(()=>{class e{transform(t){return t?.breadcrumbs.slice(1,-1)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275pipe=mn({name:"collectionBreadcrumb",type:e,pure:!0,standalone:!1})}}return e})(),im=(()=>{class e{constructor(t,n){this.dataService=t,this.i18nService=n,this.searchTermControl=new mt(""),this.currentPage$=new _e(1),this.itemsPerPage$=new _e(10),this.expandedIds$=new pt,this.expandedIds=[]}ngOnInit(){let t=this.dataService.collection.getCollections(),n=this.searchTermControl.valueChanges.pipe(it(250),ue(),Se("")),i=this.currentPage$.pipe(ue()),r=this.itemsPerPage$.pipe(ue());Z(n,i,r).subscribe(([g,b,I])=>{let F=g==="";t.ref.refetch({options:{skip:(b-1)*I,take:I,filter:{name:{contains:g}},topLevelOnly:F}})});let m=this.dataService.collection.getCollections({take:1,topLevelOnly:!0}).mapSingle(g=>g.collections.items[0].parentId);this.items$=Z(t.mapStream(({collections:g})=>g),m).pipe(S(([g,b])=>[...b?[{id:b,name:this.i18nService.translate("catalog.root-collection"),slug:"",parentId:"__",position:0,featuredAsset:null,children:[],breadcrumbs:[],isPrivate:!1,createdAt:"",updatedAt:""}]:[],...g.items])),this.totalItems$=t.mapStream(g=>g.collections.totalItems),this.subCollections$=this.expandedIds$.pipe(Ee(g=>this.expandedIds=g),k(g=>g.length?this.dataService.collection.getCollections({take:999,filter:{parentId:{in:g}}}).mapStream(b=>b.collections.items):se([])))}toggleExpanded(t){let n=this.expandedIds;n.includes(t.id)?n=n.filter(i=>i!==t.id):n.push(t.id),this.expandedIds$.next(n)}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(ra))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-move-collections-dialog"]],standalone:!1,decls:21,vars:33,consts:[["vdrDialogTitle",""],["id","move-collection-list",1,"mt-2",3,"pageChange","itemsPerPageChange","items","subCollections","itemsPerPage","totalItems","currentPage"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","name",3,"heading","optional"],["id","breadcrumb",3,"heading"],["id","slug",3,"heading"],[3,"ngClass"],["class","child-arrow","shape","child-arrow",3,"transparent",4,"ngIf"],["class","icon-button folder-button",3,"click",4,"ngIf"],["class","icon-button folder-button","disabled","",4,"ngIf"],[1,"button-ghost",3,"click"],["shape","child-arrow",1,"child-arrow"],[1,"icon-button","folder-button",3,"click"],["shape","folder",4,"ngIf"],["shape","folder-open",4,"ngIf"],["shape","folder"],["shape","folder-open"],["disabled","",1,"icon-button","folder-button"],["shape","folder",1,"is-solid"],[1,"breadcrumb"],[4,"ngIf"],["class","separator",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"separator"]],template:function(n,i){n&1&&(_(0,Zl,2,3,"ng-template",0),s(1,"vdr-collection-data-table",1),c(2,"async"),c(3,"async"),c(4,"async"),c(5,"async"),c(6,"async"),C("pageChange",function(m){return i.currentPage$.next(m)})("itemsPerPageChange",function(m){return i.itemsPerPage$.next(m)}),h(7,"vdr-dt2-search",2),c(8,"translate"),s(9,"vdr-dt2-column",3),c(10,"translate"),_(11,Jl,1,1,"ng-template"),p(),s(12,"vdr-dt2-column",4),c(13,"translate"),_(14,ac,8,10,"ng-template"),p(),s(15,"vdr-dt2-column",5),c(16,"translate"),_(17,sc,3,3,"ng-template"),p(),s(18,"vdr-dt2-column",6),c(19,"translate"),_(20,pc,1,1,"ng-template"),p()()),n&2&&(a(),o("items",d(2,13,i.items$))("subCollections",d(3,15,i.subCollections$))("itemsPerPage",d(4,17,i.itemsPerPage$))("totalItems",d(5,19,i.totalItems$))("currentPage",d(6,21,i.currentPage$)),a(6),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",d(8,23,"common.search-by-name")),a(2),o("heading",d(10,25,"common.id"))("hiddenByDefault",!0),a(3),o("heading",d(13,27,"common.name"))("optional",!1),a(3),o("heading",d(16,29,"common.breadcrumb")),a(3),o("heading",d(19,31,"common.slug")))},dependencies:[le,wt,Q,q,we,Ke,lt,xo,Y,$,Io],styles:["[_nghost-%COMP%]{--indent-spacing: 18px}.indent-1[_ngcontent-%COMP%]{padding-inline-start:var(--indent-spacing)}.indent-2[_ngcontent-%COMP%]{padding-inline-start:calc(var(--indent-spacing) * 2)}.indent-3[_ngcontent-%COMP%]{padding-inline-start:calc(var(--indent-spacing) * 3)}.indent-4[_ngcontent-%COMP%], .indent-5[_ngcontent-%COMP%], .indent-6[_ngcontent-%COMP%], .indent-7[_ngcontent-%COMP%], .indent-8[_ngcontent-%COMP%], .indent-9[_ngcontent-%COMP%]{padding-inline-start:calc(var(--indent-spacing) * 4)}.child-arrow[_ngcontent-%COMP%]{margin:1px 6px}.child-arrow.transparent[_ngcontent-%COMP%]{opacity:0}.breadcrumb[_ngcontent-%COMP%]{display:flex}.separator[_ngcontent-%COMP%]{color:var(--color-weight-500);margin:0 3px}"],changeDetection:0})}}return e})(),nm=zi({location:"collection-list",requiresPermission:e=>e.includes(E.DeleteCollection)||e.includes(E.DeleteCatalog),getItemName:e=>e.name,bulkDelete:(e,l)=>e.collection.deleteCollections(l).pipe(S(t=>t.deleteCollections))}),am={location:"collection-list",label:"catalog.move-collections",icon:"drag-handle",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateCollection),onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{let i=e.get(z),r=e.get(R),m=e.get(J);i.fromComponent(im,{size:"xl",closable:!0}).pipe(k(g=>{if(g){let b=l.map(I=>({collectionId:I.id,parentId:g.id,index:0}));return r.collection.moveCollection(b)}else return X})).subscribe(g=>{m.success("catalog.move-collections-success",{count:l.length}),n(),t.refresh()})}},om=Zi({location:"collection-list",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateCollection),getItemName:e=>e.name,bulkAssignToChannel:(e,l,t)=>t.map(n=>e.collection.assignCollectionsToChannel({collectionIds:l,channelId:n}).pipe(S(i=>i.assignCollectionsToChannel)))}),rm=ii({location:"collection-list",requiresPermission:e=>e.includes(E.DeleteCatalog)||e.includes(E.DeleteCollection),getItemName:e=>e.name,bulkRemoveFromChannel:(e,l,t)=>e.collection.removeCollectionsFromChannel({channelId:t,collectionIds:l}).pipe(S(n=>n.removeCollectionsFromChannel))}),lm={location:"collection-list",label:"common.duplicate",icon:"copy",onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{e.get(z).fromComponent(Ci,{locals:{entities:l,entityName:"Collection",title:"catalog.duplicate-collections",getEntityName:r=>r.name}}).subscribe(r=>{r&&(n(),t.refresh())})}},cm=(()=>{class e extends ei{constructor(t,n){super(),this.dataService=t,this.notificationService=n,this.expandedIds=[],this.dataTableListId="collection-list",this.customFields=this.getCustomFieldConfig("Collection"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"slug",label:"common.slug",type:{kind:"text"},filterField:"slug"}).addFilter({name:"visibility",type:{kind:"boolean"},label:"common.visibility",toFilterInput:i=>({isPrivate:{eq:!i}})}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("position","ASC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"slug"}).addSort({name:"position"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:zn,getItems:i=>i.collections,setVariables:(i,r)=>{let m=this.searchTermControl.value===""&&this.filters.activeFilters.length===0?!0:void 0;return{options:{skip:i,take:r,filter:te({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),topLevelOnly:m,sort:this.sorts.createSortInput()}}},refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}ngOnInit(){super.ngOnInit(),this.activeCollectionId$=this.route.paramMap.pipe(S(n=>n.get("contents")),ue());let t=this.route.queryParamMap.pipe(S(n=>n.get("expanded")),ue(),S(n=>n?n.split(","):[]));t.pipe(yt(this.destroy$)).subscribe(n=>{this.expandedIds=n}),this.subCollections$=Z(t,this.refresh$).pipe(k(([n])=>n.length?this.dataService.collection.getCollections({take:999,filter:{parentId:{in:n}}}).mapStream(i=>i.collections.items):se([]))),this.activeCollectionTitle$=Z(this.activeCollectionId$,this.items$,this.subCollections$).pipe(S(([n,i,r])=>{if(n){let m=[...i,...r].find(g=>g.id===n);return m?m.name:""}return""})),this.activeCollectionIndex$=Z(this.activeCollectionId$,this.items$,this.subCollections$).pipe(S(([n,i,r])=>{if(n){let m=[];for(let g of i){m.push(g);let b=r.filter(I=>I.parentId&&I.parentId===g.id);m.push(...b)}return m.findIndex(g=>g.id===n)}return-1}))}onRearrange(t){this.dataService.collection.moveCollection([t]).subscribe({next:()=>{this.notificationService.success("common.notify-saved-changes"),this.refresh()},error:n=>{this.notificationService.error("common.notify-save-changes-error")}})}closeContents(){let t=te({},this.route.snapshot.params);delete t.contents,this.router.navigate(["./",t],{relativeTo:this.route,queryParamsHandling:"preserve"})}setLanguage(t){this.dataService.client.setContentLanguage(t).subscribe()}toggleExpanded(t){let n=this.expandedIds;n.includes(t.id)?n=n.filter(i=>i!==t.id):n.push(t.id),this.router.navigate(["./"],{queryParams:{expanded:n.filter(i=>!!i).join(",")},queryParamsHandling:"merge",relativeTo:this.route})}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(J))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-collection-list"]],standalone:!1,features:[de],decls:15,vars:14,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","collection-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"closeClicked","rightPanelOpen"],["vdrSplitViewLeft",""],["vdrSplitViewRight","",3,"splitViewTitle"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"mt-2",3,"pageChange","itemsPerPageChange","changeOrder","visibleColumnsChange","id","items","subCollections","itemsPerPage","totalItems","currentPage","filters","activeIndex"],["locationId","collection-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","position",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","breadcrumb",3,"heading"],["id","slug",3,"heading","sort"],["id","visibility",3,"heading"],["id","view-contents",3,"heading","optional"],[3,"customField","sorts",4,"ngFor","ngForOf"],[3,"ngClass"],["class","child-arrow","shape","child-arrow",3,"transparent",4,"ngIf"],["class","icon-button folder-button",3,"click",4,"ngIf"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["shape","child-arrow",1,"child-arrow"],[1,"icon-button","folder-button",3,"click"],["shape","folder",4,"ngIf"],["shape","folder-open",4,"ngIf"],["shape","folder"],["shape","folder-open"],[1,"breadcrumb"],[4,"ngIf"],["class","separator",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"separator"],["colorType","warning",4,"ngIf"],["colorType","success",4,"ngIf"],["colorType","warning"],["colorType","success"],["queryParamsHandling","merge",1,"button-small","bg-weight-150",3,"routerLink","queryParams"],["shape","file-group"],[3,"customField","sorts"],[3,"collectionId"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),c(4,"async"),c(5,"async"),C("languageCodeChange",function(m){return i.setLanguage(m)}),p()(),s(6,"vdr-ab-right"),h(7,"vdr-action-bar-items",1),_(8,mc,4,5,"a",2),h(9,"vdr-action-bar-dropdown-menu",1),p()()(),s(10,"vdr-split-view",3),c(11,"async"),C("closeClicked",function(){return i.closeContents()}),_(12,wc,38,65,"ng-template",4)(13,Bc,2,3,"ng-template",5),c(14,"async"),p()),n&2&&(a(3),o("availableLanguageCodes",d(4,5,i.availableLanguages$))("currentLanguageCode",d(5,7,i.contentLanguage$)),a(5),o("vdrIfPermissions",U(13,go)),a(2),o("rightPanelOpen",d(11,9,i.activeCollectionId$)),a(3),o("splitViewTitle",d(14,11,i.activeCollectionTitle$)))},dependencies:[le,wt,Q,q,Oe,Me,Be,Ae,Ze,Re,Ne,De,Ye,Zt,Ke,lt,Xt,Aa,Ra,Ba,ge,yo,xo,Y,$,rt,Io],styles:[Ac],changeDetection:0})}}return e})(),tn=(()=>{class e{constructor(){this.allMoveListItems=[],this._rearrange$=new pt,this._delete$=new pt,this.rearrange$=this._rearrange$.asObservable(),this.delete$=this._delete$.asObservable()}ngOnDestroy(){this._rearrange$.complete(),this._delete$.complete()}setCollectionTree(t){this.collectionTree=t}resetMoveList(){this.allMoveListItems=[]}getMoveListItems(t){return this.allMoveListItems.length===0&&(this.allMoveListItems=this.calculateAllMoveListItems()),this.allMoveListItems.filter(n=>n.id!==t.id&&!n.ancestorIdPath.has(t.id)&&n.id!==t.parent?.id)}onDrop(t){let n=t.item.data,r=t.container.data.id;if(r==null)throw new Error("Could not determine the ID of the root Collection");this._rearrange$.next({collectionId:n.id,parentId:r,index:t.currentIndex})}onMove(t){this._rearrange$.next(t)}onDelete(t){this._delete$.next(t)}calculateAllMoveListItems(){let t=(n,i,r,m)=>{let g=i.concat(n.name);return m.push({path:g.slice(1).join(" / ")||"root",id:n.id,ancestorIdPath:r}),n.children.forEach(b=>t(b,g,new Set([...r,n.id]),m)),m};return t(this.collectionTree,[],new Set,[])}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=ai({token:e,factory:e.\u0275fac})}}return e})(),sm=(()=>{class e{constructor(t,n,i,r,m,g){this.parent=t,this.dataService=n,this.collectionTreeService=i,this.router=r,this.route=m,this.changeDetectorRef=g,this.depth=0,this.expandAll=!1,this.moveListItems=[],t&&(this.depth=t.depth+1)}ngOnInit(){this.parentName=this.collectionTree.name||"<root>";let t=this.dataService.client.userStatus().mapStream(n=>n.userStatus.permissions).pipe(bt(1));this.hasUpdatePermission$=t.pipe(S(n=>n.includes(E.UpdateCatalog)||n.includes(E.UpdateCollection))),this.hasDeletePermission$=t.pipe(S(n=>n.includes(E.DeleteCatalog)||n.includes(E.DeleteCollection))),this.subscription=this.selectionManager?.selectionChanges$.subscribe(()=>this.changeDetectorRef.markForCheck())}ngOnChanges(t){let n=t.expandAll;n&&n.previousValue===!0&&n.currentValue===!1&&this.collectionTree.children.forEach(i=>i.expanded=!1)}ngOnDestroy(){this.subscription?.unsubscribe()}trackByFn(t,n){return n.id}toggleExpanded(t){t.expanded=!t.expanded;let n=this.route.snapshot.queryParamMap.get("expanded")?.split(",")??[];t.expanded?n.push(t.id):n=n.filter(i=>i!==t.id),this.router.navigate(["./"],{queryParams:{expanded:n.filter(i=>!!i).join(",")},queryParamsHandling:"merge",relativeTo:this.route})}getMoveListItems(t){this.moveListItems=this.collectionTreeService.getMoveListItems(t)}move(t,n){this.collectionTreeService.onMove({index:0,parentId:n,collectionId:t.id})}moveUp(t,n){t.parent&&this.collectionTreeService.onMove({index:n-1,parentId:t.parent.id,collectionId:t.id})}moveDown(t,n){t.parent&&this.collectionTreeService.onMove({index:n+1,parentId:t.parent.id,collectionId:t.id})}drop(t){Bn(this.collectionTree.children,t.previousIndex,t.currentIndex),this.collectionTreeService.onDrop(t)}delete(t){this.collectionTreeService.onDelete(t)}static{this.\u0275fac=function(n){return new(n||e)(P(e,12),P(R),P(tn),P(dt),P(xt),P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-collection-tree-node"]],inputs:{collectionTree:"collectionTree",activeCollectionId:"activeCollectionId",expandAll:"expandAll",selectionManager:"selectionManager"},standalone:!1,features:[Ct],decls:4,vars:6,consts:[["dropList",""],["folderSpacer",""],["cdkDropList","",1,"tree-node",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],["class","collection","cdkDrag","",3,"private","cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"collection",3,"cdkDragData"],[1,"collection-detail",3,"ngClass"],["type","checkbox","clrCheckbox","",3,"click","checked"],[1,"name"],["class","icon-button folder-button",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"flex-spacer"],[4,"ngIf"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","edit"],["class","drag-handle","cdkDragHandle","",4,"vdrIfPermissions"],["vdrDropdownTrigger","",1,"icon-button",3,"click"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["class","dropdown-item",3,"routerLink",4,"vdrIfPermissions"],[1,"dropdown-divider"],["type","button","vdrDropdownItem","",3,"click","disabled"],["shape","caret up"],["shape","caret down"],[1,"dropdown-header"],["type","button","vdrDropdownItem","",3,"disabled","click",4,"ngFor","ngForOf"],["vdrDropdownItem","",1,"button",3,"click","disabled"],["shape","trash",1,"is-danger"],[3,"expandAll","collectionTree","activeCollectionId","selectionManager",4,"ngIf"],[1,"icon-button","folder-button",3,"click","disabled"],["shape","folder",4,"ngIf"],["shape","folder-open",4,"ngIf"],["shape","folder"],["shape","folder-open"],[1,"folder-button-spacer"],["cdkDragHandle","",1,"drag-handle"],["shape","drag-handle","size","24"],[1,"dropdown-item",3,"routerLink"],["shape","plus"],[1,"move-to-item"],[1,"move-icon"],["shape","child-arrow"],[1,"path"],[3,"expandAll","collectionTree","activeCollectionId","selectionManager"]],template:function(n,i){if(n&1){let r=D();s(0,"div",2,0),c(2,"async"),C("cdkDropListDropped",function(g){return y(r),x(i.drop(g))}),_(3,zc,47,52,"div",3),p()}n&2&&(o("cdkDropListData",i.collectionTree)("cdkDropListDisabled",!d(2,4,i.hasUpdatePermission$)),a(3),o("ngForOf",i.collectionTree.children)("ngForTrackBy",i.trackByFn))},dependencies:[le,Te,wt,Q,q,Oe,Mt,At,Mi,Re,ie,Gt,jt,Wt,Tt,De,e,Y,$],styles:["[_nghost-%COMP%]{display:block}.collection[_ngcontent-%COMP%]{background-color:var(--clr-table-bgcolor);border-radius:var(--clr-global-borderradius);font-size:.65rem;transition:transform .25s cubic-bezier(0,0,.2,1);margin-bottom:2px;border-inline-start:2px solid transparent;transition:border-left-color .2s}.collection.private[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--color-component-border-100)}.collection[_ngcontent-%COMP%]   .collection-detail.active[_ngcontent-%COMP%]{background-color:var(--clr-global-selection-color)}.collection[_ngcontent-%COMP%]   .collection-detail.depth-1[_ngcontent-%COMP%]{padding-inline-start:36px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-2[_ngcontent-%COMP%]{padding-inline-start:60px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-3[_ngcontent-%COMP%]{padding-inline-start:84px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-4[_ngcontent-%COMP%]{padding-inline-start:108px}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]   .folder-button-spacer[_ngcontent-%COMP%]{display:inline-block;width:28px}.tree-node[_ngcontent-%COMP%]{display:block;background-color:var(--clr-table-bgcolor);border-radius:var(--clr-global-borderradius);overflow:hidden}.tree-node.cdk-drop-list-dragging[_ngcontent-%COMP%] > .collection[_ngcontent-%COMP%]{border-left-color:var(--color-primary-300)}.drag-placeholder[_ngcontent-%COMP%]{min-height:120px;background-color:var(--color-component-bg-300);transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.move-to-item[_ngcontent-%COMP%]{display:flex;white-space:normal;align-items:baseline}.move-to-item[_ngcontent-%COMP%]   .move-icon[_ngcontent-%COMP%]{flex:none;margin-inline-end:3px}.move-to-item[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{line-height:18px}"],changeDetection:0})}}return e})();function pm(e,l,t=[]){let n=[],i={},r=dm(l);for(let g of e)i[g.id]=fe(te({},g),{children:[]});for(let g of e.map(b=>b.id))if(i.hasOwnProperty(g)){let b=i[g];b.expanded=r.get(g)?.expanded??t.includes(g);let I=b.parent;if(!I)continue;!i[I.id]?n.push(b):i[I.id]?i[I.id].children.push(b):i[I.id]={children:[b]}}return{id:n.length?n[0].parent.id:void 0,children:n}}function dm(e){let l=new Map;function t(n){l.set(n.id,n),n.children.forEach(t)}return e&&t(e),l}var hu=(()=>{class e{constructor(t){this.collectionTreeService=t,this.expandAll=!1,this.expandedIds=[],this.rearrange=new Xe,this.deleteCollection=new Xe}ngOnChanges(t){"collections"in t&&this.collections&&(this.collectionTree=pm(this.collections,this.collectionTree,this.expandedIds),this.collectionTreeService.setCollectionTree(this.collectionTree),this.collectionTreeService.resetMoveList())}ngOnInit(){this.collectionTreeService.rearrange$.subscribe(t=>this.rearrange.emit(t)),this.collectionTreeService.delete$.subscribe(t=>this.deleteCollection.emit(t))}static{this.\u0275fac=function(n){return new(n||e)(P(tn))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-collection-tree"]],inputs:{collections:"collections",activeCollectionId:"activeCollectionId",expandAll:"expandAll",expandedIds:"expandedIds",selectionManager:"selectionManager"},outputs:{rearrange:"rearrange",deleteCollection:"deleteCollection"},standalone:!1,features:[Di([tn]),Ct],decls:1,vars:1,consts:[["cdkDropListGroup","",3,"expandAll","collectionTree","selectionManager","activeCollectionId",4,"ngIf"],["cdkDropListGroup","",3,"expandAll","collectionTree","selectionManager","activeCollectionId"]],template:function(n,i){n&1&&_(0,Zc,1,4,"vdr-collection-tree-node",0),n&2&&o("ngIf",i.collectionTree)},dependencies:[q,An,sm],encapsulation:2,changeDetection:0})}}return e})(),vu=(()=>{class e{constructor(){this.variants=[]}confirm(){this.resolveWith(!0)}cancel(){this.resolveWith()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-confirm-variant-deletion-dialog"]],standalone:!1,decls:6,vars:4,consts:[["vdrDialogTitle",""],[4,"ngFor","ngForOf"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(n,i){n&1&&(_(0,Jc,2,3,"ng-template",0),f(1),c(2,"translate"),s(3,"ul"),_(4,Xc,2,2,"li",1),p(),_(5,es,6,6,"ng-template",2)),n&2&&(a(),v(`
`,d(2,2,"catalog.confirm-deletion-of-unused-variants-body"),`
`),a(3),o("ngForOf",i.variants))},dependencies:[Q,He,we,$],encapsulation:2,changeDetection:0})}}return e})(),mm=(()=>{class e{constructor(t){this.formBuilder=t,this.form=this.formBuilder.group({name:["",Ve.required],code:["",Ve.required]})}updateCode(){let t=this.form.get("name"),n=this.form.get("code");t&&n&&n.pristine&&n.setValue((0,Fe.normalizeString)(`${t.value}`,"-"))}confirm(){let{name:t,code:n}=this.form.value;!t||!n||this.resolveWith({facetId:this.facetId,code:n,translations:[{languageCode:this.languageCode,name:t}]})}cancel(){this.resolveWith()}static{this.\u0275fac=function(n){return new(n||e)(P(We))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-create-facet-value-dialog"]],standalone:!1,decls:9,vars:7,consts:[["vdrDialogTitle",""],[1,"form-grid",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input"],["for","code",3,"label"],["id","code","type","text","formControlName","code"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(_(0,ts,2,3,"ng-template",0),s(1,"div",1)(2,"vdr-form-field",2),c(3,"translate"),s(4,"input",3),C("input",function(){return i.updateCode()}),p()(),s(5,"vdr-form-field",4),c(6,"translate"),h(7,"input",5),p()(),_(8,is,6,7,"ng-template",6)),n&2&&(a(),o("formGroup",i.form),a(),o("label",d(3,3,"common.name")),a(3),o("label",d(6,5,"common.code")))},dependencies:[ce,re,xe,Ie,Pe,he,ie,He,we,$],encapsulation:2,changeDetection:0})}}return e})(),um=ee`
    query GetFacetDetail($id: ID!, $facetValueListOptions: FacetValueListOptions) {
        facet(id: $id) {
            ...FacetWithValueList
        }
    }
    ${Wi}
`,_m=(()=>{class e extends St{constructor(t,n,i,r,m){super(),this.changeDetector=t,this.dataService=n,this.formBuilder=i,this.notificationService=r,this.modalService=m,this.customFields=this.getCustomFieldConfig("Facet"),this.customValueFields=this.getCustomFieldConfig("FacetValue"),this.detailForm=this.formBuilder.group({facet:this.formBuilder.group({code:["",Ve.required],name:"",visible:!0,customFields:this.formBuilder.group(ct(this.customFields))}),values:this.formBuilder.record({})}),this.currentPage=1,this.itemsPerPage=10,this.totalItems=0,this.filterControl=new mt(""),this.values$=new _e([]),this.updatePermission=[E.UpdateCatalog,E.UpdateFacet]}ngOnInit(){this.init(),this.filterControl.valueChanges.pipe(it(200),yt(this.destroy$)).subscribe(t=>{this.currentPage=1,this.fetchFacetValues(this.currentPage,this.itemsPerPage,t)})}ngOnDestroy(){this.destroy()}updateCode(t,n){if(!t){let i=this.detailForm.get(["facet","code"]);i&&i.pristine&&i.setValue((0,Fe.normalizeString)(n,"-"))}}updateValueCode(t,n,i){if(!t){let r=this.detailForm.get(["values",i,"code"]);r&&r.pristine&&r.setValue((0,Fe.normalizeString)(n,"-"))}}customValueFieldIsSet(t,n){return!!this.detailForm.get(["values",t,"customFields",n])}addFacetValue(){this.modalService.fromComponent(mm,{locals:{languageCode:this.languageCode,facetId:this.id}}).pipe(k(t=>t?this.dataService.facet.createFacetValues([t]):X)).subscribe(t=>{t.createFacetValues&&(this.notificationService.success("common.notify-create-success",{entity:"FacetValue"}),this.currentPage=1,this.fetchFacetValues(this.currentPage,this.itemsPerPage))})}create(){let t=this.detailForm.get("facet");if(!t||!t.dirty)return;let n=this.getUpdatedFacet({id:"",createdAt:"",updatedAt:"",isPrivate:!1,languageCode:this.languageCode,name:"",code:"",translations:[]},t,this.languageCode);this.dataService.facet.createFacet(n).subscribe(i=>{this.notificationService.success("common.notify-create-success",{entity:"Facet"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",i.createFacet.id],{relativeTo:this.route})},i=>{this.notificationService.error("common.notify-create-error",{entity:"Facet"})})}save(){let t=this.detailForm.get("values");Z(this.entity$,this.languageCode$).pipe(Ge(1),ye(([n,i])=>{let r=this.detailForm.get("facet"),m=[];if(r&&r.dirty){let g=this.getUpdatedFacet(n,r,i);g&&m.push(this.dataService.facet.updateFacet(g))}if(t&&t.dirty){let g=this.getUpdatedFacetValues(t,i);g.length&&m.push(this.dataService.facet.updateFacetValues(g))}return nt(m)})).subscribe(()=>{this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"Facet"})},n=>{this.notificationService.error("common.notify-update-error",{entity:"Facet"})})}deleteFacetValue(t){this.showModalAndDelete(t).pipe(k(n=>n.result===qe.DELETED?[!0]:this.showModalAndDelete(t,n.message||"").pipe(S(i=>i.result===qe.DELETED))),k(n=>n?this.dataService.query(Gi,{id:this.id}).single$:[])).subscribe(()=>{this.notificationService.success("common.notify-delete-success",{entity:"FacetValue"}),this.fetchFacetValues(this.currentPage,this.itemsPerPage,this.filterControl.value)},n=>{this.notificationService.error("common.notify-delete-error",{entity:"FacetValue"})})}showModalAndDelete(t,n){return this.modalService.dialog({title:"catalog.confirm-delete-facet-value",body:n,buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(i=>i?this.dataService.facet.deleteFacetValues([t],!!n):X),S(i=>i.deleteFacetValues[0]))}setCurrentPage(t){this.currentPage=t,this.fetchFacetValues(this.currentPage,this.itemsPerPage,this.filterControl.value)}setItemsPerPage(t){this.itemsPerPage=t,this.fetchFacetValues(this.currentPage,this.itemsPerPage,this.filterControl.value)}fetchFacetValues(t,n,i){this.dataService.query(um,{id:this.id,facetValueListOptions:te({take:n,skip:(t-1)*n,sort:{createdAt:nn.SortOrder.DESC}},i?{filter:{name:{contains:i}}}:{})}).single$.subscribe(({facet:r})=>{r&&(this.values$.next([...r.valueList.items]),this.totalItems=r.valueList.totalItems,this.setFacetValueFormValues(r,this.languageCode))})}setFormValues(t,n){let i=ne(t,n);this.detailForm.patchValue({facet:{code:t.code,visible:!t.isPrivate,name:i?.name??""}}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["facet","customFields"]),t,i),this.values$.next([...t.valueList.items]),this.totalItems=t.valueList.totalItems,this.setFacetValueFormValues(t,n)}setFacetValueFormValues(t,n){let i=this.detailForm.get("values");t.valueList.items.forEach(r=>{let m=ne(r,n),g={id:r.id,code:r.code,name:m?m.name:""},b=i.get(r.id);if(b?b.patchValue(g):(b=this.formBuilder.group(g),i.addControl(r.id,b)),this.customValueFields.length){let I=b.get(["customFields"]);if(I||(I=new ci({}),b.addControl("customFields",I)),I)for(let F of this.customValueFields){let V=F.name,M=F.type==="localeString"?m?.customFields?.[V]:r.customFields[V],j=I.get(V);j?j.setValue(M):I.addControl(V,new It(M))}}})}getUpdatedFacet(t,n,i){let r=Je({translatable:t,updatedFields:n.value,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:t.name||""}});return r.isPrivate=!n.value.visible,r}getUpdatedFacetValues(t,n){return Object.values(t.controls).filter(r=>r.dirty).map(r=>r.value).map((r,m)=>Je({translatable:r,updatedFields:r,customFieldConfig:this.customValueFields,languageCode:n,defaultTranslation:{languageCode:n,name:""}})).filter(Ot.notNullOrUndefined)}static{this.\u0275fac=function(n){return new(n||e)(P(me),P(R),P(We),P(J),P(z))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-facet-detail"]],standalone:!1,features:[de],decls:45,vars:43,consts:[["updateButton",""],["private",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","facet-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["formGroupName","facet"],["for","visibility",3,"label"],["type","checkbox","clrToggle","","formControlName","visible","id","visibility",3,"vdrDisabled"],[1,"visible-toggle"],[4,"ngIf","ngIfElse"],[3,"entity",4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],[3,"title",4,"ngIf"],["locationId","facet-detail",3,"entity$","detailForm"],[3,"title","paddingX",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],[3,"title"],["entityName","Facet",3,"customFields","customFieldsFormGroup","readonly"],[3,"title","paddingX"],["vdrCardControls",""],[4,"ngIf"],["type","button","class","button m-3",3,"click",4,"vdrIfPermissions"],["type","text",1,"mr-3",3,"formControl","placeholder"],["formArrayName","values",1,"facet-values-list","table"],["class","facet-value",3,"formGroup",4,"ngFor","ngForOf"],[1,"pagination-wrapper"],[3,"itemsPerPageChange","itemsPerPage"],[3,"pageChange","currentPage","itemsPerPage","totalItems"],[1,"facet-value",3,"formGroup"],[1,"align-middle"],["type","text","formControlName","name",3,"input","readonly"],["type","text","formControlName","code"],["class","",4,"ngIf"],["type","button","vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"click","disabled"],["shape","trash",1,"is-danger"],[1,""],["entityName","FacetValue",3,"customFields","compact","customFieldsFormGroup","readonly"],["type","button",1,"button","m-3",3,"click"],["shape","add"]],template:function(n,i){if(n&1){let r=D();s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",2),c(4,"async"),c(5,"async"),c(6,"async"),C("languageCodeChange",function(g){return y(r),x(i.setLanguage(g))}),p()(),s(7,"vdr-ab-right"),h(8,"vdr-action-bar-items",3),_(9,rs,3,4,"button",4),c(10,"async"),_(11,cs,1,1,"ng-template",null,0,H),h(13,"vdr-action-bar-dropdown-menu",3),p()()(),s(14,"form",5)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar",6)(17,"vdr-card")(18,"vdr-form-field",7),c(19,"translate"),s(20,"clr-toggle-wrapper"),h(21,"input",8),c(22,"hasPermission"),s(23,"label",9),_(24,ss,3,3,"ng-container",10)(25,ps,2,3,"ng-template",null,1,H),p()()()(),s(27,"vdr-card"),_(28,ds,1,1,"vdr-page-entity-info",11),c(29,"async"),p()(),s(30,"vdr-page-block")(31,"vdr-card",6)(32,"div",12)(33,"vdr-form-field",13),c(34,"translate"),s(35,"input",14),c(36,"hasPermission"),C("input",function(g){return y(r),x(i.updateCode(i.entity==null?null:i.entity.code,g.target.value))}),p()(),s(37,"vdr-form-field",15),c(38,"translate"),h(39,"input",16),c(40,"hasPermission"),p()()(),_(41,ms,4,8,"vdr-card",17),h(42,"vdr-custom-detail-component-host",18),_(43,Cs,7,9,"vdr-card",19),c(44,"async"),p()()()}if(n&2){let r=W(12),m=W(26);a(3),o("disabled",d(4,19,i.isNew$))("availableLanguageCodes",d(5,21,i.availableLanguages$))("currentLanguageCode",d(6,23,i.languageCode$)),a(6),o("ngIf",d(10,25,i.isNew$))("ngIfElse",r),a(5),o("formGroup",i.detailForm),a(4),o("label",d(19,27,"catalog.visibility")),a(3),o("vdrDisabled",!d(22,29,i.updatePermission)),a(3),o("ngIf",i.detailForm.value.facet==null?null:i.detailForm.value.facet.visible)("ngIfElse",m),a(4),o("ngIf",d(29,31,i.entity$)),a(5),o("label",d(34,33,"common.name")),a(2),o("readonly",!d(36,35,i.updatePermission)),a(2),o("label",d(38,37,"common.code")),a(2),o("readonly",!d(40,39,i.updatePermission)),a(2),o("ngIf",i.customFields.length),a(),o("entity$",i.entity$)("detailForm",i.detailForm),a(),o("ngIf",!d(44,41,i.isNew$))}},dependencies:[le,ke,Te,ot,Q,q,ut,ce,je,re,xe,Pt,Ie,Pe,Bt,si,Me,Be,Ae,Ze,ui,_i,he,ie,Ne,Gt,jt,Wt,Tt,De,Ye,qt,ya,_t,Jt,ge,Ft,Kt,zt,gt,Ca,Y,Lt,$,Qe],styles:[".visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}tr.facet-value[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:var(--card-padding)}"],changeDetection:0})}}return e})(),gm=zi({location:"facet-list",requiresPermission:e=>e.includes(E.DeleteFacet)||e.includes(E.DeleteCatalog),getItemName:e=>e.name,shouldRetryItem:(e,l)=>!!e.message,bulkDelete:(e,l,t)=>e.facet.deleteFacets(l,t).pipe(S(n=>n.deleteFacets))}),fm=Zi({location:"facet-list",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateFacet),getItemName:e=>e.name,bulkAssignToChannel:(e,l,t)=>t.map(n=>e.facet.assignFacetsToChannel({facetIds:l,channelId:n}).pipe(S(i=>i.assignFacetsToChannel)))}),hm=ii({location:"facet-list",requiresPermission:e=>e.includes(E.DeleteCatalog)||e.includes(E.DeleteFacet),getItemName:e=>e.name,bulkRemoveFromChannel:(e,l,t,n)=>e.facet.removeFacetsFromChannel({channelId:t,facetIds:l,force:n}).pipe(S(i=>i.removeFacetsFromChannel)),isErrorResult:e=>e.__typename==="FacetInUseError"?e.message:void 0}),Cu={location:"facet-list",label:"catalog.remove-from-channel",getTranslationVars:({injector:e})=>ti(e.get(R)),icon:"layers",iconClass:"is-warning",requiresPermission:e=>e.includes(E.UpdateFacet)||e.includes(E.UpdateCatalog),isVisible:({injector:e})=>ja(e.get(R)),onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{let i=e.get(z),r=e.get(R),m=e.get(J),g=r.client.userStatus().mapSingle(({userStatus:I})=>I.activeChannelId);function b(I,F){return i.dialog({title:"catalog.remove-from-channel",translationVars:{count:l.length},size:F?"lg":"md",body:F,buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:F?"common.force-remove":"common.remove",returnValue:!0}]}).pipe(k(V=>V?g.pipe(k(M=>M?r.facet.removeFacetsFromChannel({channelId:M,facetIds:I,force:!!F}):X),S(M=>M.removeFacetsFromChannel)):X))}b((0,pe.unique)(l.map(I=>I.id))).pipe(k(I=>{let F=l.length,V=[],M=[],j=0;for(let K of I)K.__typename==="FacetInUseError"&&(V.push(K.message),M.push(l[j]?.id),F--),j++;return 0<M.length?b(M,V.join(`
`)).pipe(S(K=>{let ae=K.filter(oe=>oe.__typename==="FacetInUseError").length;return l.length-ae})):se(F)}),k(I=>I?ti(r).then(({channelCode:F})=>({channelCode:F,removedCount:I})):X)).subscribe(({removedCount:I,channelCode:F})=>{I&&(t.refresh(),n(),m.success("catalog.notify-remove-facets-from-channel-success",{count:I,channelCode:F}))})}},vm={location:"facet-list",label:"common.duplicate",icon:"copy",onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{e.get(z).fromComponent(Ci,{locals:{entities:l,entityName:"Facet",title:"catalog.duplicate-facets",getEntityName:r=>r.name}}).subscribe(r=>{r&&(n(),t.refresh())})}},bu=ee`
    query GetFacetList($options: FacetListOptions, $facetValueListOptions: FacetValueListOptions) {
        facets(options: $options) {
            items {
                ...FacetWithValueList
            }
            totalItems
        }
    }
    ${Wi}
`,Cm=(()=>{class e extends ei{constructor(t){super(),this.dataService=t,this.initialLimit=3,this.displayLimit={},this.dataTableListId="facet-list",this.customFields=this.getCustomFieldConfig("Facet"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"visibility",type:{kind:"boolean"},label:"common.visibility",toFilterInput:n=>({isPrivate:{eq:!n}})}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"id"}).addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:jn,getItems:n=>n.facets,setVariables:(n,i)=>({options:{skip:n,take:i,filter:te({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()},facetValueListOptions:{take:100}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}toggleDisplayLimit(t){this.displayLimit[t.id]===t.valueList.items.length?this.displayLimit[t.id]=this.initialLimit:this.displayLimit[t.id]=t.valueList.items.length}setLanguage(t){this.dataService.client.setContentLanguage(t).subscribe()}static{this.\u0275fac=function(n){return new(n||e)(P(R))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-facet-list"]],standalone:!1,features:[de],decls:40,vars:58,consts:[["collapse",""],[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","facet-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","facet-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading"],["id","visibility",3,"heading"],["id","values",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","warning",4,"ngIf"],["colorType","success",4,"ngIf"],["colorType","warning"],["colorType","success"],[1,"facet-values-list"],[3,"facetValue","removable","displayFacetName",4,"ngFor","ngForOf"],[4,"ngIf"],["class","button-small",3,"click",4,"ngIf"],[3,"facetValue","removable","displayFacetName"],[1,"button-small",3,"click"],[4,"ngIf","ngIfElse"],["shape","minus"],[3,"customField","sorts"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),c(4,"async"),c(5,"async"),C("languageCodeChange",function(m){return i.setLanguage(m)}),p()(),s(6,"vdr-ab-right"),h(7,"vdr-action-bar-items",2),_(8,bs,4,5,"a",3),h(9,"vdr-action-bar-dropdown-menu",2),p()()(),s(10,"vdr-data-table-2",4),c(11,"async"),c(12,"async"),c(13,"async"),c(14,"async"),C("pageChange",function(m){return i.setPageNumber(m)})("itemsPerPageChange",function(m){return i.setItemsPerPage(m)})("visibleColumnsChange",function(m){return i.setVisibleColumns(m)}),h(15,"vdr-bulk-action-menu",5)(16,"vdr-dt2-search",6),c(17,"translate"),s(18,"vdr-dt2-column",7),c(19,"translate"),_(20,ys,1,1,"ng-template"),p(),s(21,"vdr-dt2-column",8),c(22,"translate"),_(23,xs,2,4,"ng-template"),p(),s(24,"vdr-dt2-column",9),c(25,"translate"),_(26,Is,2,4,"ng-template"),p(),s(27,"vdr-dt2-column",10),c(28,"translate"),_(29,Ps,4,4,"ng-template"),p(),s(30,"vdr-dt2-column",11),c(31,"translate"),_(32,Ts,1,1,"ng-template"),p(),s(33,"vdr-dt2-column",12),c(34,"translate"),_(35,Ss,2,2,"ng-template"),p(),s(36,"vdr-dt2-column",13),c(37,"translate"),_(38,Rs,5,7,"ng-template"),p(),_(39,Bs,1,2,"vdr-dt2-custom-field-column",14),p()),n&2&&(a(3),o("availableLanguageCodes",d(4,29,i.availableLanguages$))("currentLanguageCode",d(5,31,i.contentLanguage$)),a(5),o("vdrIfPermissions",U(57,ho)),a(2),o("id",i.dataTableListId)("items",d(11,33,i.items$))("itemsPerPage",d(12,35,i.itemsPerPage$))("totalItems",d(13,37,i.totalItems$))("currentPage",d(14,39,i.currentPage$))("filters",i.filters),a(5),o("hostComponent",i)("selectionManager",i.selectionManager),a(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",d(17,41,"catalog.filter-by-name")),a(2),o("heading",d(19,43,"common.id"))("hiddenByDefault",!0)("sort",i.sorts.get("id")),a(3),o("heading",d(22,45,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),a(3),o("heading",d(25,47,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),a(3),o("heading",d(28,49,"common.name"))("optional",!1)("sort",i.sorts.get("name")),a(3),o("heading",d(31,51,"common.code")),a(3),o("heading",d(34,53,"common.visibility")),a(3),o("heading",d(37,55,"catalog.values")),a(3),o("ngForOf",i.customFields))},dependencies:[le,Q,q,Oe,Me,Be,Ae,Ze,Re,Qt,Ne,De,Ye,Zt,ze,Ke,lt,Xt,ge,Y,yn,$,rt],styles:[".facet-values-list[_ngcontent-%COMP%]{max-width:500px;display:flex;flex-wrap:wrap;align-items:center;gap:4px}"]})}}return e})(),Xi="__DEFAULT_VARIANT__",bm=(()=>{class e{constructor(t,n){this.dataService=t,this.formBuilder=n,this.variantsChange=new Xe,this.optionGroups=[],this.variantFormValues={},this.selectedStockLocationId=null}ngOnInit(){this.dataService.settings.getActiveChannel().single$.subscribe(t=>{this.currencyCode=t.activeChannel.defaultCurrencyCode}),this.stockLocations$=this.dataService.query(Zn,{options:{take:999}}).refetchOnChannelChange().mapStream(({stockLocations:t})=>t.items).pipe(Ee(t=>{t.length&&(this.selectedStockLocationId=t[0].id,this.onFormChange())})),this.generateVariants()}addOption(){this.optionGroups.push({name:"",values:[]});let t=this.optionGroups.length-1;setTimeout(()=>{this.groupNameInputs.get(t)?.nativeElement?.focus()})}removeOption(t){this.optionGroups=this.optionGroups.filter(n=>n.name!==t),this.generateVariants()}generateVariants(){let n=this.optionGroups.reduce((i,r)=>i+r.values.length,0)?this.optionGroups.map(i=>i.values.map(r=>r.name)):[[Xi]];this.variants=(0,Ot.generateAllCombinations)(n).map(i=>({id:i.join("|"),values:i})),this.variants.forEach((i,r)=>{if(!this.variantFormValues[i.id]){let m=this.formBuilder.nonNullable.group({optionValues:[i.values],enabled:!0,price:this.copyFromDefault(i.id,"price",0),sku:this.copyFromDefault(i.id,"sku",""),stock:this.copyFromDefault(i.id,"stock",0)});m.valueChanges.subscribe(()=>this.onFormChange()),r===0&&(m.get("price")?.valueChanges.subscribe(g=>{this.copyValuesToPristine("price",m.get("price"))}),m.get("sku")?.valueChanges.subscribe(g=>{this.copyValuesToPristine("sku",m.get("sku"))}),m.get("stock")?.valueChanges.subscribe(g=>{this.copyValuesToPristine("stock",m.get("stock"))})),this.variantFormValues[i.id]=m}}),this.onFormChange()}trackByFn(t,n){return n.values.join("|")}handleEnter(t,n){t.preventDefault(),t.stopPropagation(),n.focus()}copyValuesToPristine(t,n){n&&Object.values(this.variantFormValues).forEach(i=>{let r=i.get(t);r&&r.pristine&&r.setValue(n.value,{emitEvent:!1})})}onFormChange(){let t=this.variants.map(n=>this.variantFormValues[n.id].value).filter(n=>n.enabled);this.variantsChange.emit({groups:this.optionGroups.map(n=>({name:n.name,values:n.values.map(i=>i.name)})),variants:t,stockLocationId:this.selectedStockLocationId})}copyFromDefault(t,n,i){return t!==Xi?this.variantFormValues[Xi].get(n)?.value:i}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(We))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-generate-product-variants"]],viewQuery:function(n,i){if(n&1&&tt(As,5,Pi),n&2){let r;$e(r=Ue())&&(i.groupNameInputs=r)}},outputs:{variantsChange:"variantsChange"},standalone:!1,decls:7,vars:7,consts:[["optionGroupName",""],["optionValueInputComponent",""],["class","option-groups",4,"ngFor","ngForOf"],[1,"button","mb-2",3,"click"],["shape","plus"],[4,"ngIf"],[1,"option-groups"],[1,"name"],["placeholder","e.g. Size","clrInput","","name","name","required","",3,"ngModelChange","keydown.enter","ngModel"],[1,"values"],[3,"ngModelChange","edit","ngModel","groupName","disabled"],[1,"remove-group"],[1,"button-small","mt-2",3,"click","title"],["shape","trash"],["clrAlertType","warning","class","",3,"clrAlertClosable",4,"ngIf"],[1,"form-grid","mb-2"],[3,"label",4,"ngIf"],["class","variants-preview",4,"ngIf"],["clrAlertType","warning",1,"",3,"clrAlertClosable"],[1,"alert-text"],[3,"label"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"variants-preview"],[1,"table"],[3,"disabled","formGroup",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroup"],["type","text","formControlName","sku",3,"placeholder"],["formControlName","price",3,"currencyCode"],["type","number","formControlName","stock","min","0","step","1"],["type","checkbox","formControlName","enabled","clrCheckbox",""]],template:function(n,i){n&1&&(_(0,Ms,17,13,"div",2),s(1,"button",3),C("click",function(){return i.addOption()}),h(2,"clr-icon",4),f(3),c(4,"translate"),p(),_(5,Qs,5,3,"ng-container",5),c(6,"async")),n&2&&(o("ngForOf",i.optionGroups),a(3),v(" ",d(4,3,"catalog.add-option"),`
`),a(2),o("ngIf",d(6,5,i.stockLocations$)))},dependencies:[Li,$i,Ui,le,ke,Te,Nt,Q,q,wi,Ri,ce,Rt,je,ki,re,xe,Bi,pi,at,Ie,Pe,Ht,he,ie,on,Y,$],styles:["[_nghost-%COMP%]{display:block;margin-bottom:120px}.option-groups[_ngcontent-%COMP%]{display:flex}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.remove-group[_ngcontent-%COMP%]{padding-top:18px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}"]})}}return e})(),Po=(()=>{class e extends ei{constructor(){super(),this.hideLanguageSelect=!1,this.customFields=this.getCustomFieldConfig("ProductVariant"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilters([{name:"name",type:{kind:"text"},label:"common.name",filterField:"name"},{name:"enabled",type:{kind:"boolean"},label:"common.enabled",filterField:"enabled"},{name:"sku",type:{kind:"text"},label:"catalog.sku",filterField:"sku"},{name:"price",type:{kind:"number",inputType:"currency"},label:"common.price",filterField:"price"},{name:"priceWithTax",type:{kind:"number",inputType:"currency"},label:"common.price-with-tax",filterField:"priceWithTax"}]).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().addSorts([{name:"id"},{name:"createdAt"},{name:"updatedAt"},{name:"name"},{name:"sku"},{name:"price"},{name:"priceWithTax"}]).addCustomFieldSorts(this.customFields).connectToRoute(this.route),this.configure({document:Yn,getItems:t=>t.productVariants,setVariables:(t,n)=>{let i=this.searchTermControl.value,r={_and:[]},m=this.filters.createFilterInput();return Object.keys(m).length&&r._and?.push(m),i&&r._and?.push({_or:[{name:{contains:i}},{sku:{contains:i}}]}),this.productId&&r._and?.push({productId:{eq:this.productId}}),{options:{skip:t,take:n,filter:r,sort:this.sorts.createSortInput()}}},refreshListOnChanges:[this.sorts.valueChanges,this.filters.valueChanges]})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-variant-list"]],inputs:{productId:"productId",hideLanguageSelect:"hideLanguageSelect",dataTableId:"dataTableId"},standalone:!1,features:[de],decls:40,vars:65,consts:[["imagePlaceholder",""],[4,"ngIf"],[1,"mt-2",3,"pageChange","itemsPerPageChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","product-variant-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","image",3,"heading"],["id","name",3,"heading","optional","sort"],["id","sku",3,"heading","sort"],["id","enabled",3,"heading"],["id","price",3,"heading","hiddenByDefault","sort"],["id","price-with-tax",3,"heading","sort"],["id","stock-on-hand",3,"heading","hiddenByDefault"],[3,"customField","sorts",4,"ngFor","ngForOf"],[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],[1,"image-placeholder"],[3,"src",4,"ngIf","ngIfElse"],[3,"src"],[1,"placeholder"],["shape","image","size","48"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],[1,"flex","center"],["class","ml-1",4,"ngIf"],[1,"ml-1"],[3,"customField","sorts"]],template:function(n,i){n&1&&(_(0,Ks,4,6,"vdr-page-block",1),s(1,"vdr-data-table-2",2),c(2,"async"),c(3,"async"),c(4,"async"),c(5,"async"),C("pageChange",function(m){return i.setPageNumber(m)})("itemsPerPageChange",function(m){return i.setItemsPerPage(m)}),h(6,"vdr-bulk-action-menu",3)(7,"vdr-dt2-search",4),c(8,"translate"),s(9,"vdr-dt2-column",5),c(10,"translate"),_(11,zs,1,1,"ng-template"),p(),s(12,"vdr-dt2-column",6),c(13,"translate"),_(14,Zs,2,4,"ng-template"),p(),s(15,"vdr-dt2-column",7),c(16,"translate"),_(17,Js,2,4,"ng-template"),p(),s(18,"vdr-dt2-column",8),c(19,"translate"),_(20,tp,4,2,"ng-template"),p(),s(21,"vdr-dt2-column",9),c(22,"translate"),_(23,ip,4,5,"ng-template"),p(),s(24,"vdr-dt2-column",10),c(25,"translate"),_(26,np,1,1,"ng-template"),p(),s(27,"vdr-dt2-column",11),c(28,"translate"),_(29,rp,2,2,"ng-template"),p(),s(30,"vdr-dt2-column",12),c(31,"translate"),_(32,lp,2,4,"ng-template"),p(),s(33,"vdr-dt2-column",13),c(34,"translate"),_(35,cp,2,4,"ng-template"),p(),s(36,"vdr-dt2-column",14),c(37,"translate"),_(38,dp,1,1,"ng-template"),p(),_(39,mp,1,2,"vdr-dt2-custom-field-column",15),p()),n&2&&(o("ngIf",!i.hideLanguageSelect),a(),o("id",i.dataTableId||"product-variant-list")("items",d(2,35,i.items$))("itemsPerPage",d(3,37,i.itemsPerPage$))("totalItems",d(4,39,i.totalItems$))("currentPage",d(5,41,i.currentPage$))("filters",i.filters),a(5),o("hostComponent",i)("selectionManager",i.selectionManager),a(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",d(8,43,"settings.search-by-product-name-or-sku")),a(2),o("heading",d(10,45,"common.id"))("hiddenByDefault",!0)("sort",i.sorts.get("id")),a(3),o("heading",d(13,47,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),a(3),o("heading",d(16,49,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),a(3),o("heading",d(19,51,"common.image")),a(3),o("heading",d(22,53,"catalog.name"))("optional",!1)("sort",i.sorts.get("name")),a(3),o("heading",d(25,55,"catalog.sku"))("sort",i.sorts.get("sku")),a(3),o("heading",d(28,57,"common.enabled")),a(3),o("heading",d(31,59,"common.price"))("hiddenByDefault",!0)("sort",i.sorts.get("price")),a(3),o("heading",d(34,61,"common.price-with-tax"))("sort",i.sorts.get("priceWithTax")),a(3),o("heading",d(37,63,"catalog.stock-on-hand"))("hiddenByDefault",!1),a(3),o("ngForOf",i.customFields))},dependencies:[le,Q,q,Oe,Re,Ne,Zt,ze,Ke,lt,Xt,ge,Y,$,gi,rt,Dt],styles:[".image-col[_ngcontent-%COMP%]{width:70px}.image-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;margin-top:calc(var(--space-unit) * -1);margin-bottom:calc(var(--space-unit) * -1);background-color:var(--color-component-bg-200)}.image-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img)}.image-placeholder[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--color-grey-300)}.search-form[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}vdr-product-search-input[_ngcontent-%COMP%]{min-width:300px}@media screen and (max-width: 768px){vdr-product-search-input[_ngcontent-%COMP%]{min-width:100px}}.search-settings-menu[_ngcontent-%COMP%]{margin:0 12px}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.search-index-button[_ngcontent-%COMP%]{position:relative}.search-index-button[_ngcontent-%COMP%]   vdr-status-badge[_ngcontent-%COMP%]{right:0;top:0}.run-updates-button[_ngcontent-%COMP%]{position:relative}.run-updates-button[_ngcontent-%COMP%]   vdr-status-badge[_ngcontent-%COMP%]{left:10px;top:10px}.edit-button[_ngcontent-%COMP%]{margin-inline-end:24px}.sku[_ngcontent-%COMP%]{color:var(--color-text-300)}"]})}}return e})(),yu=ee`
    query GetProductDetail($id: ID!) {
        product(id: $id) {
            ...ProductDetail
        }
    }
    ${ea}
`,ym=(()=>{class e extends St{constructor(t,n,i,r,m,g){super(),this.productDetailService=t,this.formBuilder=n,this.modalService=i,this.notificationService=r,this.dataService=m,this.changeDetector=g,this.customFields=this.getCustomFieldConfig("Product"),this.detailForm=this.formBuilder.group({enabled:!0,name:["",Ve.required],autoUpdateVariantNames:!0,slug:["",Ji(/^[\p{Letter}0-9._-]+$/u)],description:"",facetValueIds:[[]],customFields:this.formBuilder.group(ct(this.customFields))}),this.assetChanges={},this.createVariantsConfig={groups:[],variants:[],stockLocationId:""},this.updatePermissions=[E.UpdateCatalog,E.UpdateProduct]}ngOnInit(){this.init();let t=this.isNew$.pipe(k(r=>r?se([]):this.entity$.pipe(S(m=>m.facetValues)))),i=this.detailForm.get("facetValueIds").valueChanges.pipe(ue(),k(r=>this.dataService.facet.getFacetValues({filter:{id:{in:r}}}).mapSingle(({facetValues:m})=>m.items)),bt(1));this.facetValues$=Ei(t.pipe(Ge(1)),t.pipe(k(()=>i))),this.productChannels$=this.entity$.pipe(S(r=>r.channels))}ngOnDestroy(){this.destroy()}isDefaultChannel(t){return t===so.DEFAULT_CHANNEL_CODE}assignToChannel(){this.productChannels$.pipe(Ge(1),k(t=>this.modalService.fromComponent(yi,{size:"lg",locals:{productIds:[this.id],currentChannelIds:t.map(n=>n.id)}}))).subscribe()}removeFromChannel(t){ri(ti(this.dataService,t)).pipe(k(({channelCode:n})=>this.modalService.dialog({title:"catalog.remove-product-from-channel",buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"catalog.remove-from-channel",translationVars:{channelCode:n},returnValue:!0}]})),k(n=>n?this.dataService.product.removeProductsFromChannel({channelId:t,productIds:[this.id]}):X)).subscribe(()=>{this.notificationService.success("catalog.notify-remove-product-from-channel-success")},n=>{this.notificationService.error("catalog.notify-remove-product-from-channel-error")})}assignVariantToChannel(t){return this.modalService.fromComponent(yi,{size:"lg",locals:{productIds:[this.id],productVariantIds:[t.id],currentChannelIds:t.channels.map(n=>n.id)}}).subscribe()}removeVariantFromChannel({channelId:t,variant:n}){ri(ti(this.dataService,t)).pipe(k(({channelCode:i})=>this.modalService.dialog({title:"catalog.remove-product-variant-from-channel",buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"catalog.remove-from-channel",translationVars:{channelCode:i},returnValue:!0}]})),k(i=>i?this.dataService.product.removeVariantsFromChannel({channelId:t,productVariantIds:[n.id]}):X)).subscribe(()=>{this.notificationService.success("catalog.notify-remove-variant-from-channel-success")},i=>{this.notificationService.error("catalog.notify-remove-variant-from-channel-error")})}assetsChanged(){return!!Object.values(this.assetChanges).length}updateSlug(t){let n=this.detailForm.get("slug"),i=this.entity?ne(this.entity,this.languageCode):void 0,r=!i||!i.slug;n&&n.pristine&&r&&n.setValue((0,Fe.normalizeString)(`${t}`,"-"))}selectProductFacetValue(){this.displayFacetValueModal().subscribe(t=>{if(t){let n=this.detailForm.controls.facetValueIds,i=n.value??[];n.setValue((0,pe.unique)([...i,...t])),n.markAsDirty()}})}removeProductFacetValue(t){let n=this.detailForm.controls.facetValueIds,i=n.value??[];n.setValue(i.filter(r=>r!==t)),n.markAsDirty()}displayFacetValueModal(){return this.modalService.fromComponent(Co,{size:"md",closable:!0}).pipe(S(t=>t&&t.map(n=>n.id)))}create(){let t=this.detailForm;if(!t.dirty)return;let n=this.getUpdatedProduct({id:"",createdAt:"",updatedAt:"",enabled:!0,languageCode:this.languageCode,name:"",slug:"",featuredAsset:null,assets:[],description:"",translations:[],optionGroups:[],facetValues:[],channels:[]},t,this.languageCode);this.productDetailService.createProductWithVariants(n,this.createVariantsConfig,this.languageCode).subscribe(({createProductVariants:i,productId:r})=>{this.notificationService.success("common.notify-create-success",{entity:"Product"}),this.assetChanges={},this.detailForm.markAsPristine(),this.router.navigate(["../",r],{relativeTo:this.route})},i=>{console.error(i),this.notificationService.error("common.notify-create-error",{entity:"Product"})})}save(){Z(this.entity$,this.languageCode$).pipe(Ge(1),ye(([t,n])=>{let i=this.detailForm,r,m;return(i.dirty||this.assetsChanged())&&(r=this.getUpdatedProduct(t,i,n)),this.productDetailService.updateProduct({product:t,languageCode:n,autoUpdate:this.detailForm.get(["autoUpdateVariantNames"])?.value??!1,productInput:r,variantsInput:m})})).subscribe(t=>{this.updateSlugAfterSave(t),this.detailForm.markAsPristine(),this.assetChanges={},this.notificationService.success("common.notify-update-success",{entity:"Product"}),this.changeDetector.markForCheck()},t=>{this.notificationService.error("common.notify-update-error",{entity:"Product"})})}canDeactivate(){return super.canDeactivate()&&!this.assetChanges.assets&&!this.assetChanges.featuredAsset}setFormValues(t,n){let i=ne(t,n);this.detailForm.patchValue({enabled:t.enabled,name:i?i.name:"",slug:i?i.slug:"",description:i?i.description:"",facetValueIds:t.facetValues.map(r=>r.id)}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),t,i)}getUpdatedProduct(t,n,i){let r=Je({translatable:t,updatedFields:n.value,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:t.name||"",slug:t.slug||"",description:t.description||""}});return fe(te({},r),{assetIds:this.assetChanges.assets?.map(m=>m.id),featuredAssetId:this.assetChanges.featuredAsset?.id,facetValueIds:n.controls.facetValueIds.dirty?n.value.facetValueIds:void 0})}updateSlugAfterSave(t){let n=t[0],i=this.detailForm.get(["product","slug"]);function r(m){return m.hasOwnProperty("updateProduct")}i&&r(n)&&i.setValue(n.updateProduct.slug,{emitEvent:!1})}static{this.\u0275fac=function(n){return new(n||e)(P(xi),P(We),P(z),P(J),P(R),P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-detail2"]],standalone:!1,features:[de],decls:69,vars:86,consts:[["updateButton",""],["variantList",""],[1,"flex","clr-flex-row"],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","product-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","visibility",3,"label"],[4,"vdrIfPermissions"],[4,"ngIf"],[3,"title",4,"ngIf"],[3,"title"],[1,"facets"],[3,"facetValue","removable","remove",4,"ngFor","ngForOf"],["class","button-small mt-2",3,"click",4,"vdrIfPermissions"],["type","submit","hidden","","x-data","prevents enter key from triggering other buttons"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","slug",3,"label","errors"],["id","slug","type","text","formControlName","slug",3,"readonly"],["for","slug",1,"form-grid-span",3,"label","errors"],["formControlName","description",3,"readonly"],["locationId","product-detail",3,"entity$","detailForm"],[3,"change","assets","featuredAsset","updatePermissions"],[3,"title","paddingX"],[4,"ngIf","ngIfElse"],["class","mx-3",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["type","checkbox","clrToggle","","name","enabled",3,"formControl"],[3,"title",4,"vdrIfMultichannel"],[4,"vdrIfDefaultChannelActive"],[1,"flex","channel-assignment"],[1,"mb-2"],[4,"ngFor","ngForOf"],[1,"button-small",3,"click"],["shape","layers"],["icon","times-circle",3,"iconClick",4,"ngIf"],["icon","times-circle",3,"iconClick"],[3,"channelCode"],[1,"options"],[3,"colorFrom","invert",4,"ngFor","ngForOf"],["class","button-small mt-2",3,"routerLink",4,"vdrIfPermissions"],[3,"colorFrom","invert"],[1,"button-small","mt-2",3,"routerLink"],["shape","pencil"],[3,"remove","facetValue","removable"],[1,"button-small","mt-2",3,"click"],["shape","plus"],[3,"entity"],["clrCheckbox","","type","checkbox","id","auto-update","formControlName","autoUpdateVariantNames"],["entityName","Product",3,"customFields","customFieldsFormGroup","readonly"],[3,"variantsChange"],["dataTableId","product-detail-variants-list",3,"productId","hideLanguageSelect"],[1,"mx-3"],[1,"button",3,"routerLink"],["shape","add-text"]],template:function(n,i){if(n&1){let r=D();s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left"),h(3,"div",2),s(4,"vdr-language-selector",3),c(5,"async"),c(6,"async"),c(7,"async"),C("languageCodeChange",function(g){return y(r),x(i.setLanguage(g))}),p()(),s(8,"vdr-ab-right"),h(9,"vdr-action-bar-items",4),_(10,fp,3,4,"button",5),c(11,"async"),_(12,vp,1,1,"ng-template",null,0,H),h(14,"vdr-action-bar-dropdown-menu",4),p()()(),s(15,"form",6)(16,"vdr-page-detail-layout")(17,"vdr-page-detail-sidebar")(18,"vdr-card")(19,"vdr-form-field",7),c(20,"translate"),_(21,Cp,5,5,"clr-toggle-wrapper",8),p()(),_(22,Pp,2,0,"ng-container",9),c(23,"async"),_(24,Fp,7,8,"vdr-card",10),s(25,"vdr-card",11),c(26,"translate"),s(27,"div",12),_(28,Sp,2,4,"vdr-facet-value-chip",13),c(29,"async"),p(),s(30,"div"),_(31,Ep,4,3,"button",14),p()(),_(32,Op,2,1,"vdr-card",9),c(33,"async"),p(),s(34,"vdr-page-block"),h(35,"button",15),s(36,"vdr-card")(37,"div",16)(38,"div")(39,"vdr-form-field",17),c(40,"translate"),s(41,"input",18),c(42,"hasPermission"),C("input",function(g){return y(r),x(i.updateSlug(g.target.value))}),p()(),_(43,Vp,6,3,"div",9),c(44,"async"),p(),s(45,"vdr-form-field",19),c(46,"translate"),c(47,"translate"),h(48,"input",20),c(49,"hasPermission"),p(),s(50,"vdr-form-field",21),c(51,"translate"),c(52,"translate"),h(53,"vdr-rich-text-editor",22),c(54,"hasPermission"),p()()(),_(55,kp,4,8,"vdr-card",10),h(56,"vdr-custom-detail-component-host",23),s(57,"vdr-card",11),c(58,"translate"),s(59,"vdr-assets",24),C("change",function(g){return y(r),x(i.assetChanges=g)}),p()(),s(60,"vdr-card",25),c(61,"translate"),c(62,"async"),_(63,wp,2,0,"div",26),c(64,"async"),_(65,Rp,1,2,"ng-template",null,1,H)(67,Bp,5,5,"div",27),c(68,"async"),p()()()()}if(n&2){let r,m=W(13),g=W(66);a(4),o("disabled",d(5,35,i.isNew$))("availableLanguageCodes",d(6,37,i.availableLanguages$))("currentLanguageCode",d(7,39,i.languageCode$)),a(6),o("ngIf",d(11,41,i.isNew$))("ngIfElse",m),a(5),o("formGroup",i.detailForm),a(4),o("label",d(20,43,"catalog.visibility")),a(2),o("vdrIfPermissions",i.updatePermissions),a(),o("ngIf",!d(23,45,i.isNew$)),a(2),o("ngIf",i.entity==null?null:i.entity.optionGroups.length),a(),o("title",d(26,47,"catalog.facets")),a(3),o("ngForOf",d(29,49,i.facetValues$)),a(3),o("vdrIfPermissions",i.updatePermissions),a(),o("ngIf",d(33,51,i.entity$)),a(7),o("label",d(40,53,"catalog.product-name")),a(2),o("readonly",!d(42,55,i.updatePermissions)),a(2),o("ngIf",d(44,57,i.isNew$)===!1&&((r=i.detailForm.get(U(81,up)))==null?null:r.dirty)),a(2),o("label",d(46,59,"catalog.slug"))("errors",G(82,en,d(47,61,"catalog.slug-pattern-error"))),a(3),o("readonly",!d(49,63,i.updatePermissions)),a(2),o("label",d(51,65,"common.description"))("errors",G(84,en,d(52,67,"catalog.slug-pattern-error"))),a(3),o("readonly",!d(54,69,i.updatePermissions)),a(2),o("ngIf",i.customFields.length),a(),o("entity$",i.entity$)("detailForm",i.detailForm),a(),o("title",d(58,71,"catalog.assets")),a(2),o("assets",i.assetChanges.assets||(i.entity==null?null:i.entity.assets))("featuredAsset",i.assetChanges.featuredAsset||(i.entity==null?null:i.entity.featuredAsset))("updatePermissions",i.updatePermissions),a(),o("title",d(61,73,"catalog.product-variants"))("paddingX",d(62,75,i.isNew$)),a(3),o("ngIf",d(64,77,i.isNew$))("ngIfElse",g),a(4),o("ngIf",d(68,79,i.isNew$)===!1)}},dependencies:[le,ke,Te,ot,Q,q,ut,ce,je,re,xe,Pt,Ie,Pe,Oe,Me,Be,Ae,Ze,fi,Re,Qt,he,ie,hi,Ne,Qi,De,ca,Ye,ma,Ma,_t,Jt,ge,Ft,Kt,zt,gt,bm,Po,Y,$,mi,Qe,qi],styles:["[_nghost-%COMP%]     trix-toolbar{top:24px}.facets[_ngcontent-%COMP%], .options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3px}vdr-action-bar[_ngcontent-%COMP%]   clr-toggle-wrapper[_ngcontent-%COMP%]{margin-top:12px}.variant-filter[_ngcontent-%COMP%]{flex:1;display:flex}.variant-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;max-width:initial;border-radius:3px 0 0 3px!important}.variant-filter[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{border:1px solid var(--color-component-border-300);background-color:var(--color-component-bg-100);border-radius:0 3px 3px 0;border-inline-start:none}.group-name[_ngcontent-%COMP%]{padding-inline-end:6px}.view-mode[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}@media screen and (min-width: 768px){.view-mode[_ngcontent-%COMP%]{flex-direction:row}}.edit-variants-btn[_ngcontent-%COMP%]{margin-top:0}.channel-assignment[_ngcontent-%COMP%]{flex-wrap:wrap;min-height:24px}.pagination-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between}"],changeDetection:0})}}return e})(),xm={location:"product-list",label:"common.delete",icon:"trash",iconClass:"is-danger",requiresPermission:e=>e.includes(E.DeleteProduct)||e.includes(E.DeleteCatalog),onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{let i=e.get(z),r=e.get(R),m=e.get(J);i.dialog({title:"catalog.confirm-bulk-delete-products",translationVars:{count:l.length},buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(g=>g?r.product.deleteProducts((0,pe.unique)(l.map(b=>b.id))):X)).subscribe(g=>{let b=0,I=[];for(let F of g.deleteProducts)F.result===qe.DELETED?b++:F.message&&I.push(F.message);0<b&&m.success("catalog.notify-bulk-delete-products-success",{count:b}),0<I.length&&m.error(I.join(`
`)),t.refresh(),n()})}},Im={location:"product-list",label:"common.assign-to-channel",icon:"layers",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateProduct),isVisible:({injector:e})=>Ki(e.get(R)),onClick:({injector:e,selection:l,clearSelection:t})=>{e.get(z).fromComponent(yi,{size:"lg",locals:{productIds:(0,pe.unique)(l.map(i=>i.id)),currentChannelIds:[]}}).subscribe(i=>{i&&t()})}},Pm=ii({location:"product-list",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateProduct),getItemName:e=>e.name,bulkRemoveFromChannel:(e,l,t)=>e.product.removeProductsFromChannel({channelId:t,productIds:l}).pipe(S(n=>n.removeProductsFromChannel))}),Tm={location:"product-list",label:"catalog.edit-facet-values",icon:"tag",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateProduct),onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{let i=e.get(z),r=e.get(J),m="product",g=(0,pe.unique)(l.map(b=>b.id));return i.fromComponent(bo,{size:"xl",locals:{mode:m,ids:g}}).subscribe(b=>{b&&(r.success("common.notify-bulk-update-success",{count:l.length,entity:m==="product"?"Products":"ProductVariants"}),n())})}},Dm={location:"product-list",label:"common.duplicate",icon:"copy",onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{e.get(z).fromComponent(Ci,{locals:{entities:l,entityName:"Product",title:"catalog.duplicate-products",getEntityName:r=>r.name}}).subscribe(r=>{r&&(n(),t.refresh())})}},Fm=(()=>{class e extends ei{constructor(t,n,i,r){super(),this.dataService=t,this.modalService=n,this.notificationService=i,this.jobQueueService=r,this.pendingSearchIndexUpdates=0,this.dataTableListId="product-list",this.pageLocationId="product-list",this.customFields=this.getCustomFieldConfig("Product"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilters([{name:"enabled",type:{kind:"boolean"},label:"common.enabled",filterField:"enabled"},{name:"slug",type:{kind:"text"},label:"common.slug",filterField:"slug"}]).addFilter({name:"facetValues",type:{kind:"custom",component:ga,serializeValue:m=>m.map(g=>g.id).join(","),deserializeValue:m=>m.split(",").map(g=>({id:g})),getLabel:m=>m.length===0?"":m[0].name?m.map(g=>g.name).join(", "):Vi(this.dataService.facet.getFacetValues({filter:{id:{in:m.map(g=>g.id)}}}).mapSingle(({facetValues:g})=>g.items.map(b=>b.name).join(", ")))},label:"catalog.facet-values",toFilterInput:m=>({facetValueId:{in:m.map(g=>g.id)}})}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSorts([{name:"id"},{name:"createdAt"},{name:"updatedAt"},{name:"name"},{name:"slug"}]).addCustomFieldSorts(this.customFields).connectToRoute(this.route),this.configure({document:qn,getItems:m=>m.products,setVariables:(m,g)=>{let b=this.searchTermControl.value,I=this.filters.createFilterInput();return b&&(I={name:{contains:b},sku:{contains:b}}),{options:{skip:m,take:g,filter:te({},I??{}),filterOperator:b?Ut.OR:Ut.AND,sort:this.sorts.createSortInput()}}},refreshListOnChanges:[this.sorts.valueChanges,this.filters.valueChanges]})}rebuildSearchIndex(){this.dataService.product.reindex().subscribe(({reindex:t})=>{this.notificationService.info("catalog.reindexing"),this.jobQueueService.addJob(t.id,n=>{if(n.state===Ln.COMPLETED){let i=new Intl.NumberFormat().format(n.duration||0);this.notificationService.success("catalog.reindex-successful",{count:n.result.indexedItemCount,time:i}),this.refresh()}else this.notificationService.error("catalog.reindex-error")})})}deleteProduct(t){this.modalService.dialog({title:"catalog.confirm-delete-product",buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(n=>n?this.dataService.product.deleteProduct(t):X),In(500)).subscribe(()=>{this.notificationService.success("common.notify-delete-success",{entity:"Product"}),this.refresh()},n=>{this.notificationService.error("common.notify-delete-error",{entity:"Product"})})}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(z),P(J),P(sa))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-products-list"]],standalone:!1,features:[de],decls:47,vars:69,consts:[["imagePlaceholder",""],[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],[3,"locationId"],["class","button primary mr-1",3,"routerLink",4,"vdrIfPermissions"],[3,"alwaysShow","locationId"],["type","button","vdrDropdownItem","",3,"click"],["shape","refresh",1,""],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],[3,"locationId","hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","image",3,"heading"],["id","name",3,"heading","optional","sort"],["id","slug",3,"heading","sort"],["id","enabled",3,"heading"],["id","number-of-variants",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"button","primary","mr-1",3,"routerLink"],["shape","plus"],[1,"image-placeholder"],[3,"src",4,"ngIf","ngIfElse"],[3,"src"],[1,"placeholder"],["shape","image","size","48"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),c(4,"async"),c(5,"async"),C("languageCodeChange",function(m){return i.setLanguage(m)}),p()(),s(6,"vdr-ab-right"),h(7,"vdr-action-bar-items",2),_(8,Mp,4,5,"a",3),s(9,"vdr-action-bar-dropdown-menu",4)(10,"button",5),C("click",function(){return i.rebuildSearchIndex()}),h(11,"clr-icon",6),f(12),c(13,"translate"),p()()()()(),s(14,"vdr-data-table-2",7),c(15,"async"),c(16,"async"),c(17,"async"),c(18,"async"),C("pageChange",function(m){return i.setPageNumber(m)})("itemsPerPageChange",function(m){return i.setItemsPerPage(m)})("visibleColumnsChange",function(m){return i.setVisibleColumns(m)}),h(19,"vdr-bulk-action-menu",8)(20,"vdr-dt2-search",9),c(21,"translate"),s(22,"vdr-dt2-column",10),c(23,"translate"),_(24,Np,1,1,"ng-template"),p(),s(25,"vdr-dt2-column",11),c(26,"translate"),_(27,Lp,2,4,"ng-template"),p(),s(28,"vdr-dt2-column",12),c(29,"translate"),_(30,$p,2,4,"ng-template"),p(),s(31,"vdr-dt2-column",13),c(32,"translate"),_(33,jp,4,2,"ng-template"),p(),s(34,"vdr-dt2-column",14),c(35,"translate"),_(36,Wp,4,4,"ng-template"),p(),s(37,"vdr-dt2-column",15),c(38,"translate"),_(39,qp,1,1,"ng-template"),p(),s(40,"vdr-dt2-column",16),c(41,"translate"),_(42,Yp,2,2,"ng-template"),p(),s(43,"vdr-dt2-column",17),c(44,"translate"),_(45,Kp,2,6,"ng-template"),p(),_(46,zp,1,2,"vdr-dt2-custom-field-column",18),p()),n&2&&(a(3),o("availableLanguageCodes",d(4,36,i.availableLanguages$))("currentLanguageCode",d(5,38,i.contentLanguage$)),a(4),o("locationId",i.pageLocationId),a(),o("vdrIfPermissions",U(68,Ap)),a(),o("alwaysShow",!0)("locationId",i.pageLocationId),a(3),v(" ",d(13,40,"catalog.rebuild-search-index")," "),a(2),o("id",i.dataTableListId)("items",d(15,42,i.items$))("itemsPerPage",d(16,44,i.itemsPerPage$))("totalItems",d(17,46,i.totalItems$))("currentPage",d(18,48,i.currentPage$))("filters",i.filters),a(5),o("locationId",i.dataTableListId)("hostComponent",i)("selectionManager",i.selectionManager),a(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",d(21,50,"settings.search-by-product-name-or-sku")),a(2),o("heading",d(23,52,"common.id"))("hiddenByDefault",!0)("sort",i.sorts.get("id")),a(3),o("heading",d(26,54,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),a(3),o("heading",d(29,56,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),a(3),o("heading",d(32,58,"common.image")),a(3),o("heading",d(35,60,"catalog.name"))("optional",!1)("sort",i.sorts.get("name")),a(3),o("heading",d(38,62,"common.slug"))("sort",i.sorts.get("slug")),a(3),o("heading",d(41,64,"common.enabled")),a(3),o("heading",d(44,66,"catalog.number-of-variants")),a(3),o("ngForOf",i.customFields))},dependencies:[le,Q,q,Oe,Me,Be,Ae,Ze,Re,Ne,Tt,De,Ye,Zt,ze,Ke,lt,Xt,ge,Y,$,gi,rt],styles:[Zp]})}}return e})(),Sm=(()=>{class e{constructor(t){this.dataService=t,this.priceChange$=new _e(0),this.taxCategoryIdChange$=new _e("")}ngOnInit(){let t=this.dataService.settings.getTaxRatesSimple(999,0,"cache-first").mapStream(i=>i.taxRates.items),n=this.dataService.settings.getActiveChannel("cache-first").refetchOnChannelChange().mapStream(i=>i.activeChannel);this.taxRate$=Z(n,t,this.taxCategoryIdChange$).pipe(S(([i,r,m])=>{let g=i.defaultTaxZone;if(!g)return 0;let b=r.find(I=>I.zone.id===g.id&&I.category.id===m);return b?b.value:0})),this.grossPrice$=Z(this.taxRate$,this.priceChange$).pipe(S(([i,r])=>Math.round(r*((100+i)/100))))}ngOnChanges(t){"price"in t&&this.priceChange$.next(t.price.currentValue),"taxCategoryId"in t&&this.taxCategoryIdChange$.next(t.taxCategoryId.currentValue)}static{this.\u0275fac=function(n){return new(n||e)(P(R))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-variant-price-detail"]],inputs:{priceIncludesTax:"priceIncludesTax",price:"price",currencyCode:"currencyCode",taxCategoryId:"taxCategoryId"},standalone:!1,features:[Ct],decls:5,vars:5,consts:[[1,"clr-control-label"],["class","value",4,"ngIf"],[1,"value"]],template:function(n,i){n&1&&(s(0,"label",0),f(1),c(2,"translate"),p(),_(3,ed,4,8,"div",1)(4,td,6,14,"div",1)),n&2&&(a(),T(d(2,3,"catalog.taxes")),a(2),o("ngIf",i.priceIncludesTax),a(),o("ngIf",!i.priceIncludesTax))},dependencies:[ke,q,Y,$,Dt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.value[_ngcontent-%COMP%]{margin-top:3px}"],changeDetection:0})}}return e})(),Em=(()=>{class e{calculatedPriceDiffersFromInputPrice(){let t=this.variant.prices.find(n=>n.currencyCode===this.channelDefaultCurrencyCode)??this.variant.prices[0];return t?this.channelPriceIncludesTax?this.variant.priceWithTax!==t.price:this.variant.price!==t.price:!1}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-variant-price-strategy-detail"]],inputs:{channelPriceIncludesTax:"channelPriceIncludesTax",variant:"variant",channelDefaultCurrencyCode:"channelDefaultCurrencyCode"},standalone:!1,decls:1,vars:1,consts:[["class","price-strategy-detail",4,"ngIf"],[1,"price-strategy-detail"],["for","price",3,"label","tooltip"],[1,"form-grid","mt-2"],[3,"label"]],template:function(n,i){n&1&&_(0,id,13,20,"div",0),n&2&&o("ngIf",i.calculatedPriceDiffersFromInputPrice())},dependencies:[q,hi,$,Dt],styles:["[_nghost-%COMP%]{display:block}.price-strategy-detail[_ngcontent-%COMP%]{margin-top:calc(var(--space-unit) * 2);padding-top:calc(var(--space-unit) * 2);border-top:1px solid var(--color-weight-150)}"],changeDetection:0})}}return e})(),xu=ee`
    query GetProductVariantsQuickJump($id: ID!) {
        product(id: $id) {
            id
            variants {
                id
                name
                sku
            }
        }
    }
`,Om=(()=>{class e{constructor(t,n){this.dataService=t,this.router=n,this.searchFn=(i,r)=>r.name.toLowerCase().includes(i.toLowerCase())||r.sku.toLowerCase().includes(i.toLowerCase())}ngOnInit(){this.variants$=this.dataService.query(Kn,{id:this.productId}).mapStream(t=>t.product?.variants??[])}onSelect(t){t&&this.router.navigate(["catalog","products",this.productId,"variants",t.id]).then(()=>this.selectedVariantId=void 0)}static{this.\u0275fac=function(n){return new(n||e)(P(R),P(dt))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-variant-quick-jump"]],inputs:{productId:"productId"},standalone:!1,decls:2,vars:3,consts:[["appendTo","body","bindValue","id",3,"items","ngModel","searchFn","clearable","placeholder","ngModelChange","change",4,"ngIf"],["appendTo","body","bindValue","id",3,"ngModelChange","change","items","ngModel","searchFn","clearable","placeholder"],["ng-option-tmp",""]],template:function(n,i){if(n&1&&(_(0,ad,4,9,"ng-select",0),c(1,"async")),n&2){let r;o("ngIf",((r=d(1,1,i.variants$))==null?null:r.length)>1)}},dependencies:[q,re,at,di,Nn,Y,$],encapsulation:2,changeDetection:0})}}return e})(),Vm=(()=>{class e extends St{constructor(t,n,i,r,m,g){super(),this.productDetailService=t,this.formBuilder=n,this.modalService=i,this.notificationService=r,this.dataService=m,this.changeDetector=g,this.updatePermissions=[E.UpdateCatalog,E.UpdateProduct],this.customFields=this.getCustomFieldConfig("ProductVariant"),this.customPriceFields=this.getCustomFieldConfig("ProductVariantPrice"),this.customOptionFields=this.getCustomFieldConfig("ProductOption"),this.detailForm=this.formBuilder.group({id:"",enabled:!1,sku:"",name:"",taxCategoryId:"",stockOnHand:0,useGlobalOutOfStockThreshold:!0,outOfStockThreshold:0,trackInventory:$t.TRUE,facetValueIds:[],customFields:this.formBuilder.group(ct(this.customFields))}),this.stockLevelsForm=this.formBuilder.array([]),this.pricesForm=this.formBuilder.array([]),this.assetChanges={},this.GlobalFlag=$t}ngOnInit(){this.init(),this.dataService.settings.getGlobalSettings("cache-first").single$.subscribe(({globalSettings:m})=>{this.globalTrackInventory=m.trackInventory,this.globalOutOfStockThreshold=m.outOfStockThreshold,this.changeDetector.markForCheck()}),this.taxCategories$=this.result$.pipe(S(m=>m.taxCategories.items));let t=this.result$.pipe(Ee(m=>this.channelDefaultCurrencyCode=m.activeChannel.defaultCurrencyCode),S(m=>m.activeChannel.availableCurrencyCodes));this.unusedCurrencyCodes$=Z(this.pricesForm.valueChanges,t).pipe(S(([m,g])=>g.filter(b=>!m.map(I=>I.currencyCode).includes(b))));let n=this.result$.pipe(S(m=>m.stockLocations.items));this.unusedStockLocation$=Z(this.entity$,n).pipe(S(([m,g])=>{let b=m.stockLevels.map(I=>I.stockLocation.id);return g.filter(I=>!b.includes(I.id))})),this.channelPriceIncludesTax$=this.dataService.settings.getActiveChannel("cache-first").refetchOnChannelChange().mapStream(m=>m.activeChannel.pricesIncludeTax).pipe(bt(1)),this.stockLevels$=this.entity$.pipe(S(m=>m?.stockLevels??[]));let i=this.entity$.pipe(S(m=>m.facetValues??[])),r=this.detailForm.get("facetValueIds").valueChanges.pipe(Tn(1),ue(),k(m=>this.dataService.facet.getFacetValues({filter:{id:{in:m}}}).mapSingle(({facetValues:g})=>g.items)),bt(1));this.facetValues$=Ei(i.pipe(Ge(1)),i.pipe(Dn(r)))}ngOnDestroy(){this.destroy()}addPriceInCurrency(t){this.pricesForm.push(this.formBuilder.group({currencyCode:t,price:0,delete:!1,customFields:this.formBuilder.group(ct(this.customPriceFields))}))}toggleDeletePrice(t){t.setValue(!t.value),t.markAsDirty()}addStockLocation(t){this.stockLevelsForm.push(this.formBuilder.group({stockLocationId:t.id,stockLocationName:t.name,stockOnHand:0,stockAllocated:0}))}save(){Z(this.entity$,this.languageCode$).pipe(Ge(1),ye(([t,n])=>{let i=(0,po.pick)(this.getUpdatedVariant(t,this.detailForm,n),["id","enabled","translations","sku","taxCategoryId","facetValueIds","featuredAssetId","assetIds","trackInventory","outOfStockThreshold","useGlobalOutOfStockThreshold","customFields"]);return this.stockLevelsForm.dirty&&(i.stockLevels=this.stockLevelsForm.controls.filter(r=>r.dirty).map(r=>({stockLocationId:r.value.stockLocationId,stockOnHand:r.value.stockOnHand}))),this.pricesForm.dirty&&(i.prices=this.pricesForm.controls.filter(r=>r.dirty).map(r=>({price:r.value.price,currencyCode:r.value.currencyCode,delete:r.value.delete===!0,customFields:r.get("customFields")?.value}))),this.dataService.mutate(Qn,{input:[i]})})).subscribe(t=>{this.detailForm.markAsPristine(),this.stockLevelsForm.markAsPristine(),this.pricesForm.markAsPristine(),this.assetChanges={},this.notificationService.success("common.notify-update-success",{entity:"ProductVariant"}),this.changeDetector.markForCheck()},t=>{this.notificationService.error("common.notify-update-error",{entity:"ProductVariant"})})}assetsChanged(){return!!Object.values(this.assetChanges).length}inventoryIsNotTracked(t){let n=t.get("trackInventory")?.value;return n===$t.FALSE||n===$t.INHERIT&&this.globalTrackInventory===!1}optionGroupCode(t){return this.entity?.product.optionGroups.find(i=>i.id===t)?.code}optionName(t){return(t.translations.find(i=>i.languageCode===this.languageCode)??t.translations[0]).name}removeFacetValue(t){let n=this.detailForm.controls.facetValueIds,i=n.value??[];n.setValue(i.filter(r=>r!==t)),n.markAsDirty()}selectFacetValue(){this.displayFacetValueModal().subscribe(t=>{if(t){let n=this.detailForm.controls.facetValueIds,i=n.value??[];n.setValue((0,pe.unique)([...i,...t])),n.markAsDirty()}})}displayFacetValueModal(){return this.modalService.fromComponent(Co,{size:"md",closable:!0}).pipe(S(t=>t&&t.map(n=>n.id)))}setFormValues(t,n){let i=ne(t,n),r=t.facetValues.map(m=>m.id);this.detailForm.patchValue({id:t.id,enabled:t.enabled,sku:t.sku,name:i?i.name:"",taxCategoryId:t.taxCategory.id,stockOnHand:t.stockLevels[0]?.stockOnHand??0,useGlobalOutOfStockThreshold:t.useGlobalOutOfStockThreshold,outOfStockThreshold:t.outOfStockThreshold,trackInventory:t.trackInventory,facetValueIds:r}),this.stockLevelsForm.clear();for(let m of t.stockLevels)this.stockLevelsForm.push(this.formBuilder.group({stockLocationId:m.stockLocation.id,stockLocationName:m.stockLocation.name,stockOnHand:m.stockOnHand,stockAllocated:m.stockAllocated}));this.pricesForm.clear();for(let m of t.prices){let g=this.formBuilder.group({price:m.price,currencyCode:m.currencyCode,delete:!1,customFields:this.formBuilder.group(ct(this.customPriceFields))});this.customPriceFields.length&&this.setCustomFieldFormValues(this.customPriceFields,g.get(["customFields"]),m),this.pricesForm.push(g)}this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),t,i)}getUpdatedVariant(t,n,i){let r=Je({translatable:t,updatedFields:n.value,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:t.name||""}});return fe(te({},r),{assetIds:this.assetChanges.assets?.map(m=>m.id),featuredAssetId:this.assetChanges.featuredAsset?.id,facetValueIds:n.controls.facetValueIds.dirty?n.value.facetValueIds:void 0,taxCategoryId:n.controls.taxCategoryId.dirty?n.value.taxCategoryId:void 0})}static{this.\u0275fac=function(n){return new(n||e)(P(xi),P(We),P(z),P(J),P(R),P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-variant-detail"]],standalone:!1,features:[de],decls:13,vars:10,consts:[[3,"grow"],[1,"flex","center"],[4,"ngIf"],[3,"productId"],["locationId","product-variant-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["class","form",3,"formGroup",4,"ngIf"],["class","mr-2",3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange",4,"ngIf"],[1,"mr-2",3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],[1,"btn","btn-primary",3,"click","disabled"],[1,"form",3,"formGroup"],["for","visibility",3,"label"],[4,"vdrIfPermissions"],[3,"title",4,"ngIf"],[3,"title"],[1,"facets"],[3,"facetValue","removable","remove",4,"ngFor","ngForOf"],["class","button-small mt-2",3,"click",4,"vdrIfPermissions"],[3,"entity",4,"ngIf"],["type","submit","hidden","","x-data","prevents enter key from triggering other buttons"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","sku",3,"label"],["id","sku","type","text","formControlName","sku",3,"readonly"],["locationId","product-variant-detail",3,"entity$","detailForm"],[3,"change","assets","featuredAsset","updatePermissions"],["for","taxCategory",3,"label"],["name","taxCategory","formControlName","taxCategoryId"],[3,"value",4,"ngFor","ngForOf"],["class","form-grid prices",3,"formGroup",4,"ngFor","ngForOf"],[3,"channelPriceIncludesTax","channelDefaultCurrencyCode","variant"],["for","track-inventory",3,"label","tooltip"],["name","track-inventory","formControlName","trackInventory",3,"disabled"],[3,"value"],[3,"label","tooltip"],["type","number","formControlName","outOfStockThreshold",3,"readonly","vdrDisabled"],["type","checkbox","clrToggle","","name","useGlobalOutOfStockThreshold","formControlName","useGlobalOutOfStockThreshold",3,"vdrDisabled"],["class","form-grid stock-levels",3,"formGroup",4,"ngFor","ngForOf"],["type","checkbox","clrToggle","","name","enabled",3,"formControl"],[1,"options"],[3,"colorFrom","invert",4,"ngFor","ngForOf"],["class","button-small mt-2",3,"routerLink",4,"vdrIfPermissions"],[3,"colorFrom","invert"],[1,"button-small","mt-2",3,"routerLink"],["shape","pencil"],[3,"remove","facetValue","removable"],[1,"button-small","mt-2",3,"click"],["shape","plus"],[3,"entity"],["entityName","ProductVariant",3,"customFields","customFieldsFormGroup","readonly"],[1,"form-grid","prices",3,"formGroup"],["for","price",3,"label","tooltip"],[1,"price-wrapper"],["name","price","formControlName","price",3,"currencyCode","readonly"],[3,"price","currencyCode","priceIncludesTax","taxCategoryId"],["class","form-grid-span",4,"ngIf"],[1,"button-small","delete-button",3,"click","disabled"],["shape","trash"],[1,"form-grid-span"],[1,"title-row"],[1,"title"],["entityName","ProductVariantPrice",3,"customFields","customFieldsFormGroup","readonly"],["vdrDropdownTrigger","",1,"button","mt-2"],["shape","ellipsis-vertical"],["vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["vdrDropdownItem","",3,"click"],[1,"form-grid","stock-levels",3,"formGroup"],[3,"label","for"],["type","number","formControlName","stockOnHand",3,"id","readonly"],[3,"label"],["shape","map-marker"]],template:function(n,i){n&1&&(s(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left",0)(3,"div",1),_(4,cd,2,1,"ng-container",2),c(5,"async"),h(6,"vdr-product-variant-quick-jump",3),p()(),s(7,"vdr-ab-right"),h(8,"vdr-action-bar-items",4),_(9,sd,3,4,"button",5),h(10,"vdr-action-bar-dropdown-menu",4),p()()(),_(11,Ed,79,102,"form",6),c(12,"async")),n&2&&(a(2),o("grow",!0),a(2),o("ngIf",d(5,5,i.availableLanguages$)),a(2),o("productId",i.entity==null?null:i.entity.product.id),a(3),o("vdrIfPermissions",U(9,bi)),a(2),o("ngIf",d(12,7,i.entity$)))},dependencies:[le,ke,Te,ot,Q,q,ut,wi,Ri,ce,Rt,je,ki,re,xe,Pt,Ie,Pe,Oe,Me,Be,Ae,Ze,fi,Re,Ht,Qt,he,ie,hi,Ne,Gt,jt,Wt,Tt,De,Ye,qt,_t,Jt,ge,Ft,Kt,zt,gt,Sm,Em,Om,Y,$,la,mi,Qe],styles:[".facets[_ngcontent-%COMP%], .options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3px}vdr-product-variant-quick-jump[_ngcontent-%COMP%]{flex:1;margin-inline-end:calc(var(--space-unit) * 2)}.stock-levels[_ngcontent-%COMP%], .prices[_ngcontent-%COMP%]{margin-top:calc(var(--space-unit) * 2);padding-top:calc(var(--space-unit) * 2);border-top:1px solid var(--color-weight-150)}.price-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-unit);width:100%}.price-wrapper.pending-deletion[_ngcontent-%COMP%]   vdr-currency-input[_ngcontent-%COMP%]{opacity:.7}.price-wrapper.pending-deletion[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background-color:var(--color-error-700);color:var(--color-error-100)}.title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]{font-size:var(--font-size-base)}"],changeDetection:0})}}return e})(),km={location:"product-variant-list",label:"common.assign-to-channel",icon:"layers",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateProduct),isVisible:({injector:e})=>Ki(e.get(R)),onClick:({injector:e,selection:l,clearSelection:t})=>{e.get(z).fromComponent(yi,{size:"lg",locals:{productVariantIds:(0,pe.unique)(l.map(i=>i.id)),currentChannelIds:[]}}).subscribe(i=>{i&&t()})}},wm=ii({location:"product-variant-list",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateProduct),getItemName:e=>e.name,bulkRemoveFromChannel:(e,l,t)=>e.product.removeVariantsFromChannel({channelId:t,productVariantIds:l}).pipe(S(n=>n.removeProductVariantsFromChannel))}),Rm={location:"product-variant-list",label:"common.delete",icon:"trash",iconClass:"is-danger",requiresPermission:e=>e.includes(E.DeleteProduct)||e.includes(E.DeleteCatalog),onClick:({injector:e,selection:l,hostComponent:t,clearSelection:n})=>{let i=e.get(z),r=e.get(R),m=e.get(J);i.dialog({title:"common.confirm-bulk-delete",translationVars:{count:l.length},buttons:[{type:"secondary",label:"common.cancel"},{type:"danger",label:"common.delete",returnValue:!0}]}).pipe(k(g=>g?r.product.deleteProductVariants((0,pe.unique)(l.map(b=>b.id))):X)).subscribe(g=>{let b=0,I=[];for(let F of g.deleteProductVariants)F.result===qe.DELETED?b++:F.message&&I.push(F.message);0<b&&m.success("catalog.notify-bulk-delete-products-success",{count:b}),0<I.length&&m.error(I.join(`
`)),t.refresh(),n()})}},Bm={location:"product-variant-list",label:"catalog.edit-facet-values",icon:"tag",requiresPermission:e=>e.includes(E.UpdateCatalog)||e.includes(E.UpdateProduct),onClick:({injector:e,selection:l,clearSelection:t})=>{let n=e.get(z),i=e.get(J),r="variant",m=(0,pe.unique)(l.map(g=>g.id));return n.fromComponent(bo,{size:"xl",locals:{mode:r,ids:m}}).subscribe(g=>{g&&(i.success("common.notify-bulk-update-success",{count:l.length,entity:r==="variant"?"Products":"ProductVariants"}),t())})}},Iu=(()=>{class e{constructor(t){this.changeDetector=t,this.formGroupMap=new Map,this.updatePermission=[E.UpdateCatalog,E.UpdateProduct]}ngOnInit(){this.subscription=this.formArray.valueChanges.pipe(S(t=>t.length),it(1),ue()).subscribe(()=>{this.buildFormGroupMap()}),this.buildFormGroupMap()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}trackByFn(t,n){return n.id!=null?n.id:t}getFeaturedAsset(t){return this.pendingAssetChanges[t.id]?.featuredAsset||t.featuredAsset}optionGroupName(t){let n=this.optionGroups.find(i=>i.id===t);return n&&n.name}buildFormGroupMap(){this.formGroupMap.clear();for(let t of this.formArray.controls)this.formGroupMap.set(t.value.id,t);this.changeDetector.markForCheck()}static{this.\u0275fac=function(n){return new(n||e)(P(me))}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-product-variants-table"]],inputs:{formArray:[0,"productVariantsFormArray","formArray"],variants:"variants",paginationConfig:"paginationConfig",channelPriceIncludesTax:"channelPriceIncludesTax",optionGroups:"optionGroups",pendingAssetChanges:"pendingAssetChanges"},standalone:!1,decls:24,vars:24,consts:[["placeholder",""],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"left","align-middle"],[1,"card-img"],[1,"featured-asset"],[3,"src",4,"ngIf","ngIfElse"],["clrInput","","type","text","formControlName","name",3,"readonly","placeholder"],["clrInput","","type","text","formControlName","sku",3,"readonly","placeholder"],[1,"left","align-middle","price"],["clrInput","","formControlName","price",3,"currencyCode","readonly",4,"ngIf"],["clrInput","","formControlName","priceWithTax",3,"currencyCode","readonly",4,"ngIf"],[1,"left","align-middle","stock"],["clrInput","","type","number","min","0","step","1","formControlName","stockOnHand",3,"readonly"],["type","checkbox","clrToggle","","name","enabled","formControlName","enabled",3,"vdrDisabled"],[3,"src"],[1,"placeholder"],["shape","image","size","48"],["clrInput","","formControlName","price",3,"currencyCode","readonly"],["clrInput","","formControlName","priceWithTax",3,"currencyCode","readonly"]],template:function(n,i){n&1&&(s(0,"table",1)(1,"thead")(2,"tr"),h(3,"th"),s(4,"th"),f(5),c(6,"translate"),p(),s(7,"th"),f(8),c(9,"translate"),p(),_(10,Od,3,1,"ng-container",2),c(11,"sort"),s(12,"th"),f(13),c(14,"translate"),p(),s(15,"th"),f(16),c(17,"translate"),p(),s(18,"th"),f(19),c(20,"translate"),p()()(),s(21,"tbody"),_(22,Md,2,1,"tr",3),c(23,"paginate"),p()()),n&2&&(a(5),T(d(6,8,"common.name")),a(3),T(d(9,10,"catalog.sku")),a(2),o("ngForOf",O(11,12,i.optionGroups,"id")),a(3),T(d(14,15,"catalog.price")),a(3),T(d(17,17,"catalog.stock-on-hand")),a(3),T(d(20,19,"common.enabled")),a(3),o("ngForOf",O(23,21,i.variants,i.paginationConfig))("ngForTrackBy",i.trackByFn))},dependencies:[le,Te,ot,Nt,Ni,Q,q,ce,Rt,je,re,xe,pi,Ie,Pe,Ht,ie,qt,Lt,$,mi,da,Qe,gi],styles:[".placeholder[_ngcontent-%COMP%]{color:var(--color-grey-300)}.stock[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:96px}td[_ngcontent-%COMP%]{transition:background-color .2s}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}"],changeDetection:0})}}return e})(),Pu=(()=>{class e{constructor(){this.updateVariantName=!0,this.codeInputTouched=!1}ngOnInit(){let t=this.productOption.translations.find(n=>n.languageCode===this.activeLanguage);if(this.name=t?.name??"",this.code=this.productOption.code,this.customFieldsForm=new ci({}),this.customFields){let n=t&&t.customFields||{};for(let i of this.customFields){let r=i.name,m=i.type==="localeString"?n[r]:this.productOption.customFields[r];this.customFieldsForm.addControl(i.name,new It(m))}}}update(){let t=Je({translatable:this.productOption,languageCode:this.activeLanguage,updatedFields:{code:this.code,name:this.name,customFields:this.customFieldsForm.value},customFieldConfig:this.customFields,defaultTranslation:{languageCode:this.activeLanguage,name:""}});this.resolveWith(fe(te({},t),{autoUpdate:this.updateVariantName}))}cancel(){this.resolveWith()}updateCode(t){!this.codeInputTouched&&!this.productOption.code&&(this.code=(0,Fe.normalizeString)(t,"-"))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=B({type:e,selectors:[["vdr-update-product-option-dialog"]],standalone:!1,decls:16,vars:13,consts:[["nameInput","ngModel"],["codeInput","ngModel"],["vdrDialogTitle",""],["for","name",3,"label"],["id","name","type","text","required","",3,"ngModelChange","input","ngModel"],["for","code",3,"label"],["id","code","type","text","required","","pattern","[a-z0-9_-]+",3,"ngModelChange","ngModel"],["type","checkbox","clrCheckbox","",3,"ngModelChange","ngModel"],[4,"ngIf"],["vdrDialogButtons",""],["entityName","ProductOption",3,"customFields","customFieldsFormGroup","readonly"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){if(n&1){let r=D();_(0,Nd,2,3,"ng-template",2),s(1,"vdr-form-field",3),c(2,"translate"),s(3,"input",4,0),be("ngModelChange",function(g){return y(r),Ce(i.name,g)||(i.name=g),x(g)}),C("input",function(g){return y(r),x(i.updateCode(g.target.value))}),p()(),s(5,"vdr-form-field",5),c(6,"translate"),s(7,"input",6,1),be("ngModelChange",function(g){return y(r),Ce(i.code,g)||(i.code=g),x(g)}),p()(),s(9,"clr-checkbox-wrapper")(10,"input",7),be("ngModelChange",function(g){return y(r),Ce(i.updateVariantName,g)||(i.updateVariantName=g),x(g)}),p(),s(11,"label"),f(12),c(13,"translate"),p()(),_(14,Ld,6,9,"section",8)(15,$d,6,7,"ng-template",9)}n&2&&(a(),o("label",d(2,7,"catalog.option-name")),a(2),ve("ngModel",i.name),a(2),o("label",d(6,9,"common.code")),a(2),ve("ngModel",i.code),a(3),ve("ngModel",i.updateVariantName),a(2),T(d(13,11,"catalog.auto-update-option-variant-name")),a(2),o("ngIf",i.customFields.length))},dependencies:[ke,Te,ot,q,ce,je,re,Bi,wn,at,he,ie,He,we,_t,$,Qe],encapsulation:2,changeDetection:0})}}return e})();var Tu=(()=>{class e{static{this.hasRegisteredTabsAndBulkActions=!1}constructor(t,n){e.hasRegisteredTabsAndBulkActions||(t.registerBulkAction(Tm),t.registerBulkAction(Im),t.registerBulkAction(Dm),t.registerBulkAction(Pm),t.registerBulkAction(xm),t.registerBulkAction(Bm),t.registerBulkAction(km),t.registerBulkAction(wm),t.registerBulkAction(Rm),t.registerBulkAction(fm),t.registerBulkAction(vm),t.registerBulkAction(hm),t.registerBulkAction(gm),t.registerBulkAction(am),t.registerBulkAction(om),t.registerBulkAction(lm),t.registerBulkAction(rm),t.registerBulkAction(nm),n.registerPageTab({priority:0,location:"product-list",tab:"catalog.products",route:"",component:Fm}),n.registerPageTab({priority:0,location:"product-detail",tab:"catalog.product",route:"",component:Et({component:ym,query:Wn,entityKey:"product",getBreadcrumbs:i=>[{label:i?i.name:"catalog.create-new-product",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"product-variant-list",tab:"catalog.product-variants",route:"variants",component:Po}),n.registerPageTab({priority:0,location:"product-variant-detail",tab:"catalog.product-variants",route:"",component:Et({component:Vm,query:Hn,entityKey:"productVariant",getBreadcrumbs:i=>[{label:`${i?.product.name}`,link:["/catalog","products",i?.product.id]},{label:`${i?.name} (${i?.sku})`,link:["variants",i?.id]}]})}),n.registerPageTab({priority:0,location:"facet-list",tab:"catalog.facets",route:"",component:Cm}),n.registerPageTab({priority:0,location:"facet-detail",tab:"catalog.facet",route:"",component:Et({component:_m,query:Gi,variables:{facetValueListOptions:{take:10,skip:0,sort:{createdAt:nn.SortOrder.DESC}}},entityKey:"facet",getBreadcrumbs:i=>[{label:i?i.name:"catalog.create-new-facet",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"collection-list",tab:"catalog.collections",route:"",component:cm}),n.registerPageTab({priority:0,location:"collection-detail",tab:"catalog.collection",route:"",component:Et({component:tm,query:Gn,entityKey:"collection",getBreadcrumbs:i=>[{label:i?i.name:"catalog.create-new-collection",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"asset-list",tab:"catalog.assets",route:"",component:zd}),n.registerPageTab({priority:0,location:"asset-detail",tab:"catalog.asset",route:"",component:Et({component:Kd,query:Un,entityKey:"asset",getBreadcrumbs:i=>[{label:`${i?.name}`,link:[i?.id]}]})}),e.hasRegisteredTabsAndBulkActions=!0)}static{this.\u0275fac=function(n){return new(n||e)(vt(Pa),vt(vi))}}static{this.\u0275mod=dn({type:e})}static{this.\u0275inj=cn({providers:[{provide:Sn,useFactory:t=>Qd(t),multi:!0,deps:[vi]}],imports:[Na,En.forChild([])]})}}return e})(),Am=ee`
    fragment ProductListQueryProductFragment on Product {
        id
        createdAt
        updatedAt
        enabled
        languageCode
        name
        slug
        featuredAsset {
            id
            createdAt
            updatedAt
            preview
            focalPoint {
                x
                y
            }
        }
        variantList {
            totalItems
        }
    }
`,Du=ee`
    query ProductListQuery($options: ProductListOptions) {
        products(options: $options) {
            items {
                ...ProductListQueryProductFragment
            }
            totalItems
        }
    }
    ${Am}
`,To=ee`
    fragment ProductVariantDetailQueryProductVariantFragment on ProductVariant {
        id
        createdAt
        updatedAt
        enabled
        languageCode
        name
        price
        currencyCode
        prices {
            ...ProductVariantPrice
        }
        priceWithTax
        stockOnHand
        stockAllocated
        trackInventory
        outOfStockThreshold
        useGlobalOutOfStockThreshold
        taxRateApplied {
            id
            name
            value
        }
        taxCategory {
            id
            name
        }
        sku
        options {
            ...ProductOption
        }
        stockLevels {
            id
            createdAt
            updatedAt
            stockOnHand
            stockAllocated
            stockLocationId
            stockLocation {
                id
                createdAt
                updatedAt
                name
            }
        }
        facetValues {
            id
            code
            name
            facet {
                id
                name
            }
        }
        featuredAsset {
            ...Asset
        }
        assets {
            ...Asset
        }
        translations {
            id
            languageCode
            name
        }
        channels {
            id
            code
        }
        product {
            id
            name
            optionGroups {
                id
                name
                code
                translations {
                    id
                    languageCode
                    name
                }
            }
        }
    }
    ${Xn}
`,Fu=ee`
    query GetProductVariantDetail($id: ID!) {
        productVariant(id: $id) {
            ...ProductVariantDetailQueryProductVariantFragment
        }
        stockLocations(options: { take: 100 }) {
            items {
                id
                createdAt
                updatedAt
                name
                description
            }
        }
        taxCategories(options: { take: 100 }) {
            items {
                id
                createdAt
                updatedAt
                name
                isDefault
            }
            totalItems
        }
        activeChannel {
            id
            availableCurrencyCodes
            defaultCurrencyCode
        }
    }
    ${To}
`,Su=ee`
    mutation ProductVariantUpdateMutation($input: [UpdateProductVariantInput!]!) {
        updateProductVariants(input: $input) {
            ...ProductVariantDetailQueryProductVariantFragment
        }
    }
    ${To}
`,Mm=ee`
    fragment ProductVariantListQueryProductVariantFragment on ProductVariant {
        id
        createdAt
        updatedAt
        productId
        enabled
        languageCode
        name
        price
        currencyCode
        priceWithTax
        trackInventory
        outOfStockThreshold
        stockLevels {
            id
            createdAt
            updatedAt
            stockLocationId
            stockOnHand
            stockAllocated
            stockLocation {
                id
                createdAt
                updatedAt
                name
            }
        }
        useGlobalOutOfStockThreshold
        sku
        featuredAsset {
            ...Asset
        }
    }

    ${ji}
`,Eu=ee`
    query ProductVariantListQuery($options: ProductVariantListOptions!) {
        productVariants(options: $options) {
            items {
                ...ProductVariantListQueryProductVariantFragment
            }
            totalItems
        }
    }
    ${Mm}
`;export{gu as ASSET_DETAIL_QUERY,Co as ApplyFacetDialogComponent,Kd as AssetDetailComponent,zd as AssetListComponent,yi as AssignProductsToChannelDialogComponent,bo as BulkAddFacetValuesDialogComponent,fu as COLLECTION_DETAIL_QUERY,Tu as CatalogModule,Io as CollectionBreadcrumbPipe,yo as CollectionContentsComponent,xo as CollectionDataTableComponent,tm as CollectionDetailComponent,cm as CollectionListComponent,hu as CollectionTreeComponent,sm as CollectionTreeNodeComponent,tn as CollectionTreeService,vu as ConfirmVariantDeletionDialogComponent,mm as CreateFacetValueDialogComponent,Gd as CreateProductOptionGroupDialogComponent,jd as CreateProductVariantDialogComponent,um as FACET_DETAIL_QUERY,bu as FACET_LIST_QUERY,_m as FacetDetailComponent,Cm as FacetListComponent,Zd as GET_PRODUCTS_WITH_FACET_VALUES_BY_IDS,yu as GET_PRODUCT_DETAIL,Jd as GET_VARIANTS_WITH_FACET_VALUES_BY_IDS,bm as GenerateProductVariantsComponent,co as GeneratedVariant,im as MoveCollectionsDialogComponent,Wd as OPTION_VALUE_INPUT_VALUE_ACCESSOR,on as OptionValueInputComponent,Du as PRODUCT_LIST_QUERY,Fu as PRODUCT_VARIANT_DETAIL_QUERY,To as PRODUCT_VARIANT_DETAIL_QUERY_PRODUCT_VARIANT_FRAGMENT,Eu as PRODUCT_VARIANT_LIST_QUERY,Su as PRODUCT_VARIANT_UPDATE_MUTATION,ym as ProductDetailComponent,xi as ProductDetailService,Fm as ProductListComponent,Ud as ProductOptionsEditorComponent,Vm as ProductVariantDetailComponent,Po as ProductVariantListComponent,Om as ProductVariantQuickJumpComponent,qd as ProductVariantsEditorComponent,Hd as ProductVariantsResolver,Iu as ProductVariantsTableComponent,Xd as UPDATE_PRODUCTS_BULK,em as UPDATE_VARIANTS_BULK,Pu as UpdateProductOptionDialogComponent,Sm as VariantPriceDetailComponent,Em as VariantPriceStrategyDetailComponent,pm as arrayToTree,om as assignCollectionsToChannelBulkAction,Bm as assignFacetValuesToProductVariantsBulkAction,Tm as assignFacetValuesToProductsBulkAction,fm as assignFacetsToChannelBulkAction,km as assignProductVariantsToChannelBulkAction,Im as assignProductsToChannelBulkAction,Qd as createRoutes,nm as deleteCollectionsBulkAction,gm as deleteFacetsBulkAction,Rm as deleteProductVariantsBulkAction,xm as deleteProductsBulkAction,lm as duplicateCollectionsBulkAction,vm as duplicateFacetsBulkAction,Dm as duplicateProductsBulkAction,am as moveCollectionsBulkAction,Yd as productOptionsEditorBreadcrumb,rm as removeCollectionsFromChannelBulkAction,hm as removeFacetsFromChannelBulkAction,Cu as removeFacetsFromChannelBulkAction2,wm as removeProductVariantsFromChannelBulkAction,Pm as removeProductsFromChannelBulkAction,lo as replaceLast};
//# sourceMappingURL=chunk-DWQJPOGK.js.map
